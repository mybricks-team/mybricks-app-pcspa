!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):"object"==typeof exports?exports._mybricks_render_web=t(require("react"),require("react-dom")):e._mybricks_render_web=t(e.React,e.ReactDOM)}(this,((__WEBPACK_EXTERNAL_MODULE__359__,__WEBPACK_EXTERNAL_MODULE__318__)=>(()=>{var __webpack_modules__={21:function(module,__unused_webpack_exports,__webpack_require__){var t;t=__WEBPACK_EXTERNAL_MODULE__359__=>(()=>{"use strict";var __webpack_modules__={356:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_370__)=>{function __WEBPACK_DEFAULT_EXPORT__({data,outputs,inputs,onError}){inputs.from(((val,relOutpus)=>{var _a;const script=null===(_a=data.exchange)||void 0===_a?void 0:_a.script;if(script){let fn,returnVal,isOk;try{eval(`fn = ${script}`),returnVal=fn(val),isOk=!0}catch(e){console.error(e),onError(`数据转换错误:${e.message}`,e)}isOk&&outputs.to(returnVal)}else onError("未配置转换规则")}))}__nested_webpack_require_370__.d(__nested_webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__})},359:e=>{e.exports=__WEBPACK_EXTERNAL_MODULE__359__}},__webpack_module_cache__={};function __nested_webpack_require_927__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__nested_webpack_require_927__),n.exports}__nested_webpack_require_927__.d=(e,t)=>{for(var n in t)__nested_webpack_require_927__.o(t,n)&&!__nested_webpack_require_927__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__nested_webpack_require_927__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_927__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __nested_webpack_exports__={};return(()=>{__nested_webpack_require_927__.r(__nested_webpack_exports__),__nested_webpack_require_927__.d(__nested_webpack_exports__,{default:()=>u,getCom:()=>f});const e=JSON.parse('{"title":"Fn计算","namespace":"mybricks.core-comlib.fn","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"Fn计算","icon":"./icon.png","runtime":"./Fn.tsx","rtType":"js","visibility":false}'),t=JSON.parse('{"visibility":false,"title":"变量","namespace":"mybricks.core-comlib.var","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"变量","icon":"./icon.png","data":"./data.json","runtime":"./Var.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"get","title":"读取","schema":{"type":"any"},"rels":["return"]},{"id":"set","title":"赋值","schema":{"type":"follow"},"rels":["return"]},{"id":"reset","title":"重置","schema":{"type":"any"}}],"outputs":[{"id":"return","title":"完成","schema":{"type":"unknown"}},{"id":"changed","title":"当值发生变化","schema":{"type":"unknown"}}]}');function n(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}const o=JSON.parse('{"title":"类型转换","visibility":false,"namespace":"mybricks.core-comlib.type-change","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"类型转换","icon":"./icon.png","runtime":"./rt.tsx","editors":"./editors.tsx","rtType":"js","inputs":[{"id":"from","title":"从","schema":{"type":"follow"},"rels":["to"]}],"outputs":[{"id":"to","title":"到","schema":{"type":"follow"},"conMax":1,"editable":true}]}');var r=__nested_webpack_require_927__(356);const i=JSON.parse('{"deprecated":true,"visibility":false,"title":"连接器","namespace":"mybricks.core-comlib.connector","author":"MyBricks","author_name":"MyBricks","version":"1.0.0","description":"连接器","runtime":"./runtime.ts","editors":"./editors.tsx","icon":"./icon.svg","rtType":"js-autorun","inputs":[{"id":"call","rels":["then","catch"],"title":"调用","schema":{"type":"object"}}],"outputs":[{"id":"then","title":"结果","schema":{"type":"unknown"}},{"id":"catch","title":"发生错误","schema":{"type":"string"}}]}');function s({env:e,data:t,outputs:n,onError:o},r={}){if(t.connector)try{e.callConnector(t.connector,r,t.connectorConfig).then((e=>{n.then(e)})).catch((e=>{n.catch(e)}))}catch(e){console.error(e),n.catch(`执行错误 ${e.message||e}`)}else n.catch("没有选择接口")}const c=JSON.parse('{"visibility":false,"title":"作用域输入","namespace":"mybricks.core-comlib.frame-input","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"作用域输入","rtType":"js","runtime":"./runtime.ts","editors":"./editor.tsx","inputs":[{"id":"getCurValue","title":"获取","schema":{"type":"any"},"rels":["return"]}],"outputs":[{"id":"return","title":"结果","schema":{"type":"follow"}}]}'),l=JSON.parse('{"visibility":false,"title":"打开对话框","namespace":"mybricks.core-comlib.scenes","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"切换场景","icon":"./icon.png","runtime":"./runtime.ts","data":"./data.json","rtType":"js","inputs":[{"id":"open","title":"打开","schema":{"type":"any"}}]}'),a=JSON.parse('{"title":"模块","namespace":"mybricks.core-comlib.module","author":"CheMingjun","author_name":"车明君","version":"1.0.0","description":"模块","icon":"./icon.png","data":"./data.json","runtime":"./runtime.tsx","editors":"./editors.ts"}');var d=__nested_webpack_require_927__(359);const p={id:"mybricks-core-comlib",title:"Mybrics核心组件库",author:"CheMingjun",icon:"",version:"1.0.1",comAray:[m({comDef:e,rt:function({inputs:e,outputs:t}){}}),m({comDef:t,rt:function({env:e,data:t,outputs:o,inputs:r,_notifyBindings:i}){r.get(((e,o)=>{const r=n(void 0!==t.val?t.val:t.initValue);o.return(r)})),r.set(((e,r)=>{t.val=e;const s=n(e);o.changed(s,!0),i(s),r.return(s)})),r.reset((()=>{const e=t.initValue;t.val=e;const r=n(e);o.changed(r,!0),i(r)}))}}),m({comDef:o,rt:r.Z}),m({comDef:i,rt:function({env:e,data:t,inputs:n,outputs:o,onError:r}){e.runtime&&(t.immediate?s({env:e,data:t,outputs:o}):n.call((n=>{s({env:e,data:t,outputs:o,onError:r},n)})))}}),m({comDef:c,rt:function({env:e,inputs:t}){e.runtime&&t.getCurValue(((e,t)=>{t.return(e)}))}}),m({comDef:l,rt:function({env:e,data:t,inputs:n,_inputs:o,_inputsCallable:r}){n.open((n=>{e.canvas.open(t._sceneId,n,"popup"===t._sceneShowType?null:t.openType),r._open(n)}))}}),m({comDef:a,rt:function({env:e,data:t,inputs:n,outputs:o}){const[r,i]=(0,d.useState)(),s=(0,d.useMemo)((()=>{const r=e.getModuleJSON(t.definedId);return e.renderModule(r,{ref(s){if(i(s),e.runtime){const{inputs:e,outputs:i}=r,c=t.configs;for(let e in c)s.inputs[e](c[e]);e.forEach((({id:e})=>{n[e]((t=>{s.inputs[e](t)}))})),i.forEach((({id:e})=>{s.outputs(e,o[e])}))}s.run()},disableAutoRun:!0})}),[]);return(0,d.useMemo)((()=>{if(r&&e.edit){const e=t.configs;for(let t in e)r.inputs[t](e[t])}}),[t.configs,r]),s}})]},u=p;function f(e){return p.comAray.find((t=>t.namespace===e))}function m({comDef:e,rt:t,data:n}){return Object.assign(e,{runtime:t,data:n})}})(),__nested_webpack_exports__})(),module.exports=t(__webpack_require__(359))},998:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),i=n(609),s=n.n(i)()(r());s.push([e.id,".error-c0f46 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),s.locals={error:"error-c0f46"};const c=s},942:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),i=n(609),s=n.n(i)()(r());s.push([e.id,"@keyframes slipInto-fb013 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-a6e42 {\n  animation: slipInto-fb013 0.1s ease-in-out 1;\n}\n",""]),s.locals={main:"main-a6e42",slipInto:"slipInto-fb013"};const c=s},432:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),i=n(609),s=n.n(i)()(r());s.push([e.id,".container-ff9f5 {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-ff9f5 .itemWrap-a3069 {\n  position: relative;\n}\n.container-ff9f5 .item-c8a43 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-ff9f5 .errorItem-e6fc8 {\n  color: #f5222d;\n}\n.container-ff9f5 .closeIcon-c5e91 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-ff9f5 .closeIcon-c5e91:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),s.locals={container:"container-ff9f5",itemWrap:"itemWrap-a3069",item:"item-c8a43",errorItem:"errorItem-e6fc8",closeIcon:"closeIcon-c5e91"};const c=s},644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),i=n(609),s=n.n(i)()(r());s.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ced90 {\n  width: 100%;\n  height: 100% !important;\n  position: relative;\n}\n.lyFlexColumn-f7fd6 {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-c8e04 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-b95f6 {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-e1ca1 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-ef832 {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-ad880 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-a2f09 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-a8880 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-c6d62 {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-d7b4c {\n  align-items: flex-end;\n}\n.debugFocus-def53 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-f9041 {\n  flex-shrink: 0;\n}\n.flex-ca980 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ca980 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ca980 > * {\n  height: 100%;\n}\n.error-d4d00 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-e9378 {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-e9378 .tt-d634d {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-e9378 .info-d57d6 {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),s.locals={slot:"slot-ced90",lyFlexColumn:"lyFlexColumn-f7fd6",lyFlexRow:"lyFlexRow-c8e04",justifyContentFlexStart:"justifyContentFlexStart-b95f6",justifyContentFlexCenter:"justifyContentFlexCenter-e1ca1",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-ef832",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-ad880",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-a2f09",alignItemsFlexStart:"alignItemsFlexStart-a8880",alignItemsFlexCenter:"alignItemsFlexCenter-c6d62",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-d7b4c",debugFocus:"debugFocus-def53",com:"com-f9041",flex:"flex-ca980",error:"error-d4d00",errorRT:"errorRT-e9378",tt:"tt-d634d",info:"info-d57d6"};const c=s},621:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(601),r=n.n(o),i=n(609),s=n.n(i)()(r());s.push([e.id,".debugger-fed31 {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-fed31 .titlebar-f7fe6 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-fed31 .titlebar-f7fe6 .resume-ebcb6 svg path {\n  fill: #FA6400;\n}\n",""]),s.locals={debugger:"debugger-fed31",titlebar:"titlebar-f7fe6",resume:"resume-ebcb6"};const c=s},609:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,r,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(o)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(s[l]=!0)}for(var a=0;a<e.length;a++){var d=[].concat(e[a]);o&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},490:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(62),r=n.n(o),i=n(36),s=n.n(i),c=n(892),l=n.n(c),a=n(173),d=n.n(a),p=n(464),u=n.n(p),f=n(998),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var h,g=0,y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},g++||(h=r()(f.Z,y)),m},m.unuse=function(){g>0&&! --g&&(h(),h=null)};const v=m},650:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(62),r=n.n(o),i=n(36),s=n.n(i),c=n(892),l=n.n(c),a=n(173),d=n.n(a),p=n(464),u=n.n(p),f=n(942),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var h,g=0,y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},g++||(h=r()(f.Z,y)),m},m.unuse=function(){g>0&&! --g&&(h(),h=null)};const v=m},759:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(62),r=n.n(o),i=n(36),s=n.n(i),c=n(892),l=n.n(c),a=n(173),d=n.n(a),p=n(464),u=n.n(p),f=n(432),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var h,g=0,y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},g++||(h=r()(f.Z,y)),m},m.unuse=function(){g>0&&! --g&&(h(),h=null)};const v=m},232:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(62),r=n.n(o),i=n(36),s=n.n(i),c=n(892),l=n.n(c),a=n(173),d=n.n(a),p=n(464),u=n.n(p),f=n(644),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var h,g=0,y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},g++||(h=r()(f.Z,y)),m},m.unuse=function(){g>0&&! --g&&(h(),h=null)};const v=m},423:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var o=n(62),r=n.n(o),i=n(36),s=n.n(i),c=n(892),l=n.n(c),a=n(173),d=n.n(a),p=n(464),u=n.n(p),f=n(621),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var h,g=0,y={};y.styleTagTransform=u(),y.setAttributes=l(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=s(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},g++||(h=r()(f.Z,y)),m},m.unuse=function(){g>0&&! --g&&(h(),h=null)};const v=m},62:e=>{"use strict";var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var i={},s=[],c=0;c<e.length;c++){var l=e[c],a=o.base?l[0]+o.base:l[0],d=i[a]||0,p="".concat(a," ").concat(d);i[a]=d+1;var u=n(p),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(f);else{var m=r(f,o);o.byIndex=c,t.splice(c,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function r(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var i=o(e=e||[],r=r||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var c=n(i[s]);t[c].references--}for(var l=o(e,r),a=0;a<i.length;a++){var d=n(i[a]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},173:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},892:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},36:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},464:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},901:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(358),r=n(599),i=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((o=o.apply(e,t||[])).next())}))};const s="_rootFrame_";function c(e,{observable:t}){const{json:n,getComDef:c,env:l,ref:a,onError:d,logger:p,debug:u,debugLogger:f,_isNestedRender:m,_context:h}=e,g=e.scenesOperate||l.scenesOperate,{slot:y,coms:v={},comsAutoRun:_={},cons:b=[],pinRels:x={},pinProxies:I={},pinValueProxies:E={},type:w}=n,C=l,j={},k={},S={},O={},P={};Object.keys(b).forEach((e=>{const t=b[e],{startPinParentKey:n}=t[0];n&&(P[n]=e)}));const A={},T={},R={},M={},$={},D={};function F(e,t,i){if(!m)if("com"===e){const{com:e,pinHostId:s,val:c,fromCon:l,notifyAll:a,comDef:d,conId:p}=t;f?f("com","output",{id:e.id,pinHostId:s,val:(0,r.Am)(c),fromCon:l,notifyAll:a,comDef:d,sceneId:n.id,conId:p},i):(0,o.J2)(e.title,d,s,c)}else if("frame"===e){const{comId:e,frameId:o,pinHostId:s,val:c,sceneId:l,conId:a}=t;f&&f("frame","output",{comId:e,frameId:o,pinHostId:s,val:(0,r.Am)(c),sceneId:l||n.id,conId:a},i)}}function N(e,t){if(m)return;const{com:i,pinHostId:s,val:c,frameKey:l,finishPinParentKey:a,comDef:d,conId:p}=e;p&&(f?f("com","input",{id:i.id,pinHostId:s,val:(0,r.Am)(c),frameKey:l,finishPinParentKey:a,comDef:d,sceneId:n.id,conId:p},t):(0,o.Wg)(i.title,d,s,c))}function Z(e,t,n,o){var i,s;const c=I[e.comId+"-"+e.pinId];if(c){if(R[`${c.frameId}-${c.pinId}`]=n,o&&o.finishPinParentKey!==e.startPinParentKey)return;if("frame"===c.type){const o=J(e.comId,t);let i;i={id:(0,r.Vj)(10,16),frameId:c.frameId,parent:t,proxyComProps:o};const s="mybricks.core-comlib.frame-output"===e.def.namespace;s&&t&&(c.frameId=t.proxyComProps.id,i=t.parent);if("mybricks.core-comlib.fn"===e.def.namespace){const{configs:e}=o.data;e&&Object.entries(e).forEach((([e,t])=>{const{frameId:n,comId:o,pinId:r}=c,s=b[(o?`${o}-${n}`:`${n}`)+"-"+e];s&&B({logProps:null,cons:s,val:t,curScope:i})}))}return H({options:c,value:n,scope:i,comProps:o}),void(s||z({frameId:c.frameId,scope:i}))}}if("com"===e.type)o?o.finishPinParentKey===e.startPinParentKey&&q(e,n,t):q(e,n,t);else{if("frame"!==e.type)throw new Error("尚未实现");if(o&&o.finishPinParentKey!==e.startPinParentKey)return;if(e.comId){if("inner-input"===e.direction){const o=k[e.frameKey+"-"+e.pinId]||k[e.comId+"-"+e.frameId+"-"+((null===(i=null==t?void 0:t.parent)||void 0===i?void 0:i.id)?t.parent.id+"-":"")+e.pinId];o&&o(n)}else if("inner-output"===e.direction&&"joint"===e.pinType){const t=b[e.comId+"-"+e.frameId+"-"+e.pinId];t&&B({logProps:null,cons:t,val:n})}}else{const o=null==t?void 0:t.proxyComProps;if(o){const r=o.outputs[e.pinId];if(r)return void r(n,t.parent)}null===(s=O[e.pinId])||void 0===s||s.call(O,n)}}}function B({logProps:e,cons:t,val:n,curScope:o,fromCon:r,notifyAll:c,fromCom:l,isAutoRun:a}){u&&"module"!==w&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>i(this,void 0,void 0,(function*(){var i,d;const{comId:p,pinId:f,pinType:m,timerPinInputId:g,frameKey:y}=t,_=v[p];if(!(r&&r.finishPinParentKey!==t.startPinParentKey||u&&t.isIgnored)){if(u&&"module"!==w&&(null===(i=h.debuggerPanel)||void 0===i?void 0:i.hasBreakpoint(t))){let n=!0;yield null===(d=h.debuggerPanel)||void 0===d?void 0:d.wait(t,(()=>{n=!1,e&&(e[1].conId=t.id,e&&F(...e,!0))})),n&&e&&(e[1].conId=t.id,e&&F(...e))}else e&&F(...e);if("timer"===m)L({value:n,curScope:o,inReg:t,notifyAll:c,fromCon:r});else if(c){const e=t.frameKey;if(e===s||a)K({pinId:f,value:n,component:_,curScope:null,comId:p,val:n,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:c,fromCon:r});else{const[i,s]=e.split("-");if(M[e]){const n=M[e],o=n[l.id];o?o[t.id]=t:n[l.id]={[t.id]:t}}else{(M[e]={})[l.id]={[t.id]:t}}if(l.parentComId)K({pinId:f,value:n,component:_,curScope:o,comId:i,val:n,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:c,fromCon:r});else{const o=j[`${i}-${s}`];o&&Object.entries(o).forEach((([o,s])=>{"scope"===(null==s?void 0:s.type)?s.curScope?K({pinId:f,value:n,component:_,curScope:s.curScope,comId:i,val:n,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:c,fromCon:r}):s.pushTodo((o=>{K({pinId:f,value:n,component:_,curScope:o,comId:i,val:n,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:c,fromCon:r})})):K({pinId:f,value:n,component:_,curScope:s.curScope,comId:i,val:n,timerPinInputId:g,frameKey:e,inReg:t,notifyAll:c,fromCon:r})}))}}}else K({pinId:f,value:n,component:_,curScope:o,comId:p,val:n,timerPinInputId:g,frameKey:y,inReg:t,notifyAll:c,fromCon:r})}}))))}function L({pinId:e,value:t,curScope:n,inReg:o,notifyAll:r,fromCon:i}){let c=n;const l=e?Object.assign(Object.assign({},o),{pinId:e}):o;if(r){const e=l.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");Z(l,e===s?{}:n,t,i)}else{const e=l.frameKey.split("-");if(e.length>=2&&!c){const n=U(e[0],e[1],null,!1);"scope"===(null==n?void 0:n.type)?n.curScope?Z(l,n.curScope,t,i):n.pushTodo((e=>{Z(l,e,t,i)})):Z(l,c,t,i)}else Z(l,c,t,i)}}function K({pinId:e,value:t,component:n,curScope:o,comId:r,val:i,timerPinInputId:s,frameKey:c,inReg:l,notifyAll:a,fromCon:d}){const{isReady:p,isMultipleInput:u,pinId:f,value:m,cb:h}=function({pinId:e,value:t,component:n,curScope:o,comId:r,val:i}){const s=e.indexOf("."),c={pinId:e,value:t,isReady:!0,isMultipleInput:!1,cb:null};if(n&&-1!==s){const t=r+""+((null==o?void 0:o.id)?`-${o.id}`:""),{inputs:l}=n,a=e.substring(0,s);c.pinId=a;const d=e.substring(s+1);let p=A[t];p||(p=A[t]={}),p[d]=i;const u=new RegExp(`${a}.`),f=l.filter((e=>!!e.match(u)));Object.keys(p).length===f.length?(c.value=p,c.isMultipleInput=!0,c.cb=()=>{Reflect.deleteProperty(A,t)}):c.isReady=!1}return c}({pinId:e,value:t,component:n,curScope:o,comId:r,val:i});if(p){const e={pinId:u?f:null,value:m,curScope:o,inReg:l,notifyAll:a,fromCon:d};if(s){const t=s+"-"+c+((null==o?void 0:o.id)?`-${o.id}`:""),n=T[t];if(n){const{ready:o,todo:r}=n;if(o){let n=!1;Object.entries(r).forEach((([t,o])=>{t===f?(L(e),n=!0):o()})),n||L(e),null==h||h(),Reflect.deleteProperty(T,t)}else r[f]=()=>{null==h||h(),L(e)}}else T[t]={ready:!1,todo:{[f]:()=>{null==h||h(),L(e)}}}}else null==h||h(),L(e)}}function J(e,n){var o,r,i;const a=v[e];if(!a)return null;const f=e+(a.frameId||s);let m,h=j[f];h||(h=j[f]={});let y=n;for(!y&&a.parentComId&&a.frameId&&(y=null===(r=null===(o=j[`${a.parentComId}-${a.frameId}`])||void 0===o?void 0:o.slot)||void 0===r?void 0:r.curScope);y;){const t=y.id+"-"+e;if(y.frameId===a.frameId){m=y.id;const e=h[t];if(e)return e;{const e=y.parentComId;if(!e)break;if(e===a.paramId||e===a.parentComId)break}}y=y.parent}const _=(m?m+"-":"")+e,E=h[_];if(E)return E;const w=a.def,C=a.model,k=JSON.parse(JSON.stringify(C.data)),S=JSON.parse(JSON.stringify(C.style));S.__model_style__=!0;const O={},P={},A={},T={},M=function(e){return new Proxy({},{ownKeys:e=>a.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}O[n]=t;const r=P[n];r&&(r.forEach((({val:e,fromCon:n,fromScope:o})=>{t(e,new Proxy({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const r=L()[t];if("function"!=typeof r)throw new Error(`outputs.${t} not found`);r(e,o||y,n)}}))})),P[n]=void 0)}})},N=new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=x[e+"-"+o];if(r){const i={},s={};return r.forEach((e=>{i[e]=t=>{s[e]=t}})),Promise.resolve().then((()=>{q({comId:e,def:w,pinId:o},t,n,s)})),i}q({comId:e,def:w,pinId:o},t,n)}}),Z=new Proxy({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=I[e+"-"+n];o&&(null==g||g.inputs(Object.assign(Object.assign({},o),{value:t,parentScope:U})))}}),L=function(t){return new Proxy({},{ownKeys:e=>a.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(o,r,i){const s=function(o,i,s,d){if("[object Symbol]"===Object.prototype.toString.call(r))return;const p="boolean"==typeof i&&i;if(p){if(a.parentComId){const t=`${a.parentComId}-${a.frameId}`;D[t]?D[t][e]=!0:D[t]={[e]:!0}}if($[`${a.id}${(null==n?void 0:n.id)?`-${n.id}`:""}`]=o,a.global&&!d)return void(null==g||g.exeGlobalCom({com:a,value:o,pinId:r}))}const u=arguments,f=null==t?void 0:t.outputs;if(f){const e=f[r];"function"==typeof e&&e(o)}let m;i&&"object"==typeof i&&(m=i);const h=c(w);if(!h)return;const y=C.outputEvents;let v;if(y){const t=y[r];if(t&&Array.isArray(t)){const n=t.find((e=>e.active));if(n){const{type:t}=n;switch(t){case"none":v=[];break;case"fx":const i=I[e+"-"+r];if("frame"===(null==i?void 0:i.type)){const e=`${i.frameId}-${i.pinId}`;v=b[e]||[],R[e]=o}else v=[];break;case"defined":break;default:if(v=[],Array.isArray(null==l?void 0:l.events)){const e=l.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:n.options})}}}}}v=v||b[e+"-"+r],(null==v?void 0:v.length)?B(u.length>=3&&void 0===d?{logProps:["com",{com:a,pinHostId:r,val:o,fromCon:s,notifyAll:p,comDef:h}],cons:v,val:o,curScope:m,fromCon:s,fromCom:a}:{logProps:["com",{com:a,pinHostId:r,val:o,fromCon:s,notifyAll:p,comDef:h}],cons:v,val:o,curScope:m||n,fromCon:s,notifyAll:p,fromCom:a}):F("com",{com:a,pinHostId:r,val:o,fromCon:s,notifyAll:p,comDef:h})};return s.getConnections=()=>b[e+"-"+r]||[],s}})},K=new Proxy({},{get:(e,t,n)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;A[t]=e;const n=T[t];n&&(n.forEach((t=>{e(t)})),T[t]=void 0)}}),W=new Proxy({},{get:(t,o,r)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=b[e+"-"+o];r?B({logProps:["com",{com:a,pinHostId:o,val:t,comDef:w}],cons:r,val:t,curScope:n}):F("com",{com:a,pinHostId:o,val:t,comDef:w})}});const V=null===(i=w.rtType)||void 0===i?void 0:i.match(/^js/gi),U={id:a.id,title:a.title,frameId:a.frameId,parentComId:a.parentComId,data:V?k:t(k),style:V?S:t(S),_inputRegs:O,addInputTodo:(e,t,n,o)=>{let r=P[e];r||(P[e]=r=[]),r.push({val:t,fromCon:n,fromScope:o})},inputs:M(),inputsCallable:N,_inputsCallable:Z,outputs:L(),_inputs:K,_outputs:W,clone(e){const t={inputs:M(e),outputs:L(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(a.global)return void(null==g||g._notifyBindings(e,a));const{bindingsTo:t}=a.model;if(t)for(let n in t){const o=J(n);if(o){const r=t[n];Array.isArray(r)&&r.forEach((t=>{let n=o;const r=t.split(".");r.forEach(((t,o)=>{o!==r.length-1?n=n[t]:n[t]=e}))}))}}},logger:p,onError:u?t=>d({comId:e,error:t}):d};return h[_]=U,U}function W(e,t){let n=R[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===n&&(null==t?void 0:t.parent)&&(n=W(e,t.parent)),(0,r.bV)(n)}function q(e,t,o,r){var i;const{comId:l,def:a,pinId:f,pinType:m,frameKey:h,finishPinParentKey:y,timerPinInputId:_,targetFrameKey:I}=e;if("ext"===m){const n=j[l]||J(l,o);if("show"===f)n.style.display="";else if("hide"===f)n.style.display="none";else if("showOrHide"===f){const e=n.style;void 0===t?"none"===e.display?e.display="":e.display="none":e.display=t?"":"none"}const r=c(a);if(!r)return;N({com:n,val:t,pinHostId:f,frameKey:h,finishPinParentKey:y,comDef:r,conId:e.id})}else if("config"===m){const n=J(l,o),r=c(a);if(!r)return;N({com:n,pinHostId:f,val:t,frameKey:h,finishPinParentKey:y,comDef:r,conId:e.id});const{extBinding:i}=e,s=i.split(".");let d=n;s.forEach(((e,n)=>{n!==s.length-1?d=d[e]:d[e]=t}))}else if("timer"===m){const n=J(l,o),r=c(a);if(!r)return;N({com:n,pinHostId:f,val:t,frameKey:h,finishPinParentKey:y,comDef:r,conId:e.id});const i=_+"-"+h+((null==o?void 0:o.id)?`-${o.id}`:""),s=T[i];if(s){const{todo:e}=s;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(T,i)}else T[i]={ready:!0,todo:{}}}else if(null===(i=a.rtType)||void 0===i?void 0:i.match(/^js/gi)){const r=v[l];if(r){const i=J(l,o),m=c(a);if(!m)return;if(r.global){const e=null==g?void 0:g.getGlobalComProps(l);e&&(i.data=e.data)}const v=null==o?void 0:o.id,_=(v?v+"-":"")+l;r.inputs.find((e=>e===f))?N({com:r,val:t,pinHostId:f,frameKey:h,finishPinParentKey:y,comDef:m,conId:e.id}):Object.entries(t).forEach((([t,n])=>{N({com:r,val:n,pinHostId:`${f}.${t}`,frameKey:h,finishPinParentKey:y,comDef:m,conId:e.id})})),S[_]||(S[_]=!0,m.runtime({env:C,data:i.data,inputs:i.inputs,outputs:i.outputs,_notifyBindings:i._notifyBindings,_inputsCallable:i._inputsCallable,logger:p,onError:u?e=>d({comId:l,error:e}):d}));const b=i._inputRegs[f];"function"==typeof b&&b(t,new Proxy({},{get:(t,r)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(r)){if(E){const e=E[`${l}-${f}`];if(e){const r=`${e.frameId===n.id?s:I||h}-${e.pinId}`;void 0===(t=W(r,o))&&(t=W(r,null))}}i.outputs[r](t,o,e)}}}))}}else{const n=J(l,o);if(!n)return;const i=c(a);if(!i)return;N({com:n,pinHostId:f,val:t,frameKey:h,finishPinParentKey:y,comDef:i,conId:e.id});const s=n._inputRegs[f];if("function"==typeof s){let i;i=r||new Proxy({},{get:(t,r)=>function(t){"[object Symbol]"!==Object.prototype.toString.call(r)&&n.outputs[r](t,o,e)}}),s(t,i)}else n.addInputTodo(f,t,e,o)}if(y){const e=b[P[y]];e&&!x[`${l}-${f}`]&&B({logProps:null,cons:e,val:void 0})}}function V(e,t){let n;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return n=e,e;if(e.slots)for(let o in e.slots)if(n=V(e.slots[o],t),n)return n})),n}function U(e,t,n,o){const r=`${e}-${t}`;let i=j[r];i||(i=j[r]={});let s=n?n.id:"slot",c=i[s];if(o&&!c&&console.log("不应该再走到这儿了: ",{comId:e,slotId:t,scope:n,notifyAll:o}),!c){const o=V(y,e);if(!(null==o?void 0:o.slots))return null;const l=null==o?void 0:o.slots[t],a={};let d;if(n){const n=j[e+"-"+t];n&&(d=n.todo)}const p={scope:n,todo:d},u=new Proxy({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(a[t]=e)}}),f=new Proxy({},{get(n,o){const r=function(n,r){if("[object Symbol]"===Object.prototype.toString.call(o))return;const i=e+"-"+t+"-"+o,s=b[i];R[`${i}${r?`-${r.id}-${r.frameId}`:""}`]=n,s?B({logProps:["frame",{comId:e,frameId:t,pinHostId:o,val:n}],cons:s,val:n,curScope:r||p.scope}):F("frame",{comId:e,frameId:t,pinHostId:o,val:n})};return r.getConnections=()=>b[e+"-"+t+"-"+o]||[],r}}),m=new Proxy({},{get:(e,t,n)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(k[s+"-"+t]=e,k[r+"-"+t]=e)}});let h={};c=i[s]={type:null==l?void 0:l.type,run(n){let o=p.scope;n&&o!==n&&(p.scope=n,o=n);const r=(null==o?void 0:o.id)||"none";if(h[r]||(h[r]=!0,z({comId:e,frameId:t,scope:o})),Array.isArray(p.todo)&&(p.todo.forEach((e=>{Promise.resolve().then((()=>{e(o)}))})),p.todo=void 0),o&&"slot"!==s){const n=M[`${e}-${t}`];Promise.resolve().then((()=>{n&&Object.entries(n).forEach((([e,t])=>{if(!v[e].parentComId){const n=Object.entries(t).map((([e,t])=>t));n.length&&B({logProps:null,cons:n,val:$[e],curScope:o,notifyAll:!0,fromCom:v[e],isAutoRun:!0})}}))}))}},destroy(){if(n){const e=`${n.parentComId}-${n.frameId}`,t=D[e];t&&Object.keys(t).forEach((e=>{Reflect.deleteProperty($,`${e}-${n.id}`)}))}Reflect.deleteProperty(i,s)},_inputs:u,_inputRegs:a,inputs:f,outputs:m,get curScope(){return p.scope},setCurScope(e){p.scope=e},get todo(){return p.todo},pushTodo(e){p.todo||(p.todo=[]),p.todo.push(e)}}}return c}function z(e){const{comId:t,frameId:n,scope:o}=e,r=_[t?`${t}-${n}`:`${n}`];r&&r.forEach((e=>{const{id:t,def:n}=e;if(v[t]){const e=J(t,o),r=c(n);if(!r)return;r.runtime({env:C,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:p,onError:u?e=>d({comId:t,error:e}):d})}}))}function H({options:e,value:t,scope:o,log:r=!0,comProps:i}){const{frameId:c,comId:l,pinId:a,sceneId:d}=e,p=b[(l?`${l}-${c}`:`${c}`)+"-"+a];R[`${c}-${a}`]=t,p?B({logProps:["frame",{comId:l,frameId:c,pinHostId:a,val:t,sceneId:d}],cons:p,val:t,curScope:o}):(r&&F("frame",{comId:l,frameId:c,pinHostId:a,val:t,sceneId:d}),c!==s&&(n.id===c?O[a](t):null==g||g.open({frameId:c,todo:{pinId:a,value:t},comProps:i,parentScope:o.proxyComProps})))}const X={get({comId:e,slotId:t,scope:n,_ioProxy:o}){let r;if(o&&(o.inputs||o.outputs||o._inputs||o._outputs)&&(r=o),t)return U(e,t,n);{const t=J(e,n);return r?t.clone(r):t}},getComInfo:e=>v[e]};if("function"==typeof a){a({run(){z({frameId:s})},inputs:new Proxy({},{get:(e,t)=>function(e,n=void 0,o=!0){"[object Symbol]"!==Object.prototype.toString.call(t)&&H({options:{frameId:s,pinId:t,sceneId:n},value:e,scope:void 0,log:o})}}),outputs(e,t){O[e]=t},get:X.get,getComInfo:X.getComInfo})}return X}},358:(e,t,n)=>{"use strict";n.d(t,{J2:()=>s,JE:()=>r,Wg:()=>i});let o=!1;function r(){o=!0}function i(e,t,n,r){if(o)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输入项 %c ${e||t.title||t.namespace} | ${n} -> ${i}`,"color:#FFF;background:#000","","")}function s(e,t,n,r){if(o)return;let i;try{i=JSON.stringify(r)}catch(e){i=r}console.log(`%c [MyBricks] 输出项 %c ${e||t.title||t.namespace} | ${n} -> ${i}`,"color:#FFF;background:#fa6400","","")}},599:(e,t,n)=>{"use strict";function o(e){return e&&"object"==typeof e}function r(e){return"number"==typeof e&&!isNaN(e)}function i(e,t){const n=e.split("."),o=t.split("."),r=n.length,i=o.length,s=Math.min(r,i);let c=0;for(;c<s;c++){let e=parseInt(n[c]),t=parseInt(o[c]);if(e>t)return 1;if(e<t)return-1}if(r>i){for(let e=c;e<r;e++)if(0!=parseInt(n[e]))return 1;return 0}if(r<i){for(let e=c;e<i;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function s(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let r=0;r<e;r++)o[r]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}n.d(t,{Am:()=>m,Kn:()=>o,Lc:()=>c,Ok:()=>f,Q1:()=>u,Vj:()=>s,bV:()=>y,hj:()=>r,o4:()=>g,yC:()=>i});const l=function(e,t,n,o){return function(r,i){var s,c,l,a,d=parseFloat(i);return!i||d<=t?r:"".concat((s=d/e,c=n,l=Math.pow(10,c+1),a=Math.floor(s*l),10*Math.round(a/10)/l)).concat(o)}},a=l(12,0,5,"rem"),d=l(3.75,0,5,"vw"),p=/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g,u=e=>e.replace(p,a),f=e=>e.replace(p,d);function m(e){return e}let h;function g(){var e;return h||(h=(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot)||document.head)}function y(e){if(e&&"object"==typeof e)try{return e instanceof FormData?e:JSON.parse(JSON.stringify(e))}catch(t){return e}return e}},987:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var o=n(359),r=n.n(o),i=n(878);const s=n(490).Z.locals;class c extends r().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o;console.error(e,t),i.Z.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(o=null==t?void 0:t.toString)||void 0===o?void 0:o.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:i}=this.props;return e?r().createElement("div",{className:s.error},r().createElement("div",null,i||"渲染错误"),r().createElement("div",null,t||n)):o}}},576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var o=n(359),r=n.n(o),i=n(130),s=n(901),c=n(606),l=n(878),a=n(987);function d({json:e,options:t,style:n={},className:d="",root:p=!0,from:u}){const f=(0,i.useMyBricksRenderContext)(),{env:m,onError:h,logger:g,slot:y,getComDef:v}=(0,o.useMemo)((()=>{const{env:o,debug:r}=t;return r&&"scene"===u&&(n.minHeight=800),{env:o,onError:f.onError,logger:f.logger,getComDef:e=>f.getComDef(e),slot:e.slot,_context:f}}),[]),[_,b,x]=(0,o.useMemo)((()=>{var n;try{let n,o=!0;return[(0,s.Z)({json:e,getComDef:v,events:t.events,env:m,ref(e){n=e,"function"==typeof t.ref&&(t.ref(e),o=!1)},onError:h,debug:t.debug,debugLogger:t.debugLogger,logger:g,scenesOperate:t.scenesOperate,_isNestedRender:t._isNestedRender,_context:f},{observable:f.observable}),n,o]}catch(e){throw console.error(e),l.Z.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(x){const{inputs:n}=b,o=e.inputs;n&&Array.isArray(o)&&o.forEach((e=>{const{id:o,mockData:r}=e;let i;if(t.debug&&void 0!==r)try{i=JSON.parse(decodeURIComponent(r))}catch(e){i=r}n[o](i)}))}b.run()}}),[]),r().createElement(a.Z,{errorTip:"页面渲染错误"},r().createElement(c.Z,{env:m,style:n,_env:t._env,slot:y,getComDef:v,context:_,className:d,createPortal:t.createPortal||(()=>{}),onError:h,logger:g,root:p}))}},704:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(359),r=n.n(o),i=n(576),s=n(130),c=n(901),l=n(650),a=function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((o=o.apply(e,t||[])).next())}))};const d=l.Z.locals;function p({json:e,options:t}){const n=(0,s.useMyBricksRenderContext)(),[i,l]=(0,o.useState)(0),[p,m]=(0,o.useState)([]),[h,g]=(0,o.useState)([]),{scenesMap:y,scenesOperateInputsTodo:v,themes:_,permissions:b,globalVarMap:x}=(0,o.useMemo)((()=>{if(t.sceneId){const n=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==n){const t=e.scenes.splice(n,1);e.scenes.unshift(...t),"popup"===t[0].type&&m([t[0].id])}}const n=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||m([e.id]):n.push(e)})),g(n);const{modules:o,definedComs:r}=e;return t.env.getDefinedComJSON||(t.env.getDefinedComJSON=e=>r[e].json),t.env.getModuleJSON=e=>{var t;return null===(t=null==o?void 0:o[e])||void 0===t?void 0:t.json},{scenesMap:e.scenes.reduce(((e,t,n)=>{var o;return Object.assign(Object.assign({},e),{[t.id]:{show:0===n,todo:[],json:t,disableAutoRun:!!n,useEntryAnimation:!1,type:(null===(o=t.slot)||void 0===o?void 0:o.showType)||t.type}})}),{}),scenesOperateInputsTodo:{},themes:e.themes,permissions:e.permissions||[],globalVarMap:{}}}),[]);(0,o.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=n=>o=>(n(o),e.call(t,o))}else t.ref=e=>t=>{e(t)}}),[]);const{fxToJsonMap:I,currentFxFrameIdsMap:E}=(0,o.useMemo)((()=>{const t={},{global:n}=e;if(n){const{fxFrames:e}=n;Array.isArray(e)&&e.forEach((e=>{t[e.id]=e}))}return{fxToJsonMap:t,currentFxFrameIdsMap:{}}}),[]),w=(0,o.useCallback)((o=>{var r;const i=y[o],s=t.env.hasPermission,{env:d}=t;d.themes=_,d.permissions=b,"function"==typeof s&&Object.defineProperty(d,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=b.find((t=>t.id===e));return s({permission:t})}return s(e)}}}),d.canvas=Object.assign({id:o,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,n,o)=>a(this,void 0,void 0,(function*(){var n;let r=y[e];if(!r){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const o=yield t.scenesLoader({id:e});if(r={disableAutoRun:!1,json:o,show:!1,parentScope:null,todo:[],type:(null===(n=o.slot)||void 0===n?void 0:n.showType)||o.type,useEntryAnimation:!1},y[e]=r,"popup"===o.type||g((e=>[...e,o])),v[e]){const{parentScope:t,todo:n}=v[e];r.parentScope=t,n.forEach((({value:e,pinId:t,parentScope:n})=>{r.todo=r.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}o?Object.entries(y).forEach((([t,n])=>{t===e?(n.useEntryAnimation="blank"===o,n.show=!0,"popup"===n.type?m((t=>[...t,e])):l((e=>e+1))):(n.show=!1,n._refs=null,"popup"===n.type?m((e=>e.filter((e=>e!==n.json.id)))):l((e=>e+1)))})):r.show||(r.useEntryAnimation="blank"===o,r.show=!0,"popup"===r.type?m((t=>[...t,e])):l((e=>e+1)))}))},null===(r=t.env)||void 0===r?void 0:r.canvas);const p={open({todo:o,frameId:r,parentScope:i,comProps:s}){var a;const d=y[r];if(d)d.show||(d.show=!0,d.todo=d.todo.concat({type:"inputs",todo:o}),d.parentScope=i,"popup"===d.type?m((e=>[...e,r])):l((e=>e+1)));else{const l=I[r];if(l)if(E[i.id]){const{_refs:e}=E[i.id];E[i.id].parentScope=i;const t=null===(a=null==s?void 0:s.data)||void 0===a?void 0:a.configs;t&&Object.entries(t).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[o.pinId](o.value,void 0,!1),e.run()}else{E[i.id]={};const{id:r}=l,{env:a}=t,d={open({todo:o,frameId:r,parentScope:i,comProps:s}){var l;const a=I[r];if(a)if(E[i.id]){const{_refs:e}=E[i.id];E[i.id].parentScope=i;const t=null===(l=null==s?void 0:s.data)||void 0===l?void 0:l.configs;t&&Object.entries(t).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[o.pinId](o.value,void 0,!1),e.run()}else{E[i.id]={};const{env:r}=t,l={open({todo:e,frameId:t,parentScope:n,comProps:o}){var r;const i=E[n.id];if(null==i?void 0:i._refs){E[n.id].parentScope=n;const t=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.configs;t&&Object.entries(t).forEach((([e,t])=>{i._refs.inputs[e](t,void 0,!1)})),i._refs.inputs[e.pinId](e.value,void 0,!1),i._refs.run()}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=y[e];r?(r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):v[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in y){const r=y[o];if(r.json.coms[t])if(r._refs)f(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=y[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;x[o]=t,Object.keys(y).forEach((e=>{const r=y[e];if(r.show&&r._refs){const e=r._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}))}};(0,c.Z)({json:a,getComDef:e=>n.getComDef(e),events:t.events,env:r,ref(e){var t;E[i.id]._refs=e,E[i.id].parentScope=i;const{inputs:n,outputs:r}=e;a.outputs.forEach((e=>{r(e.id,(t=>{var n;null===(n=E[i.id].parentScope)||void 0===n||n.outputs[e.id](t)}))}));const c=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[o.pinId](o.value,void 0,!1),e.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:l,_context:n},{observable:n.observable})}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=y[e];r?(r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):v[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in y){const r=y[o];if(r.json.coms[t])if(r._refs)f(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=y[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;x[o]=t,Object.keys(y).forEach((e=>{const r=y[e];if(r.show&&r._refs){const e=r._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}))}};(0,c.Z)({json:l,getComDef:e=>n.getComDef(e),events:t.events,env:a,ref(e){var t;E[i.id]._refs=e,E[i.id].parentScope=i;const{inputs:n,outputs:r}=e;l.outputs.forEach((e=>{r(e.id,(t=>{var n;null===(n=E[i.id].parentScope)||void 0===n||n.outputs[e.id](t)}))}));const c=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[o.pinId](o.value,void 0,!1),e.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:d,_context:n},{observable:n.observable})}}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const r=y[e];r?(r.parentScope=t,r._refs?r._refs.inputs[o](n):r.todo=r.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):v[e]?v[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):v[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in y){const r=y[o];if(r.json.coms[t])if(r._refs)f(r._refs,t,n[t],e);else{const o=n[t];r.todo=r.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=y[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;x[o]=t,Object.keys(y).forEach((e=>{const r=y[e];if(r.show&&r._refs){const e=r._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}))}};return d.scenesOperate=p,Object.assign(Object.assign({},t),{env:d,get disableAutoRun(){return i.disableAutoRun},ref:t.ref((e=>{i._refs=e;const n=i.todo,{inputs:r,outputs:s}=e,c=i.disableAutoRun;i.json.outputs.forEach((e=>{s(e.id,(t=>{var n,o;"apply"===e.id?null===(n=i.parentScope)||void 0===n||n.outputs[e.id](t):(i.show=!1,i.todo=[],i._refs=null,null===(o=i.parentScope)||void 0===o||o.outputs[e.id](t),i.parentScope=null,"popup"===i.type?m((e=>e.filter((e=>e!==i.json.id)))):l((e=>e+1)))}))})),n.length?(n.forEach((({type:t,todo:n})=>{if("inputs"===t)Promise.resolve().then((()=>{r[n.pinId](n.value,o)}));else if("globalVar"===t){const{comId:t,value:o,bindings:r}=n;f(e,t,r,o)}})),i.todo=[]):c||(i.disableAutoRun=!0,Promise.resolve().then((()=>{var e,n;null===(n=null===(e=i.json.inputs)||void 0===e?void 0:e.forEach)||void 0===n||n.call(e,(e=>{const{id:n,mockData:o}=e;let i;if(t.debug&&void 0!==o)try{i=JSON.parse(decodeURIComponent(o))}catch(e){i=o}r[n](i)}))}))),c&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){i.show=!1,i.todo=[],i._refs=null,"popup"===i.type?m((e=>e.filter((e=>e!==i.json.id)))):l((e=>e+1))}}},scenesOperate:p})}),[]),C=(0,o.useMemo)((()=>h.length?h.map((e=>{const{id:t}=e,n=y[t];return n.show&&r().createElement(u,{key:t,json:Object.assign(Object.assign({},e),{scenesMap:y}),options:w(t),className:n.useEntryAnimation?d.main:"",style:"popup"===n.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{}})})):null),[i,h]),j=(0,o.useMemo)((()=>p.length?p.map((e=>{const t=y[e].json,{id:n}=t;return r().createElement(u,{key:t.id,json:Object.assign(Object.assign({},t),{scenesMap:y}),options:w(n),style:{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}})})):null),[p]);return(0,o.useEffect)((()=>{n.setPerformanceRender("end",(new Date).getTime())}),[]),r().createElement(r().Fragment,null,C,j)}function u({json:e,options:t,style:n={},className:o=""}){return r().createElement(i.Z,{json:e,options:t,style:n,className:o,from:"scene"})}function f(e,t,n,o){const r=e.get({comId:t});r&&Array.isArray(n)&&n.forEach((e=>{let t=r;const n=e.split(".");n.forEach(((e,r)=>{r!==n.length-1?t=t[e]:t[e]=o}))}))}},878:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var o=n(359),r=n.n(o),i=n(318),s=n.n(i);const c=n(759).Z.locals;let l=!1;var a;!function(e){e.Error="error"}(a||(a={}));const d="__fz-debug-info-container__";let p,u=document.getElementById(d),f=0;const m=({content:e,type:t})=>{const[n,i]=(0,o.useState)([]),s=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),i((t=>[...t,e]))},l=e=>{i((t=>t.filter((t=>t._nid!==e))))};return(0,o.useEffect)((()=>{p={add:s,remove:l},e&&p.add({content:e,type:t})}),[]),r().createElement("div",{className:c.container},n.map((e=>r().createElement("div",{key:e._nid,className:c.itemWrap},r().createElement("div",{className:`${c.item} ${c.errorItem}`},r().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>p.remove(e._nid)},r().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},h=["ResizeObserver loop limit exceeded"],g={init:e=>{l=!1!==e,l&&(window.onerror=function(e,t,n,o,r){if("string"!=typeof e||!h.includes(e))return!1})},error:e=>{var t;if(l){const n=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof n&&h.includes(n))return;((e,t)=>{let n={content:"",type:t};if("string"==typeof e)n.content=e;else try{n.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}n.content&&(u?null==p||p.add(n):(u=document.createElement("div"),u.setAttribute("id",d),document.body.appendChild(u),s().render(r().createElement(m,{content:n.content,type:n.type}),u)))})(n,a.Error)}}}},606:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var o=n(359),r=n.n(o),i=n(599),s=n(232),c=n(987),l=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const a=s.Z.locals;function d({com:e,index:t,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:p,_env:f,template:m,onError:h,logger:g,createPortal:y}){const{elements:v}=e;if(v)return r().createElement("div",{key:t,style:{display:"flex",width:e.width,height:e.height,marginLeft:e.marginLeft,marginTop:e.marginTop,flexDirection:e.flexDirection}},v.map((e=>d({com:e,index:t,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:p,_env:f,template:m,onError:h,logger:g,createPortal:y}))));return u({com:e,env:n,getComDef:o,context:i,scope:s,inputs:c,outputs:l,_inputs:a,_outputs:p,index:t,_env:f,template:m,onError:h,logger:g,createPortal:y}).jsx}function p({scope:e,root:t,slot:n,style:o={},createPortal:i,className:s,params:c,inputs:l,outputs:a,_inputs:p,_outputs:f,wrapper:m,template:y,env:v,_env:_,getComDef:b,context:x,onError:I,logger:E}){const{style:w,comAry:C,comAry2:j}=n;if("absolute-smart"===w.layout&&j){const n=null==c?void 0:c.style,u=n||w;return r().createElement("div",{"data-isslot":"1",className:`${g(u)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},h(u,!!n,t)),o)},j.map(((t,n)=>d({com:t,index:n,env:v,getComDef:b,context:x,scope:e,inputs:l,outputs:a,_inputs:p,_outputs:f,_env:_,template:y,onError:I,logger:E,createPortal:i}))))}const k=[];if(C.forEach(((t,n)=>{k.push(u({com:t,env:v,getComDef:b,context:x,scope:e,inputs:l,outputs:a,_inputs:p,_outputs:f,index:n,_env:_,template:y,onError:I,logger:E,createPortal:i}))})),"function"==typeof m)return m(k);{const e=null==c?void 0:c.style,n=e||w;return r().createElement("div",{"data-isslot":"1",className:`${g(n)}${t&&s?` ${s}`:""}`,style:Object.assign(Object.assign({},h(n,!!e,t)),o)},k.map((e=>e.jsx)))}}function u({com:e,env:t,getComDef:n,context:o,scope:i,inputs:s,outputs:c,_inputs:l,_outputs:d,index:p,_env:u,template:m,onError:h,logger:g,createPortal:y}){var v;const{id:_,def:b,name:x,children:I,brother:E}=e,w=o.getComInfo(_),{hasPermission:C}=t,j=null===(v=null==w?void 0:w.model)||void 0===v?void 0:v.permissions;if(j&&"function"==typeof C&&!C(j.id))return;if(n(b)){const v=o.get({comId:_,scope:i,_ioProxy:{inputs:s,outputs:c,_inputs:l,_outputs:d}});if(v){const s=(i?i.id:"")+p;let c=[],l=[];return{id:_,jsx:r().createElement(f,{key:s,com:e,getComDef:n,context:o,scope:i,props:v,env:t,_env:u,template:m,onError:h,logger:g,createPortal:y},c,l),name:x,inputs:v.inputsCallable,style:v.style}}return{id:_,jsx:r().createElement("div",{className:a.error},"未找到组件(",b.namespace,"@",b.version," - ",_,")定义."),name:x,style:{}}}return{id:_,jsx:r().createElement("div",{className:a.error},"未找到组件(",b.namespace,"@",b.version,")定义."),name:x,style:{}}}function f({com:e,props:t,scope:n,template:s,env:l,createPortal:d,_env:p,getComDef:u,context:f,onError:h,logger:g,children:v}){const{id:_,def:b,name:x,slots:I={}}=e,{data:E,title:w,style:C,inputs:j,outputs:k,_inputs:S,_outputs:O,_notifyBindings:P}=t;(0,o.useMemo)((()=>{const{pxToRem:e,pxToVw:t}=l,n=function({env:e,style:t,def:n}){var o;const r=null===(o=null==e?void 0:e.themes)||void 0===o?void 0:o.comThemes;if(!r)return t.styleAry;let i=t.styleAry;const{themesId:s}=t,{namespace:c}=n;if(s||i)if("_defined"===s);else{const e=r[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===s));t&&(i=t.styleAry)}}else{const e=r[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(i=t.styleAry)}}return i}({env:l,def:b,style:C});if(Array.isArray(n)){const o=(0,i.o4)();if(!o.querySelector(`style[id="${_}"]`)){const r=document.createElement("style");let i="";r.id=_,n.forEach((({css:n,selector:o,global:r})=>{":root"===o&&(o="> *:first-child"),Array.isArray(o)?o.forEach((o=>{i+=y({id:_,css:n,selector:o,global:r,configPxToRem:e,configPxToVw:t})})):i+=y({id:_,css:n,selector:o,global:r,configPxToRem:e,configPxToVw:t})})),r.innerHTML=i,o?o.appendChild(r):document.head.appendChild(r)}}Reflect.deleteProperty(C,"styleAry"),Reflect.deleteProperty(C,"themesId")}),[]);const A=u(b),T=new Proxy(I,{get(e,t){let o;n&&(o={id:n.id+"-"+n.frameId,frameId:t,parentComId:_,parent:n});const i=f.get({comId:_,slotId:t,scope:o});return{render(e){const s=I[t],c=null==e?void 0:e.scope;return c&&(o={id:c.id+"-"+c.frameId,frameId:t,parentComId:_,parent:c}),s?r().createElement(m,{key:null==e?void 0:e.key,props:i,currentScope:o,slotId:t,slot:s,params:e,style:C,onError:h,createPortal:d,parentComId:_,logger:g,env:l,_env:p,scope:n,getComDef:u,context:f}):r().createElement("div",{className:a.error},`组件(namespace=${b.namespace}）的插槽(id=${t})`," 未找到.")},get size(){var e,n;return!!(null===(n=null===(e=I[t])||void 0===e?void 0:e.comAry)||void 0===n?void 0:n.length)},_inputs:i._inputs,inputs:i.inputs,outputs:i.outputs}}}),R=(0,o.useMemo)((()=>{if(t.frameId&&t.parentComId){let e=(null==n?void 0:n.parentScope)||n;const o=f.get({comId:t.parentComId,slotId:t.frameId,scope:(null==e?void 0:e.parent)?e:null});if(o)return{get _inputs(){return new Proxy({},{get:(e,t)=>o._inputRegs[t]})}}}}),[]),M=function({style:e,id:t}){const n=[t,a.com];1===e.flex&&n.push(a.flex);return n.join(" ")}({style:C,id:_}),$=function({style:e}){const t={},{width:n,height:o,maxWidth:r}=e;n?(0,i.hj)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,i.hj)(o)?t.height=o+"px":o&&(t.height=o);r&&(t.maxWidth=r);return t}({style:C}),D=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:r,marginRight:s,marginBottom:c}=e;(0,i.hj)(o)&&(t.marginTop=o+"px");(0,i.hj)(r)&&("number"==typeof n||r<0?t.marginLeft=r+"px":t.paddingLeft=r+"px");(0,i.hj)(s)&&("number"==typeof n||s<0?t.marginRight=s+"px":t.paddingRight=s+"px");(0,i.hj)(c)&&(t.marginBottom=c+"px");return t}({style:C}),F={};if(["fixed","absolute"].includes(C.position)){const{top:e,left:t,right:n,bottom:o}=C;(e||(0,i.hj)(e))&&(F.top=(0,i.hj)(e)?e+"px":e),(o||(0,i.hj)(o))&&(F.bottom=(0,i.hj)(o)?o+"px":o),(t||(0,i.hj)(t))&&(F.left=(0,i.hj)(t)?t+"px":t),(n||(0,i.hj)(n))&&(F.right=(0,i.hj)(n)?n+"px":n),"fixed"===C.position?F.zIndex=1e3:"absolute"===C.position&&(F.zIndex=1)}let N=A.runtime({id:_,env:l,_env:p,data:E,name:x,title:w,style:C,inputs:j,outputs:k,_inputs:S,_outputs:O,_notifyBindings:P,slots:T,createPortal:d,parentSlot:R,onError:h,logger:g});return"function"==typeof s&&(N=s({id:_,jsx:N,name:x,scope:n})),N=N?r().createElement("div",{id:_,key:_,style:Object.assign(Object.assign(Object.assign(Object.assign({display:C.display,position:C.position||"relative"},F),$),D),C.ext||{}),className:M},r().createElement(c.Z,{errorTip:`组件 (namespace = ${b.namespace}@${b.version}）渲染错误`},N,v)):null,N}function m({slotId:e,parentComId:t,props:n,currentScope:s,slot:c,params:l,scope:a,env:d,createPortal:u,_env:f,style:m,getComDef:h,context:g,onError:y,logger:v}){const _=(0,o.useRef)(null),{curScope:b,curProps:x}=(0,o.useMemo)((()=>{let o=s,r=n,a=!1;if(o||"scope"===(null==c?void 0:c.type)&&(o={id:(0,i.Vj)(10,16),frameId:e,parentComId:t},a=!0),l){const n=l.inputValues;if("object"==typeof n){a||(o=Object.assign(Object.assign({},o),{id:o.id+"-"+(0,i.Vj)(10,16),parentScope:o})),r=g.get({comId:t,slotId:e,scope:o});for(let e in n)r.inputs[e](n[e],o)}}return r.run(o),{curScope:o,curProps:r}}),[]);(0,o.useEffect)((()=>{const e=null==l?void 0:l.inputValues;if(e)if(_.current){if("object"==typeof e&&JSON.stringify(_.current)!==JSON.stringify(e)){_.current=e;for(let t in e)x.inputs[t](e[t],b);x.run()}}else _.current=e}),[null==l?void 0:l.inputValues]),(0,o.useEffect)((()=>()=>{x.destroy()}),[]);return(0,o.useMemo)((()=>r().createElement(p,{scope:b,env:d,createPortal:u,_env:f,slot:c,params:l,wrapper:null==l?void 0:l.wrap,template:null==l?void 0:l.itemWrap,getComDef:h,context:g,inputs:null==l?void 0:l.inputs,outputs:null==l?void 0:l.outputs,_inputs:null==l?void 0:l._inputs,_outputs:null==l?void 0:l._outputs,onError:y,logger:v})),[])}function h(e,t,n){const{paddingLeft:o,paddingTop:r,paddingRight:i,paddingBottom:s,background:c,backgroundColor:a,backgroundImage:d,backgroundPosition:p,backgroundRepeat:u,backgroundSize:f}=e,m=l(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize"]);let h={paddingLeft:o||0,paddingTop:r||0,paddingRight:i||0,paddingBottom:s||0,backgroundColor:a||(n?"#ffffff":void 0),backgroundImage:d,backgroundPosition:p,backgroundRepeat:u,backgroundSize:f};if(c){if("object"==typeof c){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:r}=c;h.backgroundRepeat=o,h.backgroundSize=r,e?h.background=e:(h.backgroundImage=t,h.backgroundColor=n)}else h.background=c}return t&&(h=Object.assign(h,m)),h}function g(e){var t,n;const o=[a.slot,"slot"],r=e;if(r){"flex-column"==(null===(t=r.layout)||void 0===t?void 0:t.toLowerCase())?o.push(a.lyFlexColumn):"flex-row"==(null===(n=r.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(a.lyFlexRow);const e=r.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(a.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(a.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(a.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(a.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(a.justifyContentFlexSpaceBetween));const i=r.alignItems;i&&("FLEX-START"===i.toUpperCase()?o.push(a.alignItemsFlexStart):"CENTER"===i.toUpperCase()?o.push(a.alignItemsFlexCenter):"FLEX-END"===i.toUpperCase()&&o.push(a.alignItemsFlexFlexEnd))}return o.join(" ")}function y({id:e,css:t,selector:n,global:o,configPxToRem:r,configPxToVw:s}){return`\n    ${o?"":`#${e} `}${n.replace(/\{id\}/g,`${e}`)} {\n      ${Object.keys(t).map((e=>{let n=t[e];return r&&"string"==typeof n&&-1!==n.indexOf("px")?n=(0,i.Q1)(n):s&&"string"==typeof n&&-1!==n.indexOf("px")&&(n=(0,i.Ok)(n)),`${(0,i.Lc)(e)}: ${n};`})).join("\n")}\n    }\n  `}},130:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MyBricksRenderProvider:()=>w,hijackReactcreateElement:()=>a.O,observable:()=>a.L,render:()=>j,useMyBricksRenderContext:()=>C});var o=n(359),r=n.n(o),i=n(576),s=n(147),c=n(704),l=n(383),a=n(196),d=n(232),p=n(650),u=n(490),f=n(759),m=n(358),h=n(878),g=n(901),y=n(599),v=n(21),_=n.n(v),b=n(257);function x(e,t){e.use({target:t})}console.log(`%c ${s.u2} %c@${s.i8}`,"color:#FFF;background:#fa6400","","");class I{constructor(e){this.options=e,this.performance={render:{start:window.MYBRICKS_PC_FMP_START||(new Date).getTime(),end:null,time:null},callConnectorTimes:[]},this.onCompleteCallBacks=[],this.comDefs={},this.onError=e=>{console.error(e),h.Z.error(e)},this.observable=a.L;const{env:t,debug:n,observable:o,onError:r,plugins:i=[]}=e;this.mode=n?"development":"production",o?this.observable=o:(0,a.O)({pxToRem:t.pxToRem,pxToVw:t.pxToVw});const s=(0,y.o4)();x(d.Z,s),x(p.Z,s),x(u.Z,s),x(f.Z,s);const c=null==t?void 0:t.pxToRem;if(c){const{enableAdaptive:e=!1,landscapeWidth:t=1440}=c,n=document.documentElement;if(e){const e=()=>{n.style.fontSize=n.clientWidth/(t/12)+"px"};e(),window.addEventListener("resize",e)}else n.style.fontSize="12px"}const{onCompleteCallBacks:m}=this;if(t.runtime||(t.runtime={onComplete(e){m.push(e)}}),t.i18n||(t.i18n=e=>e),t.renderModule){const e=t.renderModule;t.renderModule=(n,o)=>e(n,Object.assign(Object.assign({},o),{env:t,_isNestedRender:!0}))}else t.renderModule=(e,n)=>j(e,Object.assign(Object.assign({},n),{env:t,_isNestedRender:!0}));if(t.renderCom){const e=t.renderCom;t.renderCom=(t,n)=>e(t,Object.assign(Object.assign({},n),{_isNestedRender:!0}))}else t.renderCom=(e,t)=>j(e,Object.assign(Object.assign({},t),{_isNestedRender:!0}));const g=document.body;t.canvas||(t.canvas={get type(){return g.clientWidth<=414?"mobile":"pc"}}),"canvasElement"in t||(t.canvasElement=g);const v=t.callConnector;"function"==typeof v&&(t.callConnector=(e,t,n)=>{const o=(new Date).getTime();let r=null;const i={basicInformation:{connector:e,params:t,connectorConfig:n},start:o,type:"success"};return new Promise(((s,c)=>{v(e,t,n).then((e=>{r=(new Date).getTime(),s(e)})).catch((e=>{r=(new Date).getTime(),i.type="error",c(e)})).finally((()=>{i.end=r,i.time=r-o,this.setPerformanceCallConnectorTimes(i)}))}))});window.RENDER_WEB_PERFORMANCE={getPerformance:this.getPerformance.bind(this)},this.initOther(),this.initComdefs();[new l.Z].concat(i).forEach((e=>{e.apply(this)}))}initOther(){const{env:e}=this.options;e.silent&&(0,m.JE)(),h.Z.init(e.showErrorNotification),this.logger={info:console.info,trace:console.trace,warn:console.warn,error:e=>{console.error(e),h.Z.error(e)}}}initComdefs(){const e=(t,n)=>{t.forEach((t=>{t.comAray?e(t.comAray,n):n[`${t.namespace}-${t.version}`]=t}))},{comDefs:t}=this.options,{comDefs:n}=this;t&&Object.assign(n,t);let o=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];o.push(_()),o.forEach((t=>{const o=t.comAray;o&&Array.isArray(o)&&e(o,n)}))}getComDef(e){const{comDefs:t}=this,n=t[e.namespace+"-"+e.version];if(!n){const n=[];for(let o in t)o.startsWith(e.namespace+"-")&&n.push(t[o]);if(n&&n.length>0){n.sort(((e,t)=>(0,y.yC)(e.version,t.version)));const t=n[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.error(`组件${e.namespace+"@"+e.version}未找到，请确定是否存在该组件以及对应的版本号.`),null}return n}getPerformance(){return this.performance}setPerformanceRender(e,t){const n=this.performance.render;n[e]=t,"end"===e&&(n.time=t-n.start)}setPerformanceCallConnectorTimes(e){this.performance.callConnectorTimes.push(e)}}const E=(0,o.createContext)({});function w({children:e,value:t}){return(0,o.useEffect)((()=>()=>{t.onCompleteCallBacks.forEach((e=>{e()}))}),[]),r().createElement(E.Provider,{value:t},e)}function C(){return(0,o.useContext)(E)}function j(e,t){if(e){let n=null;if("scenes"in e?((0,b.An)(e),n=r().createElement(c.Z,{json:e,options:t})):e.slot&&(n=r().createElement(i.Z,{json:e,options:t,root:"module"!==e.type})),!n){const n=new I(t);return(0,g.Z)({json:e,getComDef:e=>n.getComDef(e),events:t.events,env:t.env,ref(n){const{inputs:o}=n,r=e.inputs;o&&Array.isArray(r)&&r.forEach((e=>{const{id:n,mockData:r}=e;let i;if(t.debug&&void 0!==r)try{i=JSON.parse(decodeURIComponent(r))}catch(e){i=r}o[n](i)})),n.run()},onError:n.onError,debug:t.debug,debugLogger:t.debugLogger,logger:n.logger,scenesOperate:t.scenesOperate,_context:n},{observable:n.observable}),null}return t._isNestedRender?n:r().createElement(w,{value:new I(t)},n)}return null}},119:(e,t,n)=>{"use strict";n.d(t,{ep:()=>o.e,in:()=>s,kU:()=>i,st:()=>r.s});var o=n(965),r=n(60);const i=new WeakMap,s=new WeakMap},60:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var o=n(119);const r=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&o.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},965:(e,t,n)=>{"use strict";n.d(t,{e:()=>s});var o=n(599),r=n(119);function i(e){e()}const s=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,o.Kn)(e))return;const t=r.kU.get(e);r.kU.delete(e),r.in.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const o=this.taskMap.get(t);if(o){let t=o.get(n);t||(t=new Set,o.set(n,t)),t.has(e)||t.add(e);let r=this.reactionToTaskMap.get(e);r||(r=new Set,this.reactionToTaskMap.set(e,r)),r.has(o)||r.add(o)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(i)}}},787:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(196),r=n(599),i=n(119);const s={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t)||e.__model_style__&&"display"!==t)return n;if(i.st.regist({target:e,key:t}),n instanceof FormData)return n;const s=i.in.get(n);return(0,r.Kn)(n)?s||(0,o.L)(n):s||n},set:function(e,t,n){(0,r.Kn)(n)&&(n=i.kU.get(n)||n);const o=Object.hasOwnProperty.call(e,t),s=e[t];e[t]=n;let c=!1;switch(!0){case!o||Array.isArray(e)&&"length"===t:case n!==s:c=!0}return c&&(i.ep.runTask({target:e,key:t}),i.ep.deleteTask(i.in.get(s))),!0}}},196:(e,t,n)=>{"use strict";n.d(t,{L:()=>m,O:()=>d});var o=n(359),r=n.n(o),i=n(119),s=n(599),c=n(787);const l="__render-web-createElement__";let a;function d(e){const{pxToRem:t,pxToVw:n}=e;r()[l]||(r()[l]=!0,a=r().createElement,r().createElement=function(...e){let[o,i]=e;if(i){const c=i.style;if(t&&c?Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,s.Q1)(t))})):n&&c&&Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,s.Ok)(t))})),e.length>0&&"function"==typeof o){if(!o.prototype||!(o.prototype instanceof r().Component)&&void 0===o.prototype.isReactComponent){const t=u(o);e.splice(0,1,t)}return a(...e)}if("object"==typeof o&&o.$$typeof===Symbol.for("react.forward_ref")){const t=u(o,!0);return e.splice(0,1,t),a(...e)}return a(...e)}return a(...e)})}const p="__enhanced__";function u(e,t=!1){let n=e[p];if(!n){t?(n=(0,o.memo)(e),n.render=f(e.render,!1)):n=f(e);try{e[p]=n}catch(e){}}const r=Object.getOwnPropertyNames(e);return r&&r.forEach((o=>{try{t&&"render"===o||(n[o]=e[o])}catch(e){console.error(e)}})),n}function f(e,t=!0){function n(t,n){var r;const i=(0,o.useRef)(null),[,s]=(0,o.useState)([]);let c;return(0,o.useMemo)((()=>{i.current||(i.current=new h((()=>s([]))))}),[]),(0,o.useEffect)((()=>()=>{var e;null===(e=i.current)||void 0===e||e.destroy(),i.current=null}),[]),null===(r=i.current)||void 0===r||r.track((()=>{c=e(t,n)})),c}return n.displayName=e.displayName||e.name,t?(0,o.memo)(n):n}function m(e){return(0,s.Kn)(e)?i.kU.has(e)?e:i.in.get(e)||function(e){const t=c.Z,n=new Proxy(e,t);return i.in.set(e,n),i.kU.set(n,e),i.ep.addTask(e),n}(e):{}}class h{constructor(e){this.update=e}track(e){i.st.autoRun(this.update,e)}destroy(){i.ep.deleteReaction(this.update)}}},383:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var o=n(359),r=n.n(o),i=n(318),s=n.n(i),c=n(599),l=n(423);const a=l.Z.locals,d=r().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},r().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function p({resume:e}){return r().createElement("div",{className:a.debugger},r().createElement("div",{className:a.titlebar},r().createElement("div",null,"已在交互视图中暂停"),r().createElement("div",{className:a.resume,onClick:e},d)))}class u{constructor(){}apply(e){const{options:t,mode:n}=e,{env:o,debug:r,onError:i}=t;if("development"===n&&"function"==typeof r){const n=new f(o),{log:s,onResume:a}=r({resume:()=>{n.next()},ignoreAll:e=>{n.setIgnoreWait(e),e&&n.next(!0)}});n.setResume(a),e.debuggerPanel=n,t.debugLogger=s,e.onError=i,l.Z.use({target:(0,c.o4)()})}}}class f{constructor(e){this.env=e,this.isReact18=!!s().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={}}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=s().createRoot(e);t.render(r().createElement(p,{resume:this.resume})),this.root=t}else s().render(r().createElement(p,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():s().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((n=>{if(this._ignoreWait)n();else{const o=this._waitBreakpointIds.length>0;if(o||t(),this.open(),this._pending=!0,e.isBreakpoint){if(o){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const r=this._waitCount+++e.id;this._waitBreakpointIds.unshift(r),this._waitIdToResolvesMap[r]=[n]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(n)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},257:(e,t,n)=>{"use strict";function o(e){const{global:t,modules:n,scenes:o}=e;if(!o)return e;if(t){const{comsReg:e,consReg:i,pinRels:s,fxFrames:c,pinProxies:l}=t;e&&Object.keys(e).forEach((t=>{e[t].global=!0})),Array.isArray(c)&&c.forEach((t=>{e&&Object.assign(t.coms,e),i&&Object.assign(t.cons,i),s&&Object.assign(t.pinRels,s),l&&Object.assign(t.pinProxies,l)})),n&&Object.entries(n).forEach((([t,n])=>{const{json:o}=n;e&&Object.assign(o.coms,e),i&&Object.assign(o.cons,i),s&&Object.assign(o.pinRels,s),l&&Object.assign(o.pinProxies,l)}));const a=new r;o.forEach((t=>{a.transformSlotComAry(t.slot,t.coms),e&&Object.assign(t.coms,e),i&&Object.assign(t.cons,i),s&&Object.assign(t.pinRels,s),l&&Object.assign(t.pinProxies,l)}))}return e}n.d(t,{An:()=>o});class r{constructor(){this.comIdToSlotComMap={}}transformSlotComAry(e,t){const{comIdToSlotComMap:n}=this,{comAry:o}=e;if("absolute-smart"===e.style.layout){const r=o.sort(((e,n)=>{const{id:o,slots:r}=e,{id:i,slots:s}=n;r&&Object.entries(r).forEach((([e,n])=>{this.transformSlotComAry(n,t)})),s&&Object.entries(s).forEach((([e,n])=>{this.transformSlotComAry(n,t)}));const c=t[o].model.style,l=c.top,a=c.left,d=t[i].model.style,p=d.top,u=d.left;return l===p?a-u:l-p}));e.comAry2=this.traverseElementsToSlotComAry2(function(e,t){const n=new i(e,t),o=n.getElements();return console.log("traverseElements2结果: ",o),o}(r.map((e=>{const o=e.id,r=t[o],i=r.model.style,s=r.style;return n[o]=e,{id:o,width:s.width||0,height:s.height||0,top:i.top||0,left:i.left||0,children:[],brother:[]}})),{width:e.style.width}),t),console.log("comAry 结果: ",e.comAry2)}else o.forEach((e=>{const{slots:n}=e;n&&Object.entries(n).forEach((([e,n])=>{this.transformSlotComAry(n,t)}))}))}traverseElementsToSlotComAry(e,t,n){const{comIdToSlotComMap:o}=this,r=[];return e.forEach((e=>{const{id:i,type:s,items:c,children:l,brother:a,style:d}=e;if(s)Reflect.deleteProperty(d,"width"),r.push({type:s,style:d,items:this.traverseElementsToSlotComAry(c,t,s)});else{if("brother"===n){const n=t[i].model.style;n.position="absolute",n.top=e.top,n.left=e.left}else{t[i].model.style.position="relative"}r.push(Object.assign(Object.assign({},o[i]),{children:this.traverseElementsToSlotComAry(l,t,"children"),brother:this.traverseElementsToSlotComAry(a,t,"brother")}))}})),r}traverseElementsToSlotComAry2(e,t){const{comIdToSlotComMap:n}=this,o=[];return e.forEach((e=>{const{id:r,elements:i,marginLeft:s,marginTop:c,flexDirection:l,height:a,width:d}=e;if(Array.isArray(i))o.push(Object.assign(Object.assign({},e),{elements:this.traverseElementsToSlotComAry2(i,t)}));else{const e=t[r].model.style;e.position="relative",e.marginTop=c,e.marginLeft=s,o.push(n[r])}})),o}}class i{constructor(e,t){this.elements=e,this.config=t}getElements(){const{elements:e}=this,t=this.splitElements(this.handleIntersectionsAndInclusions(e));return this.handleEleGroup(t,{top:0,left:0})}handleEleGroup(e,{top:t,left:n}){const o=[];let r=t,i=n;if(1===e.length){const t=e[0],n=Object.assign(Object.assign({},t),{marginTop:t.top-r,marginLeft:t.left-i});Array.isArray(t.elements)&&(n.elements=this.handleEleGroup(t.elements,{top:n.marginTop,left:n.marginLeft})),o.push(n)}else{let r=t,i=n;e.forEach((e=>{const t=Object.assign({},e),n=e.parentFlexDirection;t.marginLeft=e.left-i,t.marginTop=e.top-r,Array.isArray(e.elements)&&(t.elements=this.handleEleGroup(e.elements,{top:r+t.marginTop,left:i+t.marginLeft})),"row"===n?i=e.left+e.width:"column"===n&&(r=e.top+e.height),o.push(t)}))}return o}handleIntersectionsAndInclusions(e){return e}checkRightIntersects(e){const t=e.length;if(t&&1!==t){e.sort(((e,t)=>e.left-t.left));const t=e[0],n=e[1];return t.left+t.width>n.left}return!1}checkBottomIntersects(e){const t=e.length;if(t&&1!==t){e.sort(((e,t)=>e.top-t.top));const t=e[0],n=e[1];return t.top+t.height>n.top}return!1}checkTopIntersects(e){const t=e.length;if(t&&1!==t){e.sort(((e,t)=>e.top+e.height-(t.top+t.height)));const t=e[0],n=e[1];return t.top+t.height>n.top}return!1}checkLeftIntersects(e){const t=e.length;if(t&&1!==t){e.sort(((e,t)=>t.left+t.width-(e.left+e.width)));const t=e[0],n=e[1];return n.left+n.width>t.left}return!1}handleAdjacent(e){const t={};return e.forEach((n=>{const o=[],r=[];for(let i=0;i<e.length;i++){const s=e[i];if(t[s.id]||(t[s.id]={topEles:[],leftEles:[],rightEles:[],bottomEles:[]}),n.id!==s.id){const e=s.left>=n.left+n.width&&s.top>=n.top+n.height;if(e||s.left+s.width<=n.left||s.top+s.height<=n.top);else if(s.top>=n.top+n.height){const{left:e,width:o}=s;if(r.length){r.some((({left:e,width:t})=>s.left>=e&&s.left<=e+t||s.left+s.width>=e&&s.left+s.width<=e+t||e>=s.left&&e<=s.left+s.width||e+t>=s.left&&e+t<=s.left+s.width))||(r.push(s),t[s.id].topEles.push(n))}else r.push(s),t[s.id].topEles.push(n)}else{const e=o.findIndex((({top:e,height:t})=>{const{top:n,height:o}=s;return n>=e&&n<e+t||n+o<=e+t&&n+o>e}));if(-1===e)o.push(s),t[s.id].leftEles.push(n);else{const r=o[e];if(s.left<r.left){o.splice(e,1,s),t[s.id].leftEles.push(n);const i=t[r.id].leftEles,c=i.findIndex((e=>e.id===n.id));-1!==c&&i.splice(c,1)}}}}}t[n.id].rightEles=o,t[n.id].bottomEles=r})),Object.entries(t).forEach((([e,t])=>{t.rightIntersect=this.checkRightIntersects(t.rightEles),t.bottomIntersect=this.checkBottomIntersects(t.bottomEles),t.topIntersect=this.checkTopIntersects(t.topEles),t.leftIntersect=this.checkLeftIntersects(t.leftEles)})),t}splitElements(e){const t=[],n={},o=this.handleAdjacent(e.sort(((e,t)=>e.top===t.top?e.left-t.left:e.top-t.top))),r={};Object.entries(o).forEach((([e,t])=>{r[e]=Object.assign(Object.assign({},t),{topEles:t.topEles.map((e=>e.id)),leftEles:t.leftEles.map((e=>e.id)),rightEles:t.rightEles.map((e=>e.id)),bottomEles:t.bottomEles.map((e=>e.id))})})),e.forEach((e=>{const r=e.id,i=o[r],s=n[r];if(i.rightIntersect||i.bottomIntersect){if(i.rightIntersect){i.bottomEles.reduce(((e,t)=>e&&e.top<t.top?e:t),null)}else if(i.bottomIntersect){const r=i.rightEles.reduce(((e,t)=>e&&e.left<t.left?e:t),null);if(r){const i=n[r.id],c=o[r.id];if(!s)if(i){const o=r.left-(e.left+e.width);"number"!=typeof i.space?c.leftIntersect&&(t.push([e]),n[e.id]={idx1:t.length-1,idx2:0}):o<=i.space&&(t[i.idx1].splice(i.idx2,1),t[i.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,r]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[r.id]={space:o,idx1:t.length-1,idx2:1})}else;}else s||(t.push([e]),n[e.id]={idx1:t.length-1,idx2:0})}}else if(i.rightIntersect&&i.bottomIntersect)console.log("两边都相交单独拆分");else{const r=i.rightEles.reduce(((e,t)=>e&&e.left<t.left?e:t),null),c=i.bottomEles.reduce(((e,t)=>e&&e.top<t.top?e:t),null);let l;if(r&&c)if(r.left-(e.left+e.width)<c.top-(e.top+e.height)){l=r;const i=o[l.id],c=n[l.id];if(s){if(!c){l.left-(e.left+e.width)<s.space||(t.push([l]),n[l.id]={idx1:t.length-1,idx2:0})}}else if(c)if(i.leftIntersect)if(c){const o=c.idx1,r=t[o];r.splice(c.idx2,1),t.push([l]),c.idx1=t.length-1,c.idx2=0;const i=r.findIndex((t=>t.top>=e.top+e.height));0===i?r.unshift(e):-1===i?r.push(e):r.splice(i-1,0,e),r.forEach(((e,t)=>{n[e.id].idx2=t}))}else;else{const o=l.left-(e.left+e.width);c.space?o<c.space&&(t[c.idx1].splice(c.idx2,1),t[c.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}):(t[c.idx1].splice(c.idx2,1),t[c.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1})}else{t.push([e,l]);const o=l.top-(e.top+e.height);-39===o&&(console.log("这里计算间距有问题"),console.log("fEle: ",l),console.log("ele: ",e)),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}}}else{l=c;const r=o[l.id],i=n[l.id];if(s){if(r.topIntersect)if(i){t[s.idx1].splice(s.idx2,1),t[s.idx1].forEach(((e,t)=>{n[e.id].idx2=t}));const o=i.idx1,r=t[o];r.splice(i.idx2,1),t.push([l]),i.idx1=t.length-1,i.idx2=0;const c=r.findIndex((t=>t.left>=e.left+e.width));0===c?r.unshift(e):r.splice(c-1,0,e),r.forEach(((e,t)=>{n[e.id].idx2=t}))}else;else if(!i){const o=l.top-(e.top+e.height);o<s.space&&(t[s.idx1].splice(s.idx2),t[s.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1})}}else if(i){if(r.topIntersect)if(i){const o=i.idx1,r=t[o];r.splice(i.idx2,1),t.push([l]),i.idx1=t.length-1,i.idx2=0;const s=r.findIndex((t=>t.left>=e.left+e.width));0===s?r.unshift(e):r.splice(s-1,0,e),r.forEach(((e,t)=>{n[e.id].idx2=t}))}else;}else{t.push([e,l]);const o=l.top-(e.top+e.height);n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}}}else if(r){l=r;const i=n[l.id],c=o[l.id];if(s)if(c.leftIntersect);else{const o=l.left-(e.left+e.width);if("number"==typeof s.space)o<s.space?i?(t[s.idx1].splice(s.idx2,1),t[s.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t[i.idx1].splice(i.idx2,1),t[i.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}):(t[s.idx1].splice(s.idx2,1),t[s.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}):i||(t.push([l]),n[l.id]={space:o,idx1:t.length-1,idx2:0});else if(!i){const e=s.idx1;t[e].push(l),s.space=o,n[l.id]={space:o,idx1:e,idx2:t[e].length-1}}}else if(i){const o=l.left-(e.left+e.width);if("number"!=typeof i.space)t[i.idx1].splice(i.idx2,1),t[i.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1};else if(c.leftIntersect)if(i){const o=i.idx1,r=t[o];r.splice(i.idx2,1),t.push([l]),i.idx1=t.length-1,i.idx2=0;const s=r.findIndex((t=>t.top>=e.top+e.height));0===s?r.unshift(e):-1===s?r.push(e):r.splice(s-1,0,e),r.forEach(((e,t)=>{n[e.id].idx2=t}))}else;else o<i.space&&(t[i.idx1].splice(i.idx2,1),t[i.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1})}else{t.push([e,l]);const o=l.left-(e.left+e.width);n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}}}else if(c){l=c;const r=n[l.id];o[l.id];if(s){const o=l.top-(e.top+e.height);if(o<s.space){if(!r)if("number"!=typeof s.space);else{const o=l.top-(e.top+e.height);o<s.space&&(t[s.idx1].splice(s.idx2),t[s.idx1].forEach(((e,t)=>{n[e.id].idx2=t})),t.push([e,l]),n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1})}}else r||(t.push([l]),n[l.id]={space:o,idx1:t.length-1,idx2:0})}else if(!r)if(i.leftIntersect)t.push([e]),n[e.id]={idx1:t.length-1,idx2:0},t.push([l]),n[l.id]={idx1:t.length-1,idx2:0};else{t.push([e,l]);const o=l.top-(e.top+e.height);n[e.id]={space:o,idx1:t.length-1,idx2:0},n[l.id]={space:o,idx1:t.length-1,idx2:1}}}else s||(t.push([e]),n[e.id]={idx1:t.length-1,idx2:0})}}));let i=this.convertedToElements(t);return 1===i.length?i:(t.length,e.length,this.splitElements(i))}convertedToElements(e){const t=[];return e.forEach((e=>{const n=e.length;if(n)if(1===n)t.push(e[0]);else if(n>1){let n,o,r,i,s,c=0,l=0;e.forEach((e=>{("number"!=typeof n||n>e.top)&&(n=e.top),("number"!=typeof o||o>e.left)&&(o=e.left),("number"!=typeof r||r<e.width+e.left)&&(r=e.width+e.left),("number"!=typeof i||i<e.height+e.top)&&(i=e.height+e.top),e.top>=l?s="column":e.left>=c&&(s="row"),c=e.left+e.width,l=e.top+e.height})),t.push({id:e.map((e=>e.id)).join(),top:n,left:o,width:r-o,height:i-n,flexDirection:s||"column",elements:e.map((e=>Object.assign(Object.assign({},e),{parentFlexDirection:s||"column"})))})}})),t}}},359:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__359__},318:e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE__318__},147:e=>{"use strict";e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.2.45-beta0"}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__(130);return __webpack_exports__})()));