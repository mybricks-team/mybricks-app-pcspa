"use strict";(self.webpackChunkmybricks=self.webpackChunkmybricks||[]).push([[452],{86487:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,'/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.inputPins-b0fa0,\n.outputPins-a90ca {\n  position: absolute;\n  top: 0px;\n}\n.inputPins-b0fa0 {\n  left: -9px;\n}\n.inputPins-b0fa0 .title-af245 {\n  color: red;\n}\n.outputPins-a90ca {\n  right: -8px;\n}\n.moving-e0eb5 {\n  z-index: 1000 !important;\n}\n.focus-def7f {\n  border-color: #FA6400 !important;\n  outline: 1px solid #FA6400;\n  outline-offset: -2px;\n}\n.focus-def7f .outputPins-a90ca > div {\n  border-color: #FA6400 !important;\n  background-color: #DDD;\n}\n.focus-def7f .outputPins-a90ca > div a {\n  visibility: hidden;\n}\n.mock-f9bcb {\n  border-color: #E02020 !important;\n  border-style: dashed !important;\n}\n.mock-f9bcb:before {\n  content: "Mock";\n  color: #FFF;\n  font-size: 12px;\n  font-weight: 500;\n  font-style: italic;\n  z-index: 1;\n  width: max-content;\n  height: 20px;\n  line-height: 20px;\n  padding: 0px 8px;\n  overflow: hidden;\n  position: absolute;\n  left: -4px;\n  bottom: calc(100% - 0px);\n  background: #E02020;\n  border-radius: 10px;\n  transform: scale(0.8);\n  opacity: 0.8;\n}\n.labelTodo-eea90 {\n  box-shadow: inset 0px 1px 10px 0px #9ACADD;\n}\n.labelTodo-eea90:before {\n  content: "Todo";\n  color: #FFF;\n  font-size: 12px;\n  font-weight: 500;\n  font-style: italic;\n  z-index: 1;\n  width: max-content;\n  height: 20px;\n  line-height: 20px;\n  padding: 0px 8px;\n  overflow: hidden;\n  position: absolute;\n  left: -4px;\n  bottom: calc(100% - 0px);\n  background: #03B6FC;\n  border-radius: 10px;\n  transform: scale(0.8);\n  opacity: 0.8;\n}\n.warn-f0470 {\n  border: 1px dashed #faad14;\n}\n.warn-f0470 .info-ac79b {\n  z-index: 100;\n  pointer-events: visible;\n  height: 22px;\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  width: max-content;\n  bottom: 100%;\n  left: 0;\n  border: 1px solid #AAA;\n  font-style: italic;\n  background-color: #faad14;\n}\n.warn-f0470 .info-ac79b > ul {\n  padding: 2px;\n}\n.warn-f0470 .info-ac79b > ul li {\n  margin: 0px 5px;\n}\n.warn-f0470 .info-ac79b > p {\n  background-color: #fff;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0px 5px;\n  font-weight: 500;\n}\n.error-baffd {\n  border: 1px dashed #f5222d;\n}\n.error-baffd .info-ac79b {\n  position: absolute;\n  width: max-content;\n  background-color: #ff0000;\n  color: #FFF;\n  padding: 0px 5px;\n  top: 0px;\n  left: 0;\n  font-style: italic;\n  font-weight: 500;\n  z-index: 1000;\n}\n',""]),a.locals={inputPins:"inputPins-b0fa0",outputPins:"outputPins-a90ca",title:"title-af245",moving:"moving-e0eb5",focus:"focus-def7f",mock:"mock-f9bcb",labelTodo:"labelTodo-eea90",warn:"warn-f0470",info:"info-ac79b",error:"error-baffd"};const l=a},76717:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.com-f603f {\n  border: 1px solid #999;\n  background-color: #fff;\n  display: flex;\n  cursor: pointer;\n  position: absolute;\n  user-select: none;\n  z-index: 1;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.com-f603f .comIcon-ae160 {\n  height: 25px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.com-f603f .comIcon-ae160 img {\n  max-width: 16px;\n}\n.com-f603f .title-cfee3 {\n  width: 120%;\n  text-align: center;\n  font-size: 12px;\n  line-height: 13px;\n  transform: scale(0.8) translateY(-10%);\n  word-break: break-all;\n  padding: 2px 3px 0px 3px;\n}\n",""]),a.locals={com:"com-f603f",comIcon:"comIcon-ae160",title:"title-cfee3"};const l=a},73949:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.sperV-dfda6 {\n  height: 5px;\n  width: 100%;\n  cursor: ns-resize;\n  z-index: 1000;\n}\n.sperV-dfda6:hover {\n  transition: 0.2s;\n  background: #616C81;\n}\n.sperV-dfda6:hover > div {\n  border-bottom-width: 0;\n}\n.sperV-dfda6 > div {\n  border-bottom: 1px solid #ccc;\n  width: 100%;\n  height: 1px;\n  margin-top: 3px;\n}\n.console-b91ac {\n  position: relative;\n  height: 100%;\n  font-size: 12px;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  z-index: 1000;\n  margin-top: -1px;\n}\n.console-b91ac .title-b8f11 {\n  padding-left: 16px;\n  color: #415058;\n  font-weight: bold;\n  height: 30px;\n  display: flex;\n  align-content: center;\n  align-items: center;\n  border-bottom: 1px solid #DDD;\n  background: #F5F5F5;\n}\n.console-b91ac .title-b8f11 .tt-a547d {\n  margin-right: 10px;\n}\n.console-b91ac .title-b8f11 .clearIcon-f92e9 {\n  margin-left: auto;\n  width: 14px;\n  margin-right: 10px;\n  cursor: pointer;\n  margin-top: 4px;\n}\n.console-b91ac .title-b8f11 .clearIcon-f92e9 svg {\n  max-width: 14px;\n}\n.console-b91ac .title-b8f11 .closeIcon-b4cec {\n  width: 18px;\n  height: 18px;\n  margin-right: 10px;\n  cursor: pointer;\n}\n.console-b91ac .logs-ad863 {\n  flex: 1;\n  overflow: auto;\n  user-select: text;\n}\n.console-b91ac .logs-ad863 > * {\n  min-width: 500px;\n}\n",""]),a.locals={sperV:"sperV-dfda6",console:"console-b91ac",title:"title-b8f11",tt:"tt-a547d",clearIcon:"clearIcon-f92e9",closeIcon:"closeIcon-b4cec",logs:"logs-ad863"};const l=a},57981:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,".filters-e9ace {\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  position: relative;\n}\n.filters-e9ace .icon-f28e9 {\n  cursor: pointer;\n  margin-left: 5px;\n  display: flex;\n  align-items: center;\n}\n.filters-e9ace .icon-f28e9 svg {\n  max-width: 12px;\n}\n.filters-e9ace .showAll-b7c86 {\n  display: flex;\n}\n.filters-e9ace .showAll-b7c86 > label {\n  color: #AAA;\n  cursor: pointer;\n}\n.filters-e9ace .selected-b1519 {\n  color: #e3a611;\n  display: flex;\n  font-style: italic;\n}\n.filters-e9ace .selected-b1519 > span {\n  font-weight: normal;\n}\n.filters-e9ace .selected-b1519 .selected-b1519 {\n  background: #EEE;\n}\n.filters-e9ace .popMenu-cceda {\n  background-color: #FFF;\n  position: absolute;\n  z-index: 10000;\n  left: 2px;\n  right: 10px;\n  top: 17px;\n  /* bottom: 0; */\n  border: 1px solid #CCC;\n  box-shadow: 0 1px 4px 2px rgba(39, 54, 78, 0.15);\n  font-weight: normal;\n}\n.filters-e9ace .popMenu-cceda .tt-eff05 {\n  padding: 5px 0 5px 15px;\n  color: #AAA;\n  font-style: italic;\n}\n.filters-e9ace .popMenu-cceda .body-ef528 {\n  max-height: 200px;\n  overflow: auto;\n  padding: 0 0 0 5px;\n}\n.filters-e9ace .popMenu-cceda .slotItem-c3d76 {\n  padding: 0 0 0 3px;\n}\n.filters-e9ace .popMenu-cceda .slotItem-c3d76 .slotTitle-d6f28 {\n  font-style: normal;\n  color: #AAA;\n  display: none;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e {\n  padding: 3px;\n  display: inline-flex;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .comTitle-f73b7 {\n  font-style: normal;\n  padding: 2px 5px;\n  border-radius: 3px;\n  display: flex;\n  align-items: center;\n  height: 25px;\n  cursor: pointer;\n  position: relative;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .comTitle-f73b7:hover {\n  background: #EEE;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .comTitle-f73b7 .icon-f28e9 {\n  position: absolute;\n  height: 25px;\n  margin-right: 3px;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .comTitle-f73b7 .icon-f28e9 img {\n  max-width: 12px;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .comTitle-f73b7 label {\n  margin-left: 20px;\n  cursor: pointer;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .slots-ae0ad {\n  position: relative;\n  padding-left: 20px;\n}\n.filters-e9ace .popMenu-cceda .comItem-e5d2e .slots-ae0ad:before {\n  content: '';\n  position: absolute;\n  left: 16px;\n  top: 0;\n  bottom: 12px;\n  width: 1px;\n  background: #CCC;\n}\n.filters-e9ace .popMenu-cceda .withFrames-dc120 {\n  display: flex;\n  flex-direction: column;\n}\n",""]),a.locals={filters:"filters-e9ace",icon:"icon-f28e9",showAll:"showAll-b7c86",selected:"selected-b1519",popMenu:"popMenu-cceda",tt:"tt-eff05",body:"body-ef528",slotItem:"slotItem-c3d76",slotTitle:"slotTitle-d6f28",comItem:"comItem-e5d2e",comTitle:"comTitle-f73b7",slots:"slots-ae0ad",withFrames:"withFrames-dc120"};const l=a},76416:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.view-cade9 {\n  display: flex;\n  flex-direction: row;\n  flex: 1;\n  overflow: hidden;\n}\n.diagramView-b9c90 {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  z-index: 0;\n  background: #F7F7F7;\n}\n.empty-d596a {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-style: italic;\n  color: #777;\n  pointer-events: none;\n}\n.hover-bdd26 {\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23), inset 0px 7px 50px 2px #ddd, inset 0px -12px 19px -19px #ddd;\n}\n.debug-a0b61 {\n  position: relative;\n}\n.selectZone-fa5cc {\n  position: absolute;\n  border: 1px dashed #ccc;\n  background-color: rgba(0, 0, 0, 0.05);\n}\n",""]),a.locals={view:"view-cade9",diagramView:"diagramView-b9c90",empty:"empty-d596a",hover:"hover-bdd26",debug:"debug-a0b61",selectZone:"selectZone-fa5cc"};const l=a},56793:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.jsComs-d9fde {\n  margin: 10px 0 10px -20px;\n  position: relative;\n  padding: 5px 20px 0 20px;\n}\n.jsComs-d9fde .title-c0530 {\n  font-weight: bold;\n}\n.jsComs-d9fde:not(:first-child) {\n  border-top: 1px solid #EEE;\n}\n.definedComs-c5863 {\n  margin: 0 0 10px -20px;\n  margin-top: -10px;\n  position: relative;\n  padding: 5px 20px 0 20px;\n}\n.definedComs-c5863 .title-c0530 {\n  font-weight: bold;\n}\n",""]),a.locals={jsComs:"jsComs-d9fde",title:"title-c0530",definedComs:"definedComs-c5863"};const l=a},29326:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.globalFxs-c9337 {\n  margin: 30px 20px 10px 0;\n  position: relative;\n}\n.globalFxs-c9337 .scopeTitle-a837b {\n  font-weight: bold;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 {\n  border-radius: 3px;\n  height: 28px;\n  padding: 0 5px 0 10px;\n  margin: 3px 10px 3px 2px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  position: relative;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167:hover {\n  background: #F3F3F3;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .title-edb34 {\n  font-size: 12px;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .title-edb34 .tip-cb330 {\n  font-weight: normal;\n  color: #999;\n  padding-left: 5px;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .pin-c1370 {\n  width: 10px;\n  height: 10px;\n  border-radius: 10px;\n  background-color: #999;\n  margin-right: 10px;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .icon-fe539 {\n  color: #ce5b21;\n  font-style: italic;\n  margin-right: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .icon-fe539 img {\n  max-width: 16px;\n  max-height: 16px;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .icon-fe539 svg {\n  max-width: 14px;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 .icon-fe539 svg path {\n  fill: #999;\n}\n.globalFxs-c9337 .catelog-ccecd .item-d6167 input {\n  position: absolute;\n  padding: 3px 5px;\n  background-color: #FFF;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  outline: none;\n  box-sizing: border-box;\n  border: 1px solid #FA6400;\n}\n",""]),a.locals={globalFxs:"globalFxs-c9337",scopeTitle:"scopeTitle-a837b",catelog:"catelog-ccecd",item:"item-d6167",title:"title-edb34",tip:"tip-cb330",pin:"pin-c1370",icon:"icon-fe539"};const l=a},5169:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.bg-d7da9 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  z-index: 10000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.bg-d7da9 .assist-c5012 {\n  position: absolute;\n  pointer-events: visible;\n  border-radius: 5px;\n  width: 900px;\n  background-color: #FFF;\n  box-shadow: 0 3px 10px #aaa;\n  font-size: 12px;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db {\n  user-select: none;\n  padding: 15px 25px 8px 20px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  cursor: move;\n  /* height: 40px; */\n  border-bottom: 1px solid #DDD;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db span {\n  font-size: 14px;\n  color: #333;\n  font-weight: bold;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db .s0-e446e,\n.bg-d7da9 .assist-c5012 .titleBar-cf7db .s1-f717e {\n  margin-right: 5px;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db .s2-f34bf {\n  flex: 1;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db input {\n  user-select: text;\n  font-size: 12px;\n  width: 200px;\n  text-align: right;\n  border: 1px solid #CCC;\n  border-radius: 4px;\n  padding: 3px 8px;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db input::placeholder {\n  color: #CCC;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db input::selection {\n  background: #FFF;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db input:active {\n  background: #FFF;\n}\n.bg-d7da9 .assist-c5012 .titleBar-cf7db input:focus {\n  outline: none;\n  border-color: #FA6400;\n}\n.bg-d7da9 .assist-c5012 .content-f6cb2 {\n  padding: 0 0 0 0;\n  display: flex;\n  height: 700px;\n}\n.bg-d7da9 .assist-c5012 .content-f6cb2 .comments-f6e78 {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #AAA;\n}\n.bg-d7da9 .assist-c5012 .others-ada6f {\n  padding: 5px;\n  color: #AAA;\n}\n",""]),a.locals={bg:"bg-d7da9",assist:"assist-c5012",titleBar:"titleBar-cf7db",s0:"s0-e446e",s1:"s1-f717e",s2:"s2-f34bf",content:"content-f6cb2",comments:"comments-f6e78",others:"others-ada6f"};const l=a},51354:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.scopes-ad89e .navs-d8543 {\n  flex-direction: row;\n  margin-top: 10px;\n}\n.scopes-ad89e .navs-d8543 span {\n  margin-right: 5px;\n  position: relative;\n  cursor: pointer;\n  color: #BBB;\n}\n.scopes-ad89e .navs-d8543 span:after {\n  content: '>';\n  margin-left: 5px;\n  color: #AAA;\n}\n.scopes-ad89e .navs-d8543 span:last-child:after {\n  content: '';\n}\n.scopes-ad89e .navs-d8543 .curNav-f5461 {\n  color: #FA6400;\n  font-weight: bold;\n  cursor: default;\n}\n.scopes-ad89e .frameScope-bccc8 {\n  margin: 10px 10px 10px 0;\n  position: relative;\n  width: fit-content;\n  min-width: calc(100% - 20px);\n}\n.scopes-ad89e .frameScope-bccc8 .scopeTitle-f625a {\n  font-weight: bold;\n}\n",""]),a.locals={scopes:"scopes-ad89e",navs:"navs-d8543",curNav:"curNav-f5461",frameScope:"frameScope-bccc8",scopeTitle:"scopeTitle-f625a"};const l=a},85335:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,".sperV-e96bc {\n  width: 5px;\n  height: 100%;\n  cursor: ew-resize;\n  margin-right: -2px;\n  margin-left: -2px;\n  z-index: 100;\n}\n.sperV-e96bc:hover {\n  transition: 0.2s;\n  background: #616C81;\n}\n.sperV-e96bc:hover > div {\n  border-left-width: 0;\n}\n.sperV-e96bc > div {\n  border-left: 1px solid #ddd;\n  height: 100%;\n  width: 1px;\n  margin-left: 2px;\n}\n",""]),a.locals={sperV:"sperV-e96bc"};const l=a},3459:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.nav-c092f {\n  user-select: none;\n  width: 260px;\n  height: 100%;\n  flex-direction: column;\n  overflow-y: auto;\n  overflow-x: auto;\n  background-color: #FAFAFA;\n  padding-left: 20px;\n}\n.nav-c092f .scope-f61e1 {\n  margin: 20px 10px 10px 0;\n  position: relative;\n  width: fit-content;\n  min-width: calc(100% - 20px);\n}\n.nav-c092f .scope-f61e1:first-child {\n  margin-top: 15px;\n}\n.nav-c092f .scope-f61e1:not(:first-child):before {\n  content: '';\n  position: absolute;\n  left: -20px;\n  right: -20px;\n  top: -10px;\n}\n.nav-c092f .scope-f61e1 .scopeTitle-d68ac {\n  font-weight: bold;\n}\n.nav-c092f .otherFrames-d00a2 {\n  margin-top: 15px;\n}\n.nav-c092f .otherFrames-d00a2:not(:first-child):before {\n  border-top: none !important;\n}\n.nav-c092f .globalVars-f1e5f .add-af752 {\n  position: absolute;\n  right: 10px;\n  top: -2px;\n  font-size: 18px;\n  font-weight: 300;\n  color: #AAA;\n  width: 20px;\n  height: 20px;\n  overflow: hidden;\n  text-align: center;\n  border-radius: 3px;\n  cursor: default;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.nav-c092f .globalVars-f1e5f .add-af752:hover {\n  background-color: #EEE;\n}\n.nav-c092f .catelog-b4840 {\n  margin: 8px 0 0 0;\n  padding: 5px 0 4px 10px;\n  border: 1px solid #F5F5F5;\n  border-radius: 5px;\n  background: #FFF;\n}\n.nav-c092f .catelog-b4840:empty {\n  padding: 0 !important;\n  border-width: 0;\n}\n.nav-c092f .catelog-b4840:first-of-type {\n  margin-top: 3px !important;\n}\n.nav-c092f .catelog-b4840 .cateTitle-c0299 {\n  color: #BBB;\n  margin-bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-right: 10px;\n}\n.nav-c092f .catelog-b4840 .cateTitle-c0299 .add-af752 {\n  font-size: 18px;\n  font-weight: 300;\n  color: #AAA;\n  width: 20px;\n  height: 20px;\n  overflow: hidden;\n  text-align: center;\n  border-radius: 3px;\n  cursor: default;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.nav-c092f .catelog-b4840 .cateTitle-c0299 .add-af752:hover {\n  background-color: #EEE;\n}\n.nav-c092f .catelog-b4840 .itemVar-b1d2c {\n  min-width: 120px;\n  max-height: fit-content;\n  border-radius: 5px;\n}\n.nav-c092f .catelog-b4840 .itemVar-b1d2c:hover {\n  background-color: #f1edfa;\n}\n.nav-c092f .catelog-b4840 .itemVar-b1d2c .icon-f43ec {\n  color: #9e78a8;\n}\n.nav-c092f .catelog-b4840 .itemVar-b1d2c .title-b1f6a {\n  flex: 1;\n  padding: 5px 5px 5px 0px;\n  line-height: 14px;\n  color: #666;\n}\n.nav-c092f .catelog-b4840 .itemFrameIn-df1ee {\n  border-radius: 5px;\n  min-width: 120px;\n}\n.nav-c092f .catelog-b4840 .itemJS-ebb74 {\n  padding-left: 5px;\n  color: #c5a349;\n  font-style: italic;\n}\n.nav-c092f .catelog-b4840 .itemJS-ebb74 .icon-f43ec svg path {\n  fill: #c5a349;\n}\n.nav-c092f .catelog-b4840 .itemDefined-ff204 {\n  padding-left: 5px;\n  color: #333;\n  font-style: italic;\n}\n.nav-c092f .catelog-b4840 .itemDefined-ff204 .icon-f43ec svg path {\n  fill: #555;\n}\n.nav-c092f .desc-db38d {\n  padding: 10px 0 0 0;\n  font-style: italic;\n  color: #999;\n}\n.slot-d5191 {\n  padding-left: 30px;\n}\n.slot-d5191 .slotTitle-d3b79 {\n  color: #DDD;\n  font-style: italic;\n}\n.slot-d5191 .slotBody-c6b9b {\n  position: relative;\n  padding-left: 10px;\n}\n.slot-d5191 .slotBody-c6b9b:before {\n  position: absolute;\n  left: 5px;\n  height: 100%;\n  content: '';\n  border-left: 1px solid #EEE;\n}\n.item-e949c {\n  border-radius: 3px;\n  height: 25px;\n  padding: 0 5px 0 10px;\n  margin: 2px 10px 2px 2px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  position: relative;\n}\n.item-e949c:hover {\n  background: #F3F3F3;\n}\n.item-e949c .title-b1f6a {\n  font-size: 12px;\n  white-space: nowrap;\n}\n.item-e949c .title-b1f6a .tip-c742c {\n  font-weight: normal;\n  color: #999;\n  padding-left: 5px;\n}\n.item-e949c .pin-aa353 {\n  width: 10px;\n  height: 10px;\n  border-radius: 10px;\n  border: 1px solid #999;\n  background-color: #999;\n  margin-right: 10px;\n}\n.item-e949c .icon-f43ec {\n  margin-right: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.item-e949c .icon-f43ec img {\n  max-width: 12px;\n  max-height: 12px;\n}\n.item-e949c .icon-f43ec svg {\n  max-width: 14px;\n}\n.item-e949c .icon-f43ec svg path {\n  fill: #999;\n}\n.item-e949c input {\n  position: absolute;\n  padding: 3px 5px;\n  background-color: #FFF;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  outline: none;\n  box-sizing: border-box;\n  border: 1px solid #FA6400;\n}\n.itemFx-c2949 .icon-f43ec {\n  color: #ce5b21;\n  font-style: italic;\n}\n.itemFocus-eeb48 {\n  outline: 1px solid #FA6400 !important;\n}\n.pins-f49b7 {\n  user-select: none;\n  flex: 1;\n  overflow: auto;\n}\n.pins-f49b7 .toolbar-efc92 {\n  padding: 10px 0 5px 20px;\n  color: #333;\n}\n.pins-f49b7 .toolbar-efc92 > span {\n  font-weight: bold;\n  margin-right: 10px;\n}\n.pins-f49b7 .content-fd038 {\n  padding: 0 5px 5px 5px;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 {\n  cursor: pointer;\n  margin: 8px 5px;\n  display: flex;\n  flex-direction: column;\n  border-radius: 5px;\n  padding: 5px 10px;\n  border: 1px solid #F3F3F3;\n  background: #FAFAFA;\n}\n.pins-f49b7 .content-fd038 .pin-aa353:hover {\n  background: #F3F3F3;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .main-e8c98 {\n  display: flex;\n  align-items: flex-start;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .main-e8c98 .typeInfo-c8ec0 {\n  height: 9px;\n  width: 9px;\n  margin-right: 6px;\n  margin-top: 4px;\n  border: 1px solid #aaa;\n  border-radius: 7px;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .main-e8c98 .pinTitle-ea017 {\n  color: #333;\n  flex: 1;\n  position: relative;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .main-e8c98 .pinType-f2685 {\n  margin-left: 20px;\n  color: #999;\n  text-align: right;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .desc-db38d {\n  color: #AAA;\n  font-style: italic;\n  padding-left: 13px;\n}\n.pins-f49b7 .content-fd038 .pin-aa353 .schema-bd13b {\n  padding-left: 10px;\n}\n.pins-f49b7 .content-fd038 .hadCon-b61c2 .pinTitle-ea017 {\n  color: #CCC !important;\n}\n.pins-f49b7 .content-fd038 .hadCon-b61c2 .pinTitle-ea017:after {\n  content: '  (已连接)';\n  font-style: italic;\n}\n.pins-f49b7 .content-fd038 .hadCon-b61c2:hover .pinTitle-ea017 {\n  color: #CCC !important;\n}\n.pins-f49b7 .content-fd038 .invalidType-a5d67 .pinTitle-ea017:after {\n  position: absolute;\n  right: 0;\n  content: '(类型不匹配)';\n  font-style: italic;\n  color: #CCC !important;\n}\n.coms-ef78b {\n  user-select: none;\n  flex: 1;\n  overflow: auto;\n}\n.coms-ef78b .toolbar-efc92 {\n  padding: 10px 0 5px 20px;\n  color: #777;\n}\n.coms-ef78b .content-fd038 {\n  padding: 0 10px 10px 10px;\n  display: flex;\n  flex-wrap: wrap;\n}\n.coms-ef78b .content-fd038 .lib-b53d6 {\n  width: 100%;\n  padding: 10px 0 2px 5px;\n  font-weight: bold;\n  /* color: #AAA; */\n  /* font-style: italic; */\n}\n.coms-ef78b .content-fd038 .lib-b53d6:not(:first-child) {\n  margin-top: 20px;\n  border-top: 1px solid #EEE;\n}\n.coms-ef78b .content-fd038 .com-ca249 {\n  width: 195px;\n  /* height: 55px; */\n  display: inline-flex;\n  flex-direction: row;\n  padding: 10px 10px 10px 10px;\n  border-radius: 5px;\n  margin: 3px 3px;\n  cursor: pointer;\n  position: relative;\n  border: 1px solid transparent;\n}\n.coms-ef78b .content-fd038 .com-ca249:hover {\n  background: rgba(225, 228, 231, 0.5);\n  border-color: #616C81;\n}\n.coms-ef78b .content-fd038 .com-ca249 .icon-f43ec {\n  width: 20px;\n  display: flex;\n  margin-right: 3px;\n}\n.coms-ef78b .content-fd038 .com-ca249 .icon-f43ec img {\n  max-width: 16px;\n  max-height: 16px;\n  margin-right: 3px;\n}\n.coms-ef78b .content-fd038 .com-ca249 .tt-c090e {\n  display: flex;\n  flex-direction: column;\n}\n.coms-ef78b .content-fd038 .com-ca249 .tt-c090e .title-b1f6a {\n  line-height: 12px;\n}\n.coms-ef78b .content-fd038 .com-ca249 .tt-c090e .desc-db38d {\n  margin-top: 5px;\n  color: #AAA;\n  line-height: 12px;\n}\n.coms-ef78b .content-fd038 .addDefined-a9d69 {\n  width: 195px;\n  /* height: 55px; */\n  display: inline-flex;\n  cursor: pointer;\n  font-size: 24px;\n  font-weight: 200;\n  height: 50px;\n  margin: 3px 3px;\n  padding-bottom: 4px;\n  align-items: center;\n  padding-left: 30px;\n  border: 1px dashed #DDD;\n  border-radius: 5px;\n}\n.coms-ef78b .content-fd038 .addDefined-a9d69:hover {\n  background: rgba(225, 228, 231, 0.5);\n  border-color: #616C81;\n}\n.coms-ef78b .content-fd038 .addDefined-a9d69 span {\n  font-size: 22px;\n  font-weight: 200;\n  margin-right: 5px;\n}\n.coms-ef78b .content-fd038 .addDefined-a9d69 label {\n  margin-top: 4px;\n  font-size: 12px;\n  font-weight: 200;\n  color: #888;\n}\n.coms-ef78b .content-fd038 .deprecated-fc236:after {\n  position: absolute;\n  content: '弃用';\n  right: 0;\n  top: 0;\n  background: #ed5858;\n  color: #FFF;\n  font-size: 9px;\n  font-style: italic;\n  padding: 0 4px 0 3px;\n  border-bottom-left-radius: 3px;\n}\n",""]),a.locals={nav:"nav-c092f",scope:"scope-f61e1",scopeTitle:"scopeTitle-d68ac",otherFrames:"otherFrames-d00a2",globalVars:"globalVars-f1e5f",add:"add-af752",catelog:"catelog-b4840",cateTitle:"cateTitle-c0299",itemVar:"itemVar-b1d2c",icon:"icon-f43ec",title:"title-b1f6a",itemFrameIn:"itemFrameIn-df1ee",itemJS:"itemJS-ebb74",itemDefined:"itemDefined-ff204",desc:"desc-db38d",slot:"slot-d5191",slotTitle:"slotTitle-d3b79",slotBody:"slotBody-c6b9b",item:"item-e949c",tip:"tip-c742c",pin:"pin-aa353",itemFx:"itemFx-c2949",itemFocus:"itemFocus-eeb48",pins:"pins-f49b7",toolbar:"toolbar-efc92",content:"content-fd038",main:"main-e8c98",typeInfo:"typeInfo-c8ec0",pinTitle:"pinTitle-ea017",pinType:"pinType-f2685",schema:"schema-bd13b",hadCon:"hadCon-b61c2",invalidType:"invalidType-a5d67",coms:"coms-ef78b",lib:"lib-b53d6",com:"com-ca249",tt:"tt-c090e",addDefined:"addDefined-a9d69",deprecated:"deprecated-fc236"};const l=a},4571:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.editPanel-cb0c1 {\n  padding: 3px 10px 2px 3px;\n}\n.editPanel-cb0c1 .edtItem-a3a83 {\n  display: flex;\n  min-height: 32px;\n  margin: 5px 0;\n}\n.editPanel-cb0c1 .edtItem-a3a83 > label {\n  color: #777;\n  width: 38px;\n  text-align: right;\n  margin-right: 5px;\n  margin-top: 5px;\n}\n.editPanel-cb0c1 .edtItem-a3a83 > div {\n  flex: 1;\n  display: flex;\n}\n.editPanel-cb0c1 .edtItem-a3a83 > div > * {\n  width: 100%;\n}\n.editPanel-cb0c1 .edtItem-a3a83 > div > input {\n  border: 1px solid #DDD;\n  border-radius: 3px;\n  height: 22px;\n  padding: 0 5px;\n}\n.empty-e9eef {\n  padding: 5px 10px;\n  color: #AAA;\n  font-style: italic;\n}\n",""]),a.locals={editPanel:"editPanel-cb0c1",edtItem:"edtItem-a3a83",empty:"empty-e9eef"};const l=a},78931:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.toolbar-be8a1 {\n  width: max-content;\n  font-weight: 700;\n  position: absolute;\n  transform: translateY(-42px);\n  z-index: 1000;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 36px;\n  padding: 0 20px;\n  background: #FAFAFA;\n  background: linear-gradient(#FFF, #F7F7F7);\n  border-radius: 3px;\n  border: 1px solid #DDD;\n  box-shadow: rgba(31, 35, 41, 0.08) 0 8px 12px 0;\n}\n.toolbar-be8a1 .info-ff721 {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 1px;\n}\n.toolbar-be8a1 .info-ff721 span {\n  padding: 0 5px;\n  opacity: 0.5;\n  font-style: italic;\n}\n.titleEditor-c55ca {\n  position: absolute;\n  background: #FFF;\n  z-index: 100;\n}\n.titleEditor-c55ca input {\n  border: 1px solid #DDD;\n  border-radius: 3px;\n  padding: 2px 5px;\n  font-weight: normal;\n}\n",""]),a.locals={toolbar:"toolbar-be8a1",info:"info-ff721",titleEditor:"titleEditor-c55ca"};const l=a},47487:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.toolbar-e1aac {\n  position: absolute;\n  z-index: 100;\n  top: 7px;\n  right: 0;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  pointer-events: none;\n}\n.toolbar-e1aac .icon-f4e99 {\n  width: 20px;\n  height: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid transparent;\n  border-radius: 2px;\n}\n.toolbar-e1aac .icon-f4e99:hover {\n  border: 1px solid #CCC;\n}\n.toolbar-e1aac .icon-f4e99 > * {\n  width: 16px;\n}\n.toolbar-e1aac .iconAnchor-fb5cf > * {\n  width: 14px;\n}\n.toolbar-e1aac .lyLeft-b7399,\n.toolbar-e1aac .lyCenter-da19f,\n.toolbar-e1aac .lyRight-a791e {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  pointer-events: auto;\n}\n.toolbar-e1aac .lyLeft-b7399 span,\n.toolbar-e1aac .lyCenter-da19f span,\n.toolbar-e1aac .lyRight-a791e span,\n.toolbar-e1aac .lyLeft-b7399 button,\n.toolbar-e1aac .lyCenter-da19f button,\n.toolbar-e1aac .lyRight-a791e button {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n.toolbar-e1aac .lyLeft-b7399 span:hover,\n.toolbar-e1aac .lyCenter-da19f span:hover,\n.toolbar-e1aac .lyRight-a791e span:hover,\n.toolbar-e1aac .lyLeft-b7399 button:hover,\n.toolbar-e1aac .lyCenter-da19f button:hover,\n.toolbar-e1aac .lyRight-a791e button:hover {\n  background: #DDD;\n}\n.toolbar-e1aac .lyLeft-b7399 .disableBtn-b80e8,\n.toolbar-e1aac .lyCenter-da19f .disableBtn-b80e8,\n.toolbar-e1aac .lyRight-a791e .disableBtn-b80e8 {\n  pointer-events: none;\n}\n.toolbar-e1aac .lyLeft-b7399 .disableBtn-b80e8 svg,\n.toolbar-e1aac .lyCenter-da19f .disableBtn-b80e8 svg,\n.toolbar-e1aac .lyRight-a791e .disableBtn-b80e8 svg {\n  opacity: 0.2 !important;\n}\n.toolbar-e1aac .lyLeft-b7399 .ableBtn-f57ef svg path,\n.toolbar-e1aac .lyCenter-da19f .ableBtn-f57ef svg path,\n.toolbar-e1aac .lyRight-a791e .ableBtn-f57ef svg path {\n  fill: #FA6400;\n}\n.toolbar-e1aac .lyLeft-b7399 .activeBtn-e3872,\n.toolbar-e1aac .lyCenter-da19f .activeBtn-e3872,\n.toolbar-e1aac .lyRight-a791e .activeBtn-e3872 {\n  background: #FA6400;\n}\n.toolbar-e1aac .lyLeft-b7399 .activeBtn-e3872:hover,\n.toolbar-e1aac .lyCenter-da19f .activeBtn-e3872:hover,\n.toolbar-e1aac .lyRight-a791e .activeBtn-e3872:hover {\n  background: #FA6400 !important;\n}\n.toolbar-e1aac .lyLeft-b7399 .activeBtn-e3872 svg path,\n.toolbar-e1aac .lyCenter-da19f .activeBtn-e3872 svg path,\n.toolbar-e1aac .lyRight-a791e .activeBtn-e3872 svg path {\n  fill: #FFF;\n}\n.toolbar-e1aac .lyCenter-da19f {\n  flex: 1;\n  justify-content: center;\n}\n.toolbar-e1aac .lyCenter-da19f > span {\n  width: 30px;\n  height: 23px;\n  background: #F7F7F7;\n  margin: 0 2px;\n  border-radius: 3px;\n}\n.toolbar-e1aac .lyCenter-da19f > span svg {\n  width: 12px;\n}\n.toolbar-e1aac .lyCenter-da19f > span svg path {\n  fill: #555;\n}\n.toolbar-e1aac .lyCenter-da19f .btn14-bdcbc svg {\n  width: 14px !important;\n}\n.toolbar-e1aac .lyLeft-b7399 {\n  pointer-events: auto;\n  height: 22px;\n  background: #F7F7F7;\n  border-radius: 3px;\n  justify-content: center;\n  width: 23px;\n  margin-left: 10px;\n}\n.toolbar-e1aac .lyLeft-b7399 label {\n  margin-bottom: -2px;\n  margin-right: 5px;\n  color: #999;\n}\n.toolbar-e1aac .lyLeft-b7399 .cardSelect-ca4f8 {\n  appearance: auto;\n  max-width: 120px;\n}\n.toolbar-e1aac .lyLeft-b7399 .icon-f4e99 {\n  margin: 0 7px;\n}\n.toolbar-e1aac .lyLeft-b7399 .icon-f4e99 svg {\n  max-width: 16px;\n}\n.toolbar-e1aac .lyRight-a791e {\n  /* padding-right: 5px; */\n  pointer-events: auto;\n  height: 22px;\n  background: #F7F7F7;\n  border-radius: 3px;\n  justify-content: center;\n  padding-left: 3px;\n  /* width: 83px; */\n  margin-right: 10px;\n}\n.toolbar-e1aac .home-f071c {\n  height: 20px;\n  width: 20px;\n  background: #F7F7F7;\n}\n.toolbar-e1aac .home-f071c svg {\n  max-width: 12px;\n}\n.toolbar-e1aac .home-f071c svg path {\n  fill: #777;\n}\n.toolbar-e1aac .zoomIn-b85ed,\n.toolbar-e1aac .zoomOut-f1280 {\n  margin: 0 2px;\n  border-radius: 3px;\n  width: 20px;\n  height: 20px;\n  font-size: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.toolbar-e1aac .zoomOut-f1280 {\n  margin-right: 5px;\n}\n.toolbar-e1aac .zoom-a1f6f {\n  background: #F7F7F7;\n  width: 40px;\n  text-align: center;\n  margin-bottom: -3px;\n  cursor: pointer;\n}\n.toolbar-e1aac .debug-ce18f {\n  height: 30px;\n  margin-right: 12px !important;\n}\n.toolbar-e1aac .debug-ce18f svg {\n  max-width: 13px;\n}\n.toolbar-e1aac .debug-ce18f svg path {\n  fill: #666;\n}\n",""]),a.locals={toolbar:"toolbar-e1aac",icon:"icon-f4e99",iconAnchor:"iconAnchor-fb5cf",lyLeft:"lyLeft-b7399",lyCenter:"lyCenter-da19f",lyRight:"lyRight-a791e",disableBtn:"disableBtn-b80e8",ableBtn:"ableBtn-f57ef",activeBtn:"activeBtn-e3872",btn14:"btn14-bdcbc",cardSelect:"cardSelect-ca4f8",home:"home-f071c",zoomIn:"zoomIn-b85ed",zoomOut:"zoomOut-f1280",zoom:"zoom-a1f6f",debug:"debug-ce18f"};const l=a},28934:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.rootItem-a1dfd:before {\n  border-left-width: 0 !important;\n}\n.rootItem-a1dfd > .itemTitle-bbd90:before {\n  border-bottom-width: 0 !important;\n}\n.frame-a2868 .content-f90f9 {\n  padding-left: 40px;\n  position: relative;\n}\n.frame-a2868 .content-f90f9:before {\n  position: absolute;\n  content: '';\n  height: 100%;\n  border-left: 1px solid #DDD;\n  left: 21px;\n}\n.frame-a2868 .com-bd31f {\n  position: relative;\n}\n.frame-a2868 .com-bd31f:hover > .tt-aff1c .iconFilter-ca397 {\n  display: block;\n}\n.frame-a2868 .com-bd31f .tt-aff1c {\n  display: flex;\n  align-items: center;\n  margin: 4px 0;\n  position: relative;\n  border-radius: 5px;\n  border: 1px solid transparent;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .icon-dcade {\n  margin-right: 2px;\n  height: 14px;\n  padding: 0;\n  display: flex;\n  opacity: 0.5;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .icon-dcade img {\n  max-width: 12px;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .title-d9ec5 {\n  color: #999;\n  font-size: 11px;\n  white-space: nowrap;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .iconFilter-ca397 {\n  cursor: pointer;\n  display: none;\n  margin-left: 10px;\n  margin-top: 2px;\n  height: 14px;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .iconFilter-ca397 svg {\n  max-width: 12px;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .iconFilter-ca397 svg path {\n  fill: #AAA;\n}\n.frame-a2868 .com-bd31f .tt-aff1c .iconFilter-ca397:hover svg path {\n  fill: #333;\n}\n.item-b1a23 {\n  position: relative;\n  height: 24px;\n  margin: 2px 5px;\n  padding: 0 10px 0 5px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-radius: 3px;\n  border: 1px solid transparent;\n  cursor: pointer;\n}\n.item-b1a23:hover {\n  background-color: #EEE;\n}\n.item-b1a23:hover .iconFilter-ca397 {\n  display: block;\n}\n.item-b1a23 .runIcon-f3202 {\n  display: none;\n}\n.item-b1a23 .itemTitle-bbd90 {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  height: 18px;\n}\n.item-b1a23 .titleSuffix-b9488 {\n  margin-left: 3px;\n  height: 18px;\n  font-style: italic;\n  color: #ba9106;\n  white-space: nowrap;\n}\n.item-b1a23 .error-f541e {\n  list-style: none;\n  width: fit-content;\n  height: fit-content;\n  margin-top: 3px;\n}\n.item-b1a23 .error-f541e svg {\n  margin: 0;\n  max-width: 20px;\n}\n.item-b1a23 .typeIcon-d6fc9 {\n  width: 16px;\n  height: 16px;\n  /* margin-top: 1px; */\n  margin-left: 4px;\n  display: flex;\n  align-items: center;\n  font-weight: bold;\n}\n.item-b1a23 .typeIcon-d6fc9 svg {\n  max-width: 13px;\n  margin-bottom: 1px;\n}\n.item-b1a23 .typeIcon-d6fc9 svg path {\n  fill: #AAA;\n}\n.item-b1a23 .breakpoint-d58cf {\n  margin-left: 5px;\n  font-size: 8px;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 12px;\n  height: 12px;\n  border-radius: 12px;\n  background-color: #FA6400;\n  padding-top: 1px;\n  color: rgba(255, 255, 255, 0.8);\n}\n.item-b1a23 .ignoreBP-dc059 {\n  background-color: #DDD;\n}\n.item-b1a23 .iconFilter-ca397 {\n  display: none;\n  margin-left: 10px;\n  height: 14px;\n}\n.item-b1a23 .iconFilter-ca397 svg {\n  max-width: 12px;\n}\n.item-b1a23 .iconFilter-ca397 svg path {\n  fill: #AAA;\n}\n.item-b1a23 .iconFilter-ca397:hover svg path {\n  fill: #333;\n}\n.highlight-bdf9b:before {\n  position: absolute;\n  content: ' ';\n  left: -12px;\n  top: 4px;\n  height: 0;\n  width: 0;\n  color: #FFF;\n  border-top: 5px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 7px solid transparent;\n  display: inline-block;\n  border-left-color: #FA6400;\n}\n.highlightVarFx-bcba7:before {\n  position: absolute;\n  content: ' ';\n  left: -4px;\n  top: 5px;\n  height: 0;\n  width: 0;\n  color: #FFF;\n  border-top: 5px solid transparent;\n  border-right: 7px solid transparent;\n  border-bottom: 5px solid transparent;\n  border-left: 7px solid transparent;\n  display: inline-block;\n  border-left-color: #FA6400;\n}\n.cur-fb177 {\n  background-color: #DDD !important;\n}\n.itemFrame-caf5a .itemTitle-bbd90 {\n  font-style: italic;\n}\n.itemVar-aa235 .typeIcon-d6fc9 {\n  color: #9e78a8;\n}\n.itemFx-cfb35 .typeIcon-d6fc9 {\n  color: #ce5b21;\n}\n.errorCard-f03d6 {\n  position: relative;\n}\n.errorCard-f03d6:before {\n  content: '';\n  position: absolute;\n  bottom: -0.13em;\n  width: 100%;\n  height: 0.25em;\n  background: linear-gradient(135deg, transparent, transparent 45%, #FF0000, transparent 55%, transparent 100%), linear-gradient(45deg, transparent, transparent 45%, #FF0000, transparent 55%, transparent 100%);\n  background-size: 0.5em 0.5em;\n  background-repeat: repeat-x, repeat-x;\n  left: 0;\n}\n.running-a1204 .typeIcon-d6fc9 {\n  display: none;\n}\n.running-a1204 .runIcon-f3202 {\n  margin-left: 5px;\n  list-style: none;\n  width: 16px;\n  height: 12px;\n  /* padding: 0; */\n  display: flex;\n  align-items: center;\n}\n.running-a1204 .runIcon-f3202 svg {\n  animation: rot-f4345 2s linear infinite;\n  max-width: 12px;\n}\n.running-a1204 .runIcon-f3202 svg path {\n  fill: #FA6400;\n}\n.running-a1204 .itemTitle-bbd90 {\n  color: #FA6400;\n}\n@keyframes rot-f4345 {\n  0% {\n    transform: rotate(0deg);\n  }\n  25% {\n    transform: rotate(90deg);\n  }\n  50% {\n    transform: rotate(180deg);\n  }\n  75% {\n    transform: rotate(270deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.empty-b61aa {\n  display: inline-flex;\n}\n.empty-b61aa .toolbar-a0b9a .tt-aff1c {\n  font-style: italic;\n  color: #CCC;\n}\n.empty-b61aa:hover .toolbar-a0b9a .tt-aff1c {\n  color: #333;\n}\n",""]),a.locals={rootItem:"rootItem-a1dfd",itemTitle:"itemTitle-bbd90",frame:"frame-a2868",content:"content-f90f9",com:"com-bd31f",tt:"tt-aff1c",iconFilter:"iconFilter-ca397",icon:"icon-dcade",title:"title-d9ec5",item:"item-b1a23",runIcon:"runIcon-f3202",titleSuffix:"titleSuffix-b9488",error:"error-f541e",typeIcon:"typeIcon-d6fc9",breakpoint:"breakpoint-d58cf",ignoreBP:"ignoreBP-dc059",highlight:"highlight-bdf9b",highlightVarFx:"highlightVarFx-bcba7",cur:"cur-fb177",itemFrame:"itemFrame-caf5a",itemVar:"itemVar-aa235",itemFx:"itemFx-cfb35",errorCard:"errorCard-f03d6",running:"running-a1204",rot:"rot-f4345",empty:"empty-b61aa",toolbar:"toolbar-a0b9a"};const l=a},78256:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.empty-df585 {\n  display: inline-flex !important;\n}\n.empty-df585 .toolbar-bf501 .tt-a59df {\n  font-style: italic !important;\n  color: #CCC !important;\n}\n.empty-df585:hover .toolbar-bf501 .tt-a59df {\n  color: #333 !important;\n}\n.toolbar-bf501 {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 5px 10px 5px 15px;\n  height: 18px;\n  margin: 10px 0 5px 0;\n}\n.toolbar-bf501 .tt-a59df {\n  color: #777;\n  font-size: 11px;\n}\n.toolbar-bf501 .add-c7dc2 {\n  padding-left: 5px;\n  margin-left: 5px;\n  font-size: 16px;\n  padding-bottom: 1px;\n  font-weight: 200;\n  cursor: pointer;\n  visibility: hidden;\n}\n.catelog-f7cd9 {\n  display: flex;\n  flex-direction: column;\n  padding-left: 0px;\n}\n.catelog-f7cd9:hover .toolbar-bf501 .add-c7dc2 {\n  visibility: visible;\n}\n.normalMode-ca1af .catelog-f7cd9 {\n  padding-left: 10px;\n}\n.body0-d8450 {\n  margin: 0px 10px 0 0;\n}\n.bg-bd80b {\n  position: absolute;\n  background: transparent;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.bg-bd80b .popMenu-b7ccd {\n  border: 1px solid #DDD;\n  position: absolute;\n  background-color: #FFF;\n  left: 45px;\n  top: 25px;\n  min-width: 200px;\n  max-height: 400px;\n  z-index: 10000;\n  padding: 3px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  box-shadow: 0 2px 8px 2px rgba(39, 54, 78, 0.15);\n}\n.bg-bd80b .popMenu-b7ccd .menuItem-a97a6 {\n  min-width: 200px;\n  cursor: pointer;\n  padding: 8px 15px;\n  /* margin: 3px 2px; */\n  white-space: nowrap;\n}\n.bg-bd80b .popMenu-b7ccd .menuItem-a97a6:hover {\n  background-color: #F7F7F7;\n}\n.bg-bd80b .popMenu-b7ccd .notFound-cd6d1 {\n  min-width: 200px;\n  cursor: pointer;\n  padding: 8px 15px;\n  /* margin: 3px 2px; */\n  white-space: nowrap;\n  color: #AAA;\n  font-style: italic;\n}\n.bg-bd80b .popMenu-b7ccd .notFound-cd6d1:hover {\n  background-color: #F7F7F7;\n}\n.bg-bd80b .popMenu-b7ccd .loading-c266f {\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-style: italic;\n  color: #AAA;\n}\n",""]),a.locals={empty:"empty-df585",toolbar:"toolbar-bf501",tt:"tt-a59df",add:"add-c7dc2",catelog:"catelog-f7cd9",normalMode:"normalMode-ca1af",body0:"body0-d8450",bg:"bg-bd80b",popMenu:"popMenu-b7ccd",menuItem:"menuItem-a97a6",notFound:"notFound-cd6d1",loading:"loading-c266f"};const l=a},95267:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.catelog-dcaab {\n  display: flex;\n  flex-direction: column;\n}\n.catelog-dcaab:hover .toolbar-d9349 .add-ced7f {\n  visibility: visible;\n}\n.catelog-dcaab .toolbar-d9349 {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 2px 10px 0 0;\n  height: 10px;\n  margin: 5px 0 5px 0;\n}\n.catelog-dcaab .toolbar-d9349 .tt-f010c {\n  color: #ce5b21;\n  font-size: 10px;\n  font-style: italic;\n}\n.catelog-dcaab .toolbar-d9349 .add-ced7f {\n  padding-left: 5px;\n  margin-left: 5px;\n  font-size: 16px;\n  padding-bottom: 2px;\n  font-weight: 200;\n  cursor: pointer;\n  visibility: hidden;\n}\n.empty-b4f65 {\n  display: inline-flex;\n}\n.empty-b4f65 .toolbar-d9349 {\n  height: 15px;\n  margin: -5px 0 5px 0;\n}\n.empty-b4f65 .toolbar-d9349 .tt-f010c {\n  font-style: italic;\n  color: #CCC;\n}\n.empty-b4f65:hover .toolbar-d9349 .tt-f010c {\n  color: #333;\n}\n.cardItem-c1f40 {\n  display: block;\n  width: 140px;\n  height: 25px;\n  line-height: 22px;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n  font-size: 10px;\n  margin: 3px 15px 3px 25px;\n  padding: 0 3px 0 20px;\n  background-color: #f7f1ee;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n  cursor: pointer;\n}\n.cardItem-c1f40:before {\n  left: 3px !important;\n}\n.running-b1676:after {\n  font-size: 10px;\n  content: '[..]';\n  position: absolute;\n  left: 3px;\n  top: -1px;\n  color: #FA6400;\n}\n",""]),a.locals={catelog:"catelog-dcaab",toolbar:"toolbar-d9349",add:"add-ced7f",tt:"tt-f010c",empty:"empty-b4f65",cardItem:"cardItem-c1f40",running:"running-b1676"};const l=a},28860:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.wrap-cb7de {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  position: relative;\n}\n.outlineView-a30e7 {\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n}\n.outline-d5236 {\n  background: #FAFAFA;\n  height: 100%;\n  position: relative;\n  display: grid;\n  grid-template-rows: min-content min-content 1fr;\n  overflow: auto;\n  padding-bottom: 10px;\n}\n.sperV-f917e {\n  position: absolute;\n  right: -2px;\n  width: 5px;\n  height: 100%;\n  cursor: ew-resize;\n  margin-right: -2px;\n  margin-left: -2px;\n  z-index: 100;\n}\n.sperV-f917e:hover {\n  transition: 0.2s;\n  background: #616C81;\n}\n.sperV-f917e:hover > div {\n  border-left-width: 0;\n}\n.sperV-f917e > div {\n  border-left: 1px solid #ddd;\n  height: 100%;\n  width: 1px;\n  margin-left: 2px;\n}\n.focus-fc638 {\n  border-color: transparent !important;\n  outline: 2px solid #FA6400 !important;\n}\n.error-cce86:after {\n  position: absolute;\n  right: -7px;\n  top: -7px;\n  width: 15px;\n  height: 15px;\n  padding: 0 0 1px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 100%;\n  background-color: #FF0000;\n  color: #FFF;\n  font-size: 10px;\n  font-weight: bold;\n  content: '✕';\n}\n.cur-fce5f {\n  border: 1px solid #FA6400 !important;\n}\n.moved-c0f4d {\n  position: absolute;\n  pointer-events: none;\n  z-index: 100000;\n}\n.cooper-e131d {\n  pointer-events: auto !important;\n  width: 20px;\n  height: 20px;\n  border: 1px solid #FFF;\n  border-bottom-right-radius: 20px;\n  border-top-left-radius: 20px;\n  border-top-right-radius: 20px;\n  position: absolute;\n  bottom: 3px;\n  right: 3px;\n  z-index: 10000;\n  color: #FFF;\n  font-size: 12px;\n  font-weight: bold;\n  background: #FA6400;\n  padding-left: 4px;\n  display: flex;\n  align-items: center;\n  padding-bottom: 4px;\n}\n.label-f2f4d {\n  height: 16px !important;\n  display: flex !important;\n  align-content: center;\n  position: absolute !important;\n  right: 5px;\n  top: 7px;\n  width: 14px !important;\n  padding: 0 !important;\n}\n.label-f2f4d svg {\n  max-width: 10px;\n  max-height: 10px;\n}\n.label_todo-d74f2 svg path {\n  fill: #f38c23;\n}\n.label_doing-f8d52 svg path {\n  fill: #0baebd;\n}\n.label_done-d7e1a svg path {\n  fill: #5bbd0b;\n}\n",""]),a.locals={wrap:"wrap-cb7de",outlineView:"outlineView-a30e7",outline:"outline-d5236",sperV:"sperV-f917e",focus:"focus-fc638",error:"error-cce86",cur:"cur-fce5f",moved:"moved-c0f4d",cooper:"cooper-e131d",label:"label-f2f4d",label_todo:"label_todo-d74f2",label_doing:"label_doing-f8d52",label_done:"label_done-d7e1a"};const l=a},84094:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.catelog-af828 {\n  display: flex;\n  flex-direction: column;\n}\n.catelog-af828:hover .toolbar-ca2da .add-f7ec7 {\n  visibility: visible;\n}\n.catelog-af828 .toolbar-ca2da {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 2px 10px 0 0;\n  height: 10px;\n  margin: 5px 0 5px 0;\n}\n.catelog-af828 .toolbar-ca2da .tt-c8dd2 {\n  font-size: 10px;\n  font-style: italic;\n  color: #8173a1;\n}\n.catelog-af828 .toolbar-ca2da .add-f7ec7 {\n  padding-left: 2px;\n  margin-left: 5px;\n  font-size: 16px;\n  padding-bottom: 2px;\n  font-weight: 200;\n  cursor: pointer;\n  visibility: hidden;\n}\n.empty-db8a1 {\n  display: inline-flex;\n}\n.empty-db8a1 .toolbar-ca2da {\n  height: 15px;\n  margin: -5px 0 5px 0;\n}\n.empty-db8a1 .toolbar-ca2da .tt-c8dd2 {\n  font-style: italic;\n  color: #CCC;\n}\n.empty-db8a1:hover .toolbar-ca2da .tt-c8dd2 {\n  color: #333;\n  cursor: pointer;\n}\n.cardItem-aa5a8 {\n  display: block;\n  width: 140px;\n  height: 25px;\n  line-height: 22px;\n  border-radius: 4px;\n  border: 1px solid #ddd;\n  font-size: 10px;\n  margin: 3px 15px 3px 25px;\n  padding: 0 3px 0 20px;\n  background-color: #f7f1ee;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  position: relative;\n  cursor: pointer;\n}\n.cardItem-aa5a8:before {\n  left: 3px !important;\n}\n.running-ede22:after {\n  font-size: 10px;\n  content: '[..]';\n  position: absolute;\n  left: 3px;\n  top: -1px;\n  color: #FA6400;\n}\n",""]),a.locals={catelog:"catelog-af828",toolbar:"toolbar-ca2da",add:"add-f7ec7",tt:"tt-c8dd2",empty:"empty-db8a1",cardItem:"cardItem-aa5a8",running:"running-ede22"};const l=a},45523:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(37009),i=n.n(o),r=n(48814),a=n.n(r)()(i());a.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.filter-fcb51 {\n  display: flex;\n  align-items: center;\n  height: 30px;\n  padding: 3px 5px 0 5px;\n  margin-bottom: 3px;\n}\n.filter-fcb51 .empty-cd9fd,\n.filter-fcb51 .now-c11f7 {\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n}\n.filter-fcb51 .empty-cd9fd label,\n.filter-fcb51 .now-c11f7 label {\n  cursor: pointer;\n}\n.filter-fcb51 .empty-cd9fd .icon-c0e1d,\n.filter-fcb51 .now-c11f7 .icon-c0e1d {\n  height: 14px;\n  margin-right: 5px;\n}\n.filter-fcb51 .empty-cd9fd .icon-c0e1d svg,\n.filter-fcb51 .now-c11f7 .icon-c0e1d svg {\n  max-width: 14px;\n}\n.filter-fcb51 .empty-cd9fd .icon-c0e1d svg path,\n.filter-fcb51 .now-c11f7 .icon-c0e1d svg path {\n  fill: #AAA;\n}\n.filter-fcb51 .empty-cd9fd {\n  line-height: 12px;\n  cursor: pointer;\n  color: #BBB;\n  font-style: italic;\n  background: #F1F1F1;\n  border-radius: 5px;\n  height: 24px;\n  width: 100%;\n  padding: 0 10px 0 10px;\n  font-size: 12px;\n}\n.filter-fcb51 .now-c11f7 {\n  height: 22px;\n  padding: 0 2px 0 10px;\n  background-color: #FA6400;\n  color: #FFF;\n  font-weight: bold;\n  border-radius: 20px;\n  font-size: 10px;\n}\n.filter-fcb51 .now-c11f7 .icon-c0e1d path {\n  fill: #FFF !important;\n}\n.filter-fcb51 .now-c11f7 .close-cf286 {\n  width: 22px;\n  margin-left: 2px;\n  font-size: 12px;\n  display: flex;\n  justify-content: center;\n}\n.bg-c2798 {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10000;\n}\n.bg-c2798 .view-c8c7a {\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n  position: absolute;\n  pointer-events: visible;\n  bottom: 30px;\n  border-radius: 5px;\n  background-color: #FFF;\n  box-shadow: 0 3px 10px #aaa;\n  font-size: 12px;\n}\n.bg-c2798 .view-c8c7a .titleBar-f221e {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid #EEE;\n  padding: 10px 0 10px 20px;\n  font-weight: bold;\n  font-size: 14px;\n  user-select: none;\n  cursor: move;\n}\n.bg-c2798 .view-c8c7a .content-d5875 {\n  flex: 1;\n  padding: 10px 5px 10px 10px;\n  overflow-y: auto;\n}\n.bg-c2798 .view-c8c7a .var-a057b,\n.bg-c2798 .view-c8c7a .fx-c7f82,\n.bg-c2798 .view-c8c7a .com-b0651 {\n  cursor: pointer;\n  height: 26px;\n  display: flex;\n  align-items: center;\n  padding: 0 10px;\n  border-radius: 5px;\n  margin: 3px 0 3px 5px;\n  position: relative;\n}\n.bg-c2798 .view-c8c7a .var-a057b:hover,\n.bg-c2798 .view-c8c7a .fx-c7f82:hover,\n.bg-c2798 .view-c8c7a .com-b0651:hover {\n  background-color: #F1F1F1;\n}\n.bg-c2798 .view-c8c7a .vars-bf864,\n.bg-c2798 .view-c8c7a .fxs-f5079,\n.bg-c2798 .view-c8c7a .slot-bce31 {\n  position: relative;\n}\n.bg-c2798 .view-c8c7a .vars-bf864 .tt-b14a4,\n.bg-c2798 .view-c8c7a .fxs-f5079 .tt-b14a4,\n.bg-c2798 .view-c8c7a .slot-bce31 .tt-b14a4 {\n  font-style: italic;\n  color: #CCC;\n  margin-bottom: -5px;\n  background: #FFF;\n  z-index: 10;\n  position: relative;\n}\n.bg-c2798 .view-c8c7a .vars-bf864 {\n  padding-left: 15px;\n}\n.bg-c2798 .view-c8c7a .vars-bf864:before {\n  position: absolute;\n  left: 20px;\n  height: 100%;\n  content: '';\n  border-left: 1px solid #EEE;\n}\n.bg-c2798 .view-c8c7a .vars-bf864 .var-a057b {\n  margin-left: 10px;\n}\n.bg-c2798 .view-c8c7a .vars-bf864 .var-a057b span {\n  margin-right: 3px;\n}\n.bg-c2798 .view-c8c7a .fxs-f5079 {\n  padding-left: 10px;\n}\n.bg-c2798 .view-c8c7a .fxs-f5079:before {\n  position: absolute;\n  left: 20px;\n  height: 100%;\n  content: '';\n  border-left: 1px solid #EEE;\n}\n.bg-c2798 .view-c8c7a .fxs-f5079 .fx-c7f82 {\n  margin-left: 10px;\n}\n.bg-c2798 .view-c8c7a .fxs-f5079 .fx-c7f82 span {\n  margin-right: 3px;\n}\n.bg-c2798 .view-c8c7a .com-b0651 .comIcon-f4773 {\n  margin-right: 5px;\n  height: 14px;\n  padding: 0;\n  display: flex;\n  opacity: 0.5;\n}\n.bg-c2798 .view-c8c7a .com-b0651 .comIcon-f4773 img {\n  max-width: 12px;\n}\n.bg-c2798 .view-c8c7a .hidden-d971b {\n  opacity: 0.5;\n}\n.bg-c2798 .view-c8c7a .hidden-d971b:after {\n  margin-left: 10px;\n  content: '(隐藏)';\n  font-style: italic;\n}\n.bg-c2798 .view-c8c7a .comContent-c1b40 {\n  margin-left: 10px;\n}\n.bg-c2798 .view-c8c7a .comContent-c1b40:after {\n  display: none !important;\n}\n.bg-c2798 .view-c8c7a .comContent-c1b40 .slot-bce31 {\n  padding-left: 15px;\n  position: relative;\n}\n.bg-c2798 .view-c8c7a .comContent-c1b40 .slot-bce31 .slotBody-e502b {\n  padding-left: 10px;\n  position: relative;\n}\n.bg-c2798 .view-c8c7a .comContent-c1b40 .slot-bce31 .slotBody-e502b:before {\n  position: absolute;\n  left: 10px;\n  height: 100%;\n  content: '';\n  border-left: 1px solid #EEE;\n}\n",""]),a.locals={filter:"filter-fcb51",empty:"empty-cd9fd",now:"now-c11f7",icon:"icon-c0e1d",close:"close-cf286",bg:"bg-c2798",view:"view-c8c7a",titleBar:"titleBar-f221e",content:"content-d5875",var:"var-a057b",fx:"fx-c7f82",com:"com-b0651",vars:"vars-bf864",fxs:"fxs-f5079",slot:"slot-bce31",tt:"tt-b14a4",comIcon:"comIcon-f4773",hidden:"hidden-d971b",comContent:"comContent-c1b40",slotBody:"slotBody-e502b"};const l=a},96018:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(86487),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},30109:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(76717),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},9387:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(73949),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},95017:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(57981),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},88394:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(76416),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},42230:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(56793),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},2268:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(29326),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},16305:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(5169),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},33392:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(51354),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},23106:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(85335),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},44545:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(3459),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},82715:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(4571),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},46030:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(78931),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},76732:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(47487),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},2334:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(28934),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},59014:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(78256),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},62673:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(95267),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},30718:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(28860),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},52849:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(84094),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},58841:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(93379),i=n.n(o),r=n(7795),a=n.n(r),l=n(90569),s=n.n(l),c=n(3565),d=n.n(c),m=n(19216),p=n.n(m),u=n(44589),f=n.n(u),h=n(45523),g={};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p();i()(h.Z,g);const y=h.Z&&h.Z.locals?h.Z.locals:void 0},73987:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(90359),i=n(91422),r=n(20649),a=n(61189),l=n(63429),s=n(61045);const c=/(%[coOs])|(%(([0-9]*[.])?[0-9]+)?[dif])/g;class d extends o.Component{constructor(){super(...arguments),this.theme=e=>Object.assign(Object.assign({},e),{method:this.props.log.method})}shouldComponentUpdate(e){return this.props.log.amount!==e.log.amount}render(){const{log:e}=this.props;return o.createElement(i.f6,{theme:this.theme},o.createElement(r.v0,{"data-method":e.method,ref:e=>this.el=e,onMouseEnter:e=>{this.el.style["background-color"]="#F7F7F7"},onMouseLeave:e=>{this.el.style["background-color"]="#FFF"},onClick:t=>{"function"==typeof e.onClick&&e.onClick(e)}},e.amount>1?o.createElement(r.ty,null,e.amount):o.createElement(r.JO,null),e.timestamp?o.createElement(r.EK,null,e.timestamp):o.createElement("span",null),o.createElement(r.VY,null,this.getNode())))}getNode(){var e;const{log:t}=this.props,n=this.typeCheck(t);if(n)return n;if(t.data.length>0&&"string"==typeof t.data[0]){const n=null===(e=t.data[0].match(c))||void 0===e?void 0:e.length;if(n){const e=t.data.slice(1+n);return o.createElement(o.Fragment,null,o.createElement(a.Z,{data:t.data}),e.length>0&&o.createElement(l.Z,{quoted:!1,log:Object.assign(Object.assign({},t),{data:e}),linkifyOptions:this.props.linkifyOptions}))}}if(t.data.every((e=>"string"==typeof e))&&"error"===t.method)return o.createElement(s.Z,{error:t.data.join(" ")});const i="string"!=typeof t.data[0];return o.createElement(l.Z,{log:t,quoted:i,linkifyOptions:this.props.linkifyOptions})}typeCheck(e){return e?!(e.data instanceof Array)&&o.createElement(a.Z,{data:["%c[console-feed] %cFailed to parse message! %clog.data was not an array!","color: red","color: orange","color: cyan"]}):o.createElement(a.Z,{data:[`%c[console-feed] %cFailed to parse message! %clog was typeof ${typeof e}, but it should've been a log object`,"color: red","color: orange","color: cyan"]})}}const m=d},18413:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(10149);function i(e,t,n){const i={};function r(e){return"number"!=typeof e?"NaN":Math.floor(e)}let a=null;function l(e){const t=["background","border","color","font","line","margin","padding","text","-webkit-background","-webkit-border","-webkit-font","-webkit-margin","-webkit-padding","-webkit-text"];for(let n=0;n<t.length;n++)if(e.startsWith(t[n]))return!0;return!1}function s(e){for(var t in a)e.style[t]=a[t]}return i.s=function(e){return"string"!=typeof e?"":String(e)},i.f=function(e){return"number"!=typeof e?"NaN":e},i.i=r,i.d=r,i.c=function(e){a={};const t=document.createElement("span");t.setAttribute("style",e);for(let e=0;e<t.style.length;e++){const n=t.style[e];l(n)&&(a[n]=t.style[n])}},o.L.format(e,t,i,n,(function(e,t){if(t instanceof Node)e.appendChild(t);else if(void 0!==t){let n=function(e){const t=document.createDocumentFragment();return t.appendChild(document.createTextNode(e)),t}(String(t));if(a){let e=document.createElement("span");e.appendChild(n),s(e);for(let t=0;t<e.children.length;++t)s(e.children[t]);n=e}e.appendChild(n)}return e}))}},83259:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(56082),i=n.n(o),r=n(18413);const a=function(e){const t=document.createElement("span");return(0,r.Z)(e[0],e.slice(1),t),i()(t.outerHTML.replace(/(?:\r\n|\r|\n)/g,"<br />"))}},10149:(e,t,n)=>{var o;n.d(t,{L:()=>o}),function(e){function t(e,t){var n=e.charCodeAt(t);return 48<=n&&n<=57}e.format=function(e,n,o,i,r,a){if(!e||!n||!n.length)return{formattedResult:r(i,e),unusedSubstitutions:n};function l(){return'String.format("'+e+'", "'+Array.prototype.join.call(n,'", "')+'")'}function s(e){console.error(l()+": "+e)}for(var c,d=i,m=a||function(e,n){var o=[],i=0;function r(e){o.length&&"string"===o[o.length-1].type?o[o.length-1].value+=e:o.push({type:"string",value:e})}function a(e,t,n){o.push({type:"specifier",specifier:e,precision:t,substitutionIndex:n})}for(var l=0,s=e.indexOf("%",l);-1!==s&&e.length!==l;s=e.indexOf("%",l))if(r(e.substring(l,s)),"%"!==e[l=s+1]){if(t(e,l)){for(var c=parseInt(e.substring(l),10);t(e,l);)++l;c>0&&"$"===e[l]&&(i=c-1,++l)}var d=-1;if("."===e[l])for(++l,d=parseInt(e.substring(l),10),isNaN(d)&&(d=0);t(e,l);)++l;e[l]in n?(a(e[l],d,i),++i,++l):(r(e.substring(s,l+1)),++l)}else r("%"),++l;return r(e.substring(l)),o}(e,o),p={},u=0;u<m.length;++u){var f=m[u];"string"!==f.type?"specifier"===f.type?f.substitutionIndex>=n.length?(s("not enough substitution arguments. Had "+n.length+" but needed "+(f.substitutionIndex+1)+", so substitution was skipped."),d=r(d,"%"+(f.precision>-1?f.precision:"")+f.specifier)):(p[f.substitutionIndex]=!0,f.specifier in o?d=r(d,o[f.specifier](n[f.substitutionIndex],f)):(c="unsupported format character “"+f.specifier+"”. Treating as a string.",console.warn(l()+": "+c),d=r(d,n[f.substitutionIndex]))):s('Unknown token type "'+f.type+'" found.'):d=r(d,f.value)}var h=[];for(u=0;u<n.length;++u)u in p||h.push(n[u]);return{formattedResult:d,unusedSubstitutions:h}}}(o||(o={}))},20649:(e,t,n)=>{n.d(t,{EK:()=>c,JO:()=>l,VY:()=>d,fC:()=>r,ty:()=>s,v0:()=>a});var o=n(18166);const i=(e,t,n)=>n[`LOG_${t.toUpperCase()}_${e.toUpperCase()}`]||n[`LOG_${e.toUpperCase()}`],r=(0,o.Z)("div")({wordBreak:"break-word",width:"100%"}),a=(0,o.Z)("div")((({theme:{styles:e,method:t}})=>({position:"relative",display:"flex",color:i("color",t,e),backgroundColor:i("background",t,e),borderTop:`1px solid ${i("border",t,e)}`,borderBottom:`1px solid ${i("border",t,e)}`,marginTop:-1,marginBottom:+/^warn|error$/.test(t),paddingLeft:10,boxSizing:"border-box","& *":{verticalAlign:"top",boxSizing:"border-box",fontFamily:e.BASE_FONT_FAMILY,whiteSpace:"pre-wrap",fontSize:e.BASE_FONT_SIZE},"& a":{color:e.LOG_LINK_COLOR}}))),l=(0,o.Z)("div")((({theme:{styles:e,method:t}})=>({width:e.LOG_ICON_WIDTH,height:e.LOG_ICON_HEIGHT,backgroundImage:i("icon",t,e),backgroundRepeat:"no-repeat",backgroundSize:e.LOG_ICON_BACKGROUND_SIZE,backgroundPosition:"50% 50%"}))),s=(0,o.Z)("div")((({theme:{styles:e,method:t}})=>({height:"16px",margin:"1px 0",whiteSpace:"nowrap",fontSize:"10px",lineHeight:"17px",padding:"0px 3px",background:i("amount_background",t,e),color:i("amount_color",t,e),borderRadius:"8px",minWidth:"18px",textAlign:"center"}))),c=(0,o.Z)("div")((({theme:{styles:e,method:t}})=>({padding:"3px 0px 0px 5px",width:"110px",height:e.LOG_ICON_HEIGHT,color:"dimgray"}))),d=(0,o.Z)("div")((({theme:{styles:e}})=>({clear:"right",position:"relative",padding:e.PADDING,marginLeft:15,minHeight:18,flex:"auto",width:"calc(100% - 15px)"})))},53273:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),i=n(91422),r=n(64878),a=n(20649),l=n(73987);const s=e=>({variant:e.variant||"light",styles:Object.assign(Object.assign({},(0,r.Z)(e)),e.styles)});class c extends o.PureComponent{constructor(){super(...arguments),this.state={theme:s(this.props),prevStyles:this.props.styles,prevVariant:this.props.variant}}static getDerivedStateFromProps(e,t){return e.variant!==t.prevVariant||JSON.stringify(e.styles)!==JSON.stringify(e.prevStyles)?{theme:s(e),prevStyles:e.styles,prevVariant:e.variant}:null}render(){let{filter:e=[],logs:t=[],searchKeywords:n,logFilter:r,logGrouping:s=!0}=this.props;if(n){const e=new RegExp(n),o=r||(t=>{try{return e.test(function(e){const t=new Set;return JSON.stringify(e,(function(e,n){if("object"==typeof n&&null!==n){if(t.has(n))return;t.add(n)}return n}))}(t))}catch(e){return!0}});t=t.filter(o)}return s&&(t=t.reduce(((e,t)=>{const n=e[e.length-1];return n&&n.amount&&n.method===t.method&&n.data.length===t.data.length&&n.data.every(((e,n)=>t.data[n]===e))?(n.amount+=1,e):(e.push(Object.assign(Object.assign({},t),{amount:1})),e)}),[])),o.createElement(i.f6,{theme:this.state.theme},o.createElement(a.fC,null,t.map(((t,n)=>0!==e.length&&t.method&&-1===e.indexOf(t.method)?null:o.createElement(l.Z,{log:t,key:t.id||`${t.method}-${n}`,linkifyOptions:this.props.linkifyOptions})))))}}const d=c},61045:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(90359),i=n(96250),r=n.n(i);const a=function({error:e}){let t;const n=function(e){const t=e.indexOf("\n");return-1===t?e:e.substr(0,t)}(e),i=e.split("\n");return i.length>1&&(t=i.slice(1)),t?o.createElement("details",null,o.createElement("summary",{style:{outline:"none",cursor:"pointer"}},n),o.createElement(r(),null,t.join("\n\r"))):o.createElement(r(),null,e)}},61189:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(90359),i=n(50553),r=n(83259);class a extends o.PureComponent{render(){return o.createElement(i.fC,{"data-type":"formatted",dangerouslySetInnerHTML:{__html:(0,r.Z)(this.props.data||[])}})}}const l=a},63429:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),i=n(91422),r=n(50553),a=n(96250),l=n.n(a),s=n(13575);class c extends o.PureComponent{render(){const{theme:e,quoted:t,log:n}=this.props;return n.data.map(((n,i)=>{if("string"==typeof n){const a=!t&&n.length?`${n} `:o.createElement("span",null,o.createElement("span",null,'"'),o.createElement("span",{style:{color:e.styles.OBJECT_VALUE_STRING_COLOR}},n),o.createElement("span",null,'" '));return o.createElement(r.fC,{"data-type":"string",key:i},o.createElement(l(),{options:this.props.linkifyOptions},a))}return o.createElement(s.Z,{data:n,key:i})}))}}const d=(0,i.Zz)(c)},50553:(e,t,n)=>{n.d(t,{fC:()=>i,iA:()=>r,k9:()=>a,v_:()=>l});var o=n(18166);const i=(0,o.Z)("div")({display:"inline-block",wordBreak:"break-all","&::after":{content:"' '",display:"inline-block"},"& > li, & > ol, & > details":{backgroundColor:"transparent !important",display:"inline-block"},"& ol:empty":{paddingLeft:"0 !important"}}),r=(0,o.Z)("span")({"& > li":{display:"inline-block",marginTop:5}}),a=(0,o.Z)("span")({display:"inline-block","& div:hover":{backgroundColor:"rgba(255, 220, 158, .05) !important",borderRadius:"2px"}}),l=(0,o.Z)("span")({"& > span > span:nth-child(1)":{opacity:.6}})},13575:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(91422),i=n(90359),r=n(71159),a=n(61045),l=n(50553);const s="__console_feed_remaining__";const c=e=>{if(e.length<=0)return 0;const t=e[e.length-1];if(!t||"function"!==t.split)return 0;const n=parseInt(e[e.length-1].split(s)[1]);return e.length-1+n},d=({name:e,data:t})=>{let n=t;if("object"==typeof t&&!Array.isArray(t)&&null!==t){const e={};for(const n in t)if(t.hasOwnProperty(n)){let o=t[n];if(Array.isArray(o)){const t=c(o);isNaN(t)||(e[n]=new Array(t))}else e[n]=o}try{n=Object.assign(Object.create(Object.getPrototypeOf(t)),e)}catch(e){}}return"string"==typeof e?i.createElement("span",null,i.createElement(r.JC,{name:e}),i.createElement("span",null,": "),i.createElement(r.My,{data:n})):i.createElement(r.My,{data:n})},m=({name:e,data:t,isNonenumerable:n=!1})=>e===s?t>0?i.createElement("span",null,t," more..."):null:i.createElement("span",null,"string"==typeof e?i.createElement(r.JC,{name:e,dimmed:n}):i.createElement(r.My,{data:e}),i.createElement("span",null,": "),i.createElement(r.AC,{object:t}));class p extends i.PureComponent{render(){const{data:e,theme:t}=this.props,{styles:n,method:o}=t,a=e instanceof HTMLElement,s="table"===o;return i.createElement(l.fC,{"data-type":s?"table":a?"html":"object"},s?i.createElement(l.iA,null,i.createElement(r.lj,Object.assign({},this.props,{theme:n,table:!0})),i.createElement(r.lj,Object.assign({},this.props,{theme:n,nodeRenderer:this.nodeRenderer.bind(this)}))):a?i.createElement(l.k9,null):i.createElement(r.lj,Object.assign({},this.props,{theme:n,nodeRenderer:this.nodeRenderer.bind(this)})))}getCustomNode(e){var t;const{styles:n}=this.props.theme,o=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name;if("Function"===o)return i.createElement("span",{style:{fontStyle:"italic"}},i.createElement(r.My,{data:e})," {",i.createElement("span",{style:{color:"rgb(181, 181, 181)"}},e.body),"}");if(e instanceof Error&&"string"==typeof e.stack)return i.createElement(a.Z,{error:e.stack});if("Promise"===o)return i.createElement("span",{style:{fontStyle:"italic"}},"Promise ","{",i.createElement("span",{style:{opacity:.6}},"<pending>"),"}");if(e instanceof HTMLElement)return i.createElement(l.k9,null);if(Array.isArray(e)){const t=c(e),o=n.OBJECT_PREVIEW_ARRAY_MAX_PROPERTIES,a=e.slice(0,o).map(((e,t)=>Array.isArray(e)?i.createElement(r.AC,{key:t,object:new Array(c(e))}):i.createElement(r.AC,{key:t,object:e})));return t>o&&a.push(i.createElement("span",{key:"ellipsis"},"…")),i.createElement(i.Fragment,null,i.createElement("span",{style:n.objectDescription},0===t?"":`(${t}) `),i.createElement("span",{style:n.preview},"[",(d=", ",0===(s=a).length?[]:s.slice(1).reduce(((e,t)=>e.concat([d,t])),[s[0]])),"]"))}var s,d;return null}nodeRenderer(e){let{depth:t,name:n,data:o,isNonenumerable:a}=e;if(0===t){return this.getCustomNode(o)||i.createElement(d,{name:n,data:o})}if("string"==typeof o&&o.includes(s)&&(n=s,o=o.split(s)[1]),"constructor"===n)return i.createElement(l.v_,null,i.createElement(r.j,{name:"<constructor>",data:o.name,isNonenumerable:a}));const c=this.getCustomNode(o);return c?i.createElement(l.fC,null,i.createElement(r.JC,{name:n}),i.createElement("span",null,": "),c):i.createElement(m,{name:n,data:o,isNonenumerable:a})}}const u=(0,o.Zz)(p)},64878:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(71159);const i=e=>{const t="light"===(e.variant||"light"),n=t?o.iU:o.i6;return Object.assign(Object.assign({},n),{PADDING:"3px 22px 2px 0",LOG_COLOR:n.BASE_COLOR,LOG_BACKGROUND:"transparent",LOG_BORDER:t?"rgb(236,236,236)":"rgb(44,44,44)",LOG_ICON_WIDTH:10,LOG_ICON_HEIGHT:18,LOG_ICON:"none",LOG_AMOUNT_BACKGROUND:"#42597f",LOG_AMOUNT_COLOR:"#8d8f91",LOG_LINK_COLOR:t?"rgb(66, 66, 66)":"rgb(177, 177, 177)",LOG_WARN_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACkSURBVChTbY7BCoJQFERn0Q/3BX1JuxQjsSCXiV8gtCgxhCIrKIRIqKDVzXl5w5cNHBjm6eGinXiAXu5inY2xYm/mbpIh+vcFhLA3sx0athNUhymEsP+10lAEEA17x8o/9wFuNGnYuVlWve0SQl7P0sBu3aq2R1Q/1JzSkYGd29eqNv2wjdnUuvNRciC/N+qe+7gidbA8zyHkOINsvA/sumcOkjcabcBmw2+mMgAAAABJRU5ErkJggg==)",LOG_WARN_BACKGROUND:t?"rgb(255,250,220)":"#332b00",LOG_WARN_COLOR:t?"rgb(73,45,2)":"#ffdc9e",LOG_WARN_BORDER:t?"rgb(255,244,181)":"#650",LOG_WARN_AMOUNT_BACKGROUND:"#ffbb17",LOG_WARN_AMOUNT_COLOR:"#8d8f91",LOG_ERROR_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADESURBVChTY4CB7ZI8tmfU5E6e01b+DMIgNkgMKg0BR9Vkux6YWPx/bemIgkFiIDmwogOaqrYPzazAEm8DwuGKYGyQHEgNw0VT05Mwib9v3v7/kJEHxiA2TDFIDcNNU4vPMFPACj58/P/v40cwGyYOUsNwy8IZRSFIEUgxskKQGoZrzp4ErQapYbgYHG371M4dLACTQGaD5EBqwD6/FpzQ9dTBE64IhkFiIDmwIhi4mlJqey8o4eR9r8jPIAxig8QgsgwMAFZz1YtGPXgjAAAAAElFTkSuQmCC)",LOG_ERROR_BACKGROUND:t?"rgb(255,235,235)":"#290000",LOG_ERROR_BORDER:t?"rgb(253,204,205)":"#5b0000",LOG_ERROR_COLOR:t?"rgb(252,0,5)":"#ff8080",LOG_ERROR_AMOUNT_BACKGROUND:"#dc2727",LOG_ERROR_AMOUNT_COLOR:"#8d8f91",LOG_DEBUG_ICON:"url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 459 459'%3e%3cpath fill='%234D88FF' d='M433.5 127.5h-71.4a177.7 177.7 0 0 0-45.9-51L357 35.7 321.3 0l-56.1 56.1c-10.2-2.6-23-5.1-35.7-5.1s-25.5 2.5-35.7 5.1L137.7 0 102 35.7l40.8 40.8a177.7 177.7 0 0 0-45.9 51H25.5v51H79c-2.5 7.7-2.5 17.9-2.5 25.5v25.5h-51v51h51V306a88 88 0 0 0 2.5 25.5H25.5v51h71.4A152.2 152.2 0 0 0 229.5 459c56.1 0 107.1-30.6 132.6-76.5h71.4v-51H380c2.5-7.7 2.5-17.9 2.5-25.5v-25.5h51v-51h-51V204c0-7.7 0-17.9-2.5-25.5h53.5v-51zm-153 204h-102v-51h102v51zm0-102h-102v-51h102v51z'/%3e%3c/svg%3e\")",LOG_DEBUG_BACKGROUND:"",LOG_DEBUG_BORDER:"",LOG_DEBUG_COLOR:"#4D88FF",LOG_COMMAND_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABaSURBVChTY6AtmDx5cvnUqVP1oFzsoL+/XwCo8DEQv584caIVVBg7mDBhghxQ4Y2+vr6vU6ZM8YAKYwdA00SB+CxQ8S+g4jCoMCYgSiFRVpPkGaAiHMHDwAAA5Ko+F4/l6+MAAAAASUVORK5CYII=)",LOG_RESULT_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAABpSURBVChTY6A92LNnj96uXbvKoVzsYMeOHVbbt29/D1T4eP/+/QJQYVSwe/duD6CCr0B8A8iWgwqjAqBk2NatW38B6bPbtm0TBYkBFbsA+c9ANFgRCBCtEASAAoSthgGiPAMD2IOHgQEA521bM7uG52wAAAAASUVORK5CYII=)",LOG_INFO_ICON:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADISURBVChTY4ABp/AztmZBZ07qe538rO114rOa8+GTskYHbKHSEOARd6nLIOTsf61gIA46U6kVePYQiK3uc/K/hPG+LrCi8IyrtkZh5yCKgk/80w46ba0RdGYGhH/2v6rXyf88qtttGVwSLp2ECQLxeiAu1wo6uwpJ7L+o2f6TDA6xZz8jCyqFnuHXCj4djywmZXHoM/EK0azGqhBsNYpngL6VCTnGqRF4xgKo+D5IDO4ZEEAKnjcQBafvqwWf/YoSPDCAP8AZGAC7mLM81zgOTQAAAABJRU5ErkJggg==)",BASE_FONT_FAMILY:"Consolas, Lucida Console, Courier New, monospace",BASE_FONT_SIZE:"12px",ARROW_FONT_SIZE:10,OBJECT_VALUE_STRING_COLOR:"rgb(233,63,59)"})}},18166:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(21523).Z},25390:(e,t,n)=>{n(17697),n(16317)},17697:(e,t,n)=>{n(10367),n(8275)},8275:(e,t,n)=>{n(21864)},10367:(e,t,n)=>{n(21864)},21864:(e,t,n)=>{n(80357)},80357:(e,t,n)=>{},96132:(e,t,n)=>{n.d(t,{Z:()=>o});const o={type:"Function",lookup:Function,shouldTransform:(e,t)=>"function"==typeof t,toSerializable(e){let t="";try{t=e.toString().substring(t.indexOf("{")+1,t.lastIndexOf("}"))}catch(e){}return{name:e.name,body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable(e){try{const t=function(){};return"string"==typeof e.name&&Object.defineProperty(t,"name",{value:e.name,writable:!1}),"string"==typeof e.body&&Object.defineProperty(t,"body",{value:e.body,writable:!1}),"string"==typeof e.proto&&(t.constructor={name:e.proto}),t}catch(t){return e}}}},50174:(e,t,n)=>{let o;function i(e){const t={};for(let n of e.attributes)t[n.name]=n.value;return t}n.d(t,{Z:()=>r});const r={type:"HTMLElement",shouldTransform:(e,t)=>t&&t.children&&"string"==typeof t.innerHTML&&"string"==typeof t.tagName,toSerializable:e=>({tagName:e.tagName.toLowerCase(),attributes:i(e),innerHTML:e.innerHTML}),fromSerializable(e){try{const t=(o||(o=document.implementation.createHTMLDocument("sandbox"))).createElement(e.tagName);t.innerHTML=e.innerHTML;for(let n of Object.keys(e.attributes))try{t.setAttribute(n,e.attributes[n])}catch(e){}return t}catch(t){return e}}}},57208:(e,t,n)=>{n.d(t,{Z:()=>o});const o={type:"Map",lookup:Map,shouldTransform:(e,t)=>t&&t.constructor&&"Map"===t.constructor.name,toSerializable(e){let t={};return e.forEach((function(e,n){const o="object"==typeof n?JSON.stringify(n):n;t[o]=e})),{name:"Map",body:t,proto:Object.getPrototypeOf(e).constructor.name}},fromSerializable(e){const{body:t}=e;let n=Object.assign({},t);return"string"==typeof e.proto&&(n.constructor={name:e.proto}),n}}},92417:(e,t,n)=>{var o;n.d(t,{Z:()=>i}),function(e){e[e.infinity=0]="infinity",e[e.minusInfinity=1]="minusInfinity",e[e.minusZero=2]="minusZero"}(o||(o={}));const i={type:"Arithmetic",lookup:Number,shouldTransform:(e,t)=>"number"===e&&(t===1/0||t===-1/0||function(e){return 1/e==-1/0}(t)),toSerializable:e=>e===1/0?o.infinity:e===-1/0?o.minusInfinity:o.minusZero,fromSerializable:e=>e===o.infinity?1/0:e===o.minusInfinity?-1/0:e===o.minusZero?-0:e}},16317:(e,t,n)=>{var o=n(92417),i=n(96132),r=n(50174),a=n(57208),l=n(72956);const s=[r.Z,i.Z,o.Z,a.Z],c=new l.Z;c.addTransforms(s)},72956:(e,t,n)=>{n.d(t,{Z:()=>g});const o="@t",i=/^#*@(t|r)$/,r="__console_feed_remaining__",a=(0,eval)("this"),l="function"==typeof ArrayBuffer,s="function"==typeof Map,c="function"==typeof Set,d=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],m=Array.prototype.slice,p={serialize:e=>JSON.stringify(e),deserialize:e=>JSON.parse(e)};class u{constructor(e,t,n){this.references=e,this.transforms=t,this.transformsMap=this._makeTransformsMap(),this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0,this.limit=null!=n?n:1/0}static _createRefMark(e){const t=Object.create(null);return t["@r"]=e,t}_createCircularCandidate(e,t,n){this.circularCandidates.push(e),this.circularCandidatesDescrs.push({parent:t,key:n,refIdx:-1})}_applyTransform(e,t,n,i){const r=Object.create(null),a=i.toSerializable(e);return"object"==typeof a&&this._createCircularCandidate(e,t,n),r[o]=i.type,r.data=this._handleValue((()=>a),t,n),r}_handleArray(e){const t=[],n=Math.min(e.length,this.limit),o=e.length-n;for(let o=0;o<n;o++)t[o]=this._handleValue((()=>e[o]),t,o);return t[n]=r+o,t}_handlePlainObject(e){var t,n;const o=Object.create(null);let a=0,l=0;for(const t in e)if(Reflect.has(e,t)){if(a>=this.limit){l++;continue}const n=i.test(t)?`#${t}`:t;o[n]=this._handleValue((()=>e[t]),o,n),a++,l++}const s=l-a,c=null===(n=null===(t=null==e?void 0:e.__proto__)||void 0===t?void 0:t.constructor)||void 0===n?void 0:n.name;return c&&"Object"!==c&&(o.constructor={name:c}),s&&(o[r]=s),o}_handleObject(e,t,n){return this._createCircularCandidate(e,t,n),Array.isArray(e)?this._handleArray(e):this._handlePlainObject(e)}_ensureCircularReference(e){const t=this.circularCandidates.indexOf(e);if(t>-1){const e=this.circularCandidatesDescrs[t];return-1===e.refIdx&&(e.refIdx=e.parent?++this.circularRefCount:0),u._createRefMark(e.refIdx)}return null}_handleValue(e,t,n){try{const o=e(),i=typeof o,r="object"===i&&null!==o;if(r){const e=this._ensureCircularReference(o);if(e)return e}const a=this._findTransform(i,o);return a?this._applyTransform(o,t,n,a):r?this._handleObject(o,t,n):o}catch(e){try{return this._handleValue((()=>e instanceof Error?e:new Error(e)),t,n)}catch(e){return null}}}_makeTransformsMap(){if(!s)return;const e=new Map;return this.transforms.forEach((t=>{t.lookup&&e.set(t.lookup,t)})),e}_findTransform(e,t){if(s&&t&&t.constructor){const n=this.transformsMap.get(t.constructor);if(null==n?void 0:n.shouldTransform(e,t))return n}for(const n of this.transforms)if(n.shouldTransform(e,t))return n}transform(){const e=[this._handleValue((()=>this.references),null,null)];for(const t of this.circularCandidatesDescrs)t.refIdx>0&&(e[t.refIdx]=t.parent[t.key],t.parent[t.key]=u._createRefMark(t.refIdx));return e}}class f{constructor(e,t){this.activeTransformsStack=[],this.visitedRefs=Object.create(null),this.references=e,this.transformMap=t}_handlePlainObject(e){const t=Object.create(null);"constructor"in e&&(e.constructor&&"string"==typeof e.constructor.name||(e.constructor={name:"Object"}));for(const n in e)e.hasOwnProperty(n)&&(this._handleValue(e[n],e,n),i.test(n)&&(t[n.substring(1)]=e[n],delete e[n]));for(const n in t)e[n]=t[n]}_handleTransformedObject(e,t,n){const i=e[o],r=this.transformMap[i];if(!r)throw new Error(`Can't find transform for "${i}" type.`);this.activeTransformsStack.push(e),this._handleValue(e.data,e,"data"),this.activeTransformsStack.pop(),t[n]=r.fromSerializable(e.data)}_handleCircularSelfRefDuringTransform(e,t,n){const o=this.references;Object.defineProperty(t,n,{val:void 0,configurable:!0,enumerable:!0,get(){return void 0===this.val&&(this.val=o[e]),this.val},set(e){this.val=e}})}_handleCircularRef(e,t,n){this.activeTransformsStack.includes(this.references[e])?this._handleCircularSelfRefDuringTransform(e,t,n):(this.visitedRefs[e]||(this.visitedRefs[e]=!0,this._handleValue(this.references[e],this.references,e)),t[n]=this.references[e])}_handleValue(e,t,n){if("object"!=typeof e||null===e)return;const i=e["@r"];if(void 0!==i)this._handleCircularRef(i,t,n);else if(e[o])this._handleTransformedObject(e,t,n);else if(Array.isArray(e))for(let t=0;t<e.length;t++)this._handleValue(e[t],e,t);else this._handlePlainObject(e)}transform(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]}}const h=[{type:"[[NaN]]",shouldTransform:(e,t)=>"number"===e&&isNaN(t),toSerializable:()=>"",fromSerializable:()=>NaN},{type:"[[undefined]]",shouldTransform:e=>"undefined"===e,toSerializable:()=>"",fromSerializable(){}},{type:"[[Date]]",lookup:Date,shouldTransform:(e,t)=>t instanceof Date,toSerializable:e=>e.getTime(),fromSerializable(e){const t=new Date;return t.setTime(e),t}},{type:"[[RegExp]]",lookup:RegExp,shouldTransform:(e,t)=>t instanceof RegExp,toSerializable(e){const t={src:e.source,flags:""};return e.global&&(t.flags+="g"),e.ignoreCase&&(t.flags+="i"),e.multiline&&(t.flags+="m"),t},fromSerializable:e=>new RegExp(e.src,e.flags)},{type:"[[Error]]",lookup:Error,shouldTransform:(e,t)=>t instanceof Error,toSerializable(e){var t,n;return e.stack||null===(n=(t=Error).captureStackTrace)||void 0===n||n.call(t,e),{name:e.name,message:e.message,stack:e.stack}},fromSerializable(e){const t=new(a[e.name]||Error)(e.message);return t.stack=e.stack,t}},{type:"[[ArrayBuffer]]",lookup:l&&ArrayBuffer,shouldTransform:(e,t)=>l&&t instanceof ArrayBuffer,toSerializable(e){const t=new Int8Array(e);return m.call(t)},fromSerializable(e){if(l){const t=new ArrayBuffer(e.length);return new Int8Array(t).set(e),t}return e}},{type:"[[TypedArray]]",shouldTransform(e,t){if(l)return ArrayBuffer.isView(t)&&!(t instanceof DataView);for(const e of d)if("function"==typeof a[e]&&t instanceof a[e])return!0;return!1},toSerializable:e=>({ctorName:e.constructor.name,arr:m.call(e)}),fromSerializable:e=>"function"==typeof a[e.ctorName]?new a[e.ctorName](e.arr):e.arr},{type:"[[Map]]",lookup:s&&Map,shouldTransform:(e,t)=>s&&t instanceof Map,toSerializable(e){const t=[];return e.forEach(((e,n)=>{t.push(n),t.push(e)})),t},fromSerializable(e){if(s){const n=new Map;for(var t=0;t<e.length;t+=2)n.set(e[t],e[t+1]);return n}const n=[];for(let o=0;o<e.length;o+=2)n.push([e[t],e[t+1]]);return n}},{type:"[[Set]]",lookup:c&&Set,shouldTransform:(e,t)=>c&&t instanceof Set,toSerializable(e){const t=[];return e.forEach((e=>{t.push(e)})),t},fromSerializable(e){if(c){const t=new Set;for(let n=0;n<e.length;n++)t.add(e[n]);return t}return e}}];const g=class{constructor(e){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=e||p,this.addTransforms(h)}addTransforms(e){e=Array.isArray(e)?e:[e];for(const t of e){if(this.transformsMap[t.type])throw new Error(`Transform with type "${t.type}" was already added.`);this.transforms.push(t),this.transformsMap[t.type]=t}return this}removeTransforms(e){e=Array.isArray(e)?e:[e];for(const t of e){const e=this.transforms.indexOf(t);e>-1&&this.transforms.splice(e,1),delete this.transformsMap[t.type]}return this}encode(e,t){const n=new u(e,this.transforms,t).transform();return this.serializer.serialize(n)}decode(e){const t=this.serializer.deserialize(e);return new f(t,this.transformsMap).transform()}}},62007:(e,t,n)=>{n.d(t,{Mn:()=>o.Z});var o=n(53273);n(25390),n(16317)},63179:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(38494);function i({model:e}){var t,n,i;if(e.$el){let r;const a=e.cooperation;if(a&&((null===(t=a.commentAry)||void 0===t?void 0:t.length)>0||(null===(n=a.labelAry)||void 0===n?void 0:n.length)>0)&&(r="#de7d38",(null===(i=a.labelAry)||void 0===i?void 0:i.length)>0)){r=a.labelAry[a.labelAry.length-1].color}if(r)return(0,o.m)({fill:r,x:e.$el.width()-12,y:-11})}}},8904:(e,t,n)=>{n.d(t,{C2:()=>C,QU:()=>b,Y:()=>F,ZP:()=>E,kI:()=>w,kq:()=>A,uG:()=>Z,yC:()=>k});var o=n(83446),i=n(79127),r=n(83015),a=n(33568),l=n(90359),s=n(42524),c=n(81120),d=n(2102),m=n(95208),p=n(39920),u=n(93791),f=n(90890),h=n(98820),g=n(49199),y=n(39740),x=n(92208),v=n(90359);n(39920);class b{constructor(){this.dragable=!0}}function E({model:e}){const t=(0,o.N7)(h.NH,{from:"parents"}),n=(0,o.N7)(y.Z,{from:"parents"}),s=(0,o.N7)(i.zz,{from:"parents"}),c=e.runtime?s.getComDef({namespace:e.runtime.def.namespace}):void 0,d=(0,o.mA)(b,(o=>{if(c&&!e.runtime.upgrade&&(e.runtime.def.version||(e.runtime.def.version=c.version),e.runtime.def.version!==c.version)){const t=`${e.runtime.def.version} > ${c.version}`;e.runtime.upgrade={info:t,version:c.version}}o({model:e,comDef:c,diagramContext:t,viewContext:n,context:s})}),{to:"children"});if((0,l.useMemo)((()=>{e.runtime&&(e.diagramModel||(e.diagramModel=t.model),e.runtime.topl||(e.runtime.topl=e.forkedFrom||e))}),[]),!c)return e.runtime?(n.emitLogs.error(`未找到组件(${e.runtime.def.namespace}@${e.runtime.def.version})`),v.createElement(a.Z,{model:e,type:"error",msg:`未找到组件(${e.runtime.def.namespace}@${e.runtime.def.version})`})):(n.emitLogs.error("未找到组件"),v.createElement(a.Z,{model:e,type:"error",msg:"未找到组件"}));(0,o.vc)((()=>{d.errorMsg=e.hasError()})),(0,l.useEffect)((()=>{const t=e.runtime;requestAnimationFrame((()=>{if(e.getInputsAll().forEach((e=>{e.forEach((e=>{e.conAry&&e.conAry.forEach((t=>{const o=t.startPin;o&&!o.isDisabled()&&o.parent.exist()||(e.deleteCon(t),o&&o.deleteCon(t),n.emitComponent.delete(t))}))}))})),e.getOutputsAll().forEach((e=>{e.forEach((e=>{e.conAry&&e.conAry.forEach((t=>{var o;const i=t.finishPin;i&&!i.isDisabled()&&(null===(o=i.parent)||void 0===o?void 0:o.exist())||(e.deleteCon(t),i&&i.deleteCon(t),n.emitComponent.delete(t))}))}))})),e.runtime.hasUI()&&!e.hadDestroyed()){const o=n.emitComponent.exist(t);Array.isArray(o)&&o.forEach((t=>{t.result||(e.error={message:`${t.info}`})}))}}))}),[]);const E=(0,o.vc)((()=>{if(e.diagramModel.style.visible&&n.viewFilter)return e.isMatchForFilter(n.viewFilter)}));if(c.editors&&c.editors["@render"])return v.createElement(u.Z,null);if(e instanceof p.default&&e.isStartInDiagram())return v.createElement(f.Z,null);if(c.namespace===i.Vm.coms.module)return v.createElement(m.Z,null);if(c.namespace!==i.Vm.coms.scenes){if(c.namespace===i.Vm.coms.fn)return v.createElement(g.Z,{highlight:E});if(e instanceof p.default&&e.forkedFrom.hadDestroyed())return;return v.createElement(r.Z,{highlight:E})}return e.ioProxyForCall?v.createElement(x.Z,null):void 0}function C(e,t=27){return(0,o.vc)((()=>{const n=e.inputPinExts,o=e.inputPinsInModel,i=e.outputPinExts,r=e.outputPinsInModel,a=Math.max(e.inputPins.length+(n?n.length:0)+(o?o.length:0),e.outputPins.length+(i?i.length:0)+(r?r.length:0));return{height:Math.max(20*a+10,t)}}))}function w({model:e,className:t}){return(0,o.N7)(b,{from:"parents"}),e.error}function A({model:e,context:t,inputPinAry:n,ignoreIOSync:i,readOnly:r}){(0,o.vc)((()=>{!i&&e instanceof p.default&&e.synchronizeConfigs()})),(0,o.vc)((()=>{!i&&e instanceof p.default&&(e.synchronizeInputs(),e.inputPins&&e.inputPins.forEach((n=>{e.synchronizeRelOutputs(n.rels,t)})))}));const a=[];let l=0;e.timerInputPin&&a.push(v.createElement(d.ZP,{model:e.timerInputPin,key:e.timerInputPin.id,order:l++,type:"timer"})),e.isFx()||e.configPins&&e.configPins.forEach((e=>{a.push(v.createElement(d.ZP,{model:e,key:e.id,order:l++,type:"config"}))})),e.inputPins&&e.inputPins.forEach((t=>{if(t.isTypeOfConfig()&&e.isFx())return;a.push(v.createElement(d.ZP,{model:t,key:t.id,order:l++}));const n=t.forkedFrom;n&&n.params&&n.params.forEach((e=>{a.push(v.createElement(d.ZP,{model:e,key:e.id,type:e.type}))}))}));let s=e.inputPinsInModel;return s&&s.forEach((e=>{e.proxyPin&&"function"==typeof e.proxyPin.hadDestroyed&&e.proxyPin.hadDestroyed()?e.destroy():a.push(v.createElement(d.ZP,{model:e,key:e.id,order:l++}))})),n&&n.forEach((e=>{a.push(v.createElement(d.ZP,{model:e,key:e.id,order:l++}))})),e.inputPinExts&&e.inputPinExts.forEach((e=>{a.push(v.createElement(d.ZP,{model:e,key:e.id,order:l++}))})),a}function k({model:e,outputPinAry:t,type:n,className:i}){(0,o.vc)((()=>{e instanceof p.default&&(e.inputPins&&e.inputPins.find((e=>e.rels))||e.synchronizeOutputs())}));const r=[];let a=0;return e.outputPins&&e.outputPins.forEach((e=>{r.push(v.createElement(d.ZP,{model:e,key:e.id,type:n,order:a++}))})),e.outputPinsInModel&&e.outputPinsInModel.forEach((e=>{e.hadDestroyed()||r.push(v.createElement(d.ZP,{model:e,key:e.id,type:n,order:a++}))})),t&&t.forEach((e=>{r.push(v.createElement(d.ZP,{model:e,key:e.id,type:n,order:a++}))})),e.outputPinExts&&e.outputPinExts.forEach((e=>{r.push(v.createElement(d.ZP,{model:e,key:e.id,type:n,order:a++}))})),e.outputPinNexts&&e.outputPinNexts.forEach((e=>{r.push(v.createElement(d.ZP,{model:e,key:e.id,type:n,order:a++}))})),r}function F(e,t){const{animationLayer:n,emitComponent:i,scale:r}=t;let a,l,d={},m={};const p=e[0];if(!p)return;const u=p.diagramModel;return{start:function(){d={};const t=u.$el;l=(0,o.dL)(t);const i=e=>{let o=e.$el;a=o.parent;const i=o.getClientRect(),r=i.width,l={x:o.x(),y:o.y(),w:r,h:i.height,dx:30};e.timerInputPin&&e.timerInputPin.conAry&&e.timerInputPin.conAry.forEach((e=>{if(!m[e.id]){const t=e.$el;m[e.id]={node:t.moveTo(n)}}})),e.getInputsAllAry().forEach((e=>{e.conAry&&e.conAry.forEach((e=>{if(!m[e.id]){const t=e.$el;m[e.id]={node:t.moveTo(n)}}}))})),e.getOutputsAllAry().forEach((e=>{e.conAry&&e.conAry.forEach((e=>{if(!m[e.id]){const t=e.$el;m[e.id]={node:t.moveTo(n)}}}))})),o=o.moveTo(n);const s=t.getClientRect(),c={w:s.width,h:s.height};o.x(l.x),o.y(l.y),d[e._key||e.id]={nodePo:l,diagramPo:c,tNode:o}};(null==e?void 0:e.length)>1?e.forEach((e=>{i(e)})):i(p)},ing:function({adx:t,ady:n}){const o=(e,o)=>{const{nodePo:i,diagramPo:a,tNode:l}=d[e._key||e.id];let m,p;if(void 0!==t){const e=i.x+t/r;m=e>10;const n=e*r+i.w-(a.w-10);let s;n>0&&(u.style.width=a.w/r+n,u.refreshInnerCons(u,!0,"output")),s=o?m?(0,c.vg)(e):0:m?e:0,m&&l.x(s)}if(void 0!==n){const e=i.y+n/r;p=e>10;const t=e*r+i.h-(a.h-10);let s;t>0&&(u.style.height=a.h/r+t,u.refreshInnerCons(u,!0,"output")),s=o?p?(0,c.vg)(e):0:p?e:0,p&&l.y(s)}(m||p)&&(o?(0,s.AP)(e,r,!0):(0,s.pS)(e,r,!0))};(null==e?void 0:e.length)>1?e.forEach((e=>{o(e)})):o(p,!0)},finish:function(){const t=e=>{if(!a)return;const{diagramPo:t,tNode:n}=d[e._key||e.id];n.x(n.x()),n.y(n.y()),e.style.left=n.x(),e.style.top=n.y();for(let e in m){const{node:t}=m[e];t.moveTo(a),t.zIndex(2)}n.moveTo(a),n.parent.draw()};(null==e?void 0:e.length)>1?e.forEach((e=>{t(e)})):t(p),d=void 0,m=void 0}}}function Z(e,t){const{viewContext:n,model:i,context:r}=t,{emitSnap:a,emitComponent:l}=n;let s,c;(0,o.qw)(e,(({po:{x:e,y:t},epo:{ex:o,ey:r},dpo:{dx:d,dy:m},adpo:{adx:p,ady:u}},f)=>{if("start"!==f){if(i.hadDestroyed()||i.state.isContextMenuPopped())return!1;if("moving"==f&&(s||(s=a.start("移动",{target:i}),c=F(i.diagramModel.focusedComAry||[i],n),c.start()),i.state.moving(),c.ing({adx:p,ady:u}),s.pauseNext(),i.groupId)){i.diagramModel.getGroup(i.groupId).refresh()}"finish"==f&&s&&(s.resume(),c.finish(),c=void 0,i.hadDestroyed()?s.cancel(!0):(i.diagramModel.focusedComAry?i.diagramModel.focusedComAry.forEach((e=>{e.focus()})):l.focus(i),s.commit()))}}))}},45444:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(71442),i=n(3005);function r(e){const{model:t,viewContext:n}=e,{context:r,emitComponent:a,emitSnap:l,emitLogs:s}=n;let c,d,m;const p=r.getComDef(t.runtime.def).ai;let u;if(p&&"function"==typeof p[o.tD]){u=(0,i.e)({context:r,model:t,emitComponent:a,emitSnap:l,emitLogs:s});const e=p[o.tD](Object.assign({data:t.runtime.model.data},u));if(e){const{prompts:t,placeholder:n,execute:o}=e;c=t,d=n,m=o}}if(c)return{title:t.runtime.title,placeholder:d,getPrompts:()=>c,execute:(e,n)=>new Promise(((o,i)=>{if(e){if(e){if("function"==typeof m)return m(Object.assign({data:t.runtime.model.data,newData:e},u)),o("更新完成"),void n();i("该组件未提供更新接口")}}else i("抱歉，我未能理解您的问题，请重新输入.")}))}}},93791:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(83446),i=n(90359),r=n(30109),a=n(96018),l=n(8904),s=n(3005),c=n(18350),d=n(90359);function m(){const e=(0,o.N7)(l.QU,{from:"parents"}),{model:t,comDef:n,context:m}=e;(0,i.useMemo)((()=>{t.getConfigs=function(){return(0,s.U)(e)},t.getListeners=function(){if(m.isDesnMode())return(0,c.U)(e)}}),[]);const u=(0,o.vc)((()=>{const e=[];return e.push(r.Z.com),t.error&&e.push(a.Z.error),t.runtime.upgrade&&e.push(a.Z.warn),"todo"===t.runtime.labelType&&e.push(a.Z.labelTodo),t.state.isFocused()&&e.push(a.Z.focus),t.state.isMoving()&&e.push(a.Z.moving),e.join(" ")})),f=(0,o.vc)((()=>{const e=n.editors["@render"],o=e.topl||e;return d.createElement(o,{title:t.runtime.title,data:t.runtime.model.data})}));return d.createElement("div",{ref:e=>e&&(t.$el=e),"data-topl-com-namespace":t.runtime.def.namespace,className:u,style:(0,l.C2)(t),onClick:(0,o.Ft)(p).stop,onMouseDown:(0,o.Ft)(l.uG).stop.prevent},f,d.createElement(l.kq,{model:t}),d.createElement(l.yC,{model:t}),d.createElement(l.kI,{model:t}))}function p(e){const{model:t,wrapper:n,emitItem:i,emitSnap:r}=(0,o.N7)(l.QU);i.focus(t)}},33568:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(83446),i=n(8904),r=n(90359),a=n.n(r),l=n(18350),s=n(67656),c=n(40635);function d({model:e,type:t,msg:n}){var d,p;const u=(0,o.N7)(i.QU,{from:"parents"}),f=u.viewContext.context;(0,r.useMemo)((()=>{e.getConfigs=function(){return(0,s.U)(u)},e.getListeners=function(){if(u.context.isDesnMode())return(0,l.U)(u)}}),[]);const{height:h}=(0,i.C2)(e,(null===(d=e.runtime)||void 0===d?void 0:d.hasUI())?50:void 0),g=Math.max(h,60),y=null===(p=e.runtime)||void 0===p?void 0:p.hasUI();return a().createElement(c.Group,{ref:t=>{t&&(e.$el=t)},x:e.style.left,y:e.style.top,width:70,height:g,onClick:(0,o.Ft)(m).stop,_onMouseDown:(0,o.Ft)().stop},a().createElement(c.Rect,{width:70,height:g,x:.5,y:.5,fill:"#FFF",stroke:"#FF0000",dash:[3,3],strokeWidth:e.state.isFocused()?2:1,cornerRadius:y?3:0}),a().createElement(c.Text,{text:n,width:60,y:10,x:5,fontSize:10,fill:"#FF0000",wrap:"char",align:"center"}),e.runtime?a().createElement(a().Fragment,null,a().createElement(c.Group,{x:-7,y:10},a().createElement(i.kq,{model:e,context:f})),a().createElement(c.Group,{x:77,y:10},a().createElement(i.yC,{model:e,context:f}))):null)}function m(e){const{model:t,wrapper:n,viewContext:r}=(0,o.N7)(i.QU),{emitComponent:a}=r;n?a.focus(n):a.focus(t)}},67656:(e,t,n)=>{n.d(t,{U:()=>r});var o=n(79127),i=n(41460);function r(e,t){const{model:n,comDef:r,context:a,viewContext:l}=e,{emitLogs:s,emitModule:c,emitComponent:d,emitSnap:m,emitMessage:p}=l,u=[],f=new o.Af.Category(n.runtime?n.runtime.title:"未知组件");u.push(f);const h=function({model:e,emitComponent:t,emitSnap:n,emitLogs:o,emitMessage:i}){return{emitSnap:n,emitLogs:o,emitMessage:i,title:e.runtime?e.runtime.title:"未知组件",get data(){return e.data},input:e.getInputEditor(t),output:e.getOutputEditor(t),isAutoRun:()=>e._autoRun,setAutoRun(t){"boolean"==typeof t&&e.setAutoRun(t)},setIcon(t){"string"==typeof t&&(e.icon=t)},setTitle(t){"string"==typeof t&&""!==t.trim()&&(e.runtime.title=t.trim())},setDesc(t){e.description="string"==typeof t?t:void 0},get env(){},get style(){return e.runtime.model.style}}}({model:n,emitComponent:d,emitSnap:m,emitMessage:p,emitLogs:s}),g=new o.Af.Group;return g.fixedAt="bottom",f.addGroup(g),a.isDesnMode()&&g.addItem((0,i.B)(h,{title:"删除",type:"button",options:{type:"danger"},value:{set(e,t){const o=m.start("itemDelete",{target:n});d.delete(n),d.focus(void 0),o.commit()}}})),u}},49199:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(83446),i=n(90359),r=n.n(i),a=n(8904),l=n(3005),s=n(18350),c=n(46913),d=n(40635),m=n(63179);function p({highlight:e},{highlight:t}){var n,p;const f=(0,o.N7)(a.QU,{from:"parents"}),{model:h,comDef:g,context:y,viewContext:{emitWindowEvents:x,emitSnap:v,emitLogs:b}}=f;let E;(0,i.useMemo)((()=>{h.getConfigs=function(){return(0,l.U)(f)},h.getListeners=function(){if(y.isDesnMode())return(0,s.U)(f)},h.getCooperations=function(){return h}}),[]),(0,o.vc)((()=>{if(h.ioProxy){const e=h.ioProxy;e.inputPins.forEach((e=>{if(!h.inputPinsInModel.find((t=>t.hostId===e.hostId)))if(e.isTypeOfConfig());else{h.addInputPinInModel({hostId:e.hostId,title:e.title,schema:e.schema,deletable:!0}).proxyPin=e}}));let t=h.inputPinsInModel.filter(((t,n)=>{if(!e.inputPins.find((e=>e.hostId===t.hostId)))return!0}));t.length>0&&t.forEach((e=>{e.destroy(),h.removeInputPin(e.hostId)})),e.outputPins.forEach((e=>{if(!h.outputPinsInModel.find((t=>t.hostId===e.hostId))){h.addOutputPinInModel({hostId:e.hostId,title:e.title,schema:e.schema,deletable:!0}).proxyForPin=e}})),t=h.outputPinsInModel.filter(((t,n)=>!e.outputPins.find((e=>e.hostId===t.hostId)))),t.length>0&&t.forEach((e=>{e.destroy(),h.removeOutputPin(e.hostId)}))}})),f.errorMsg?E=f.errorMsg:y.isDebugMode()&&(E=null===(n=h._exeInfo)||void 0===n?void 0:n.errorMsg),(!h.ioProxy||h.ioProxy.hadDestroyed()||h.ioProxy.diagramAry.length<=0)&&(E=`组件(${h.title})未定义`);const C=E||h.description,w=(0,i.useRef)({titleNode:void 0,descNode:void 0}),[A,k]=(0,o.vc)((()=>{var e;const t=y.isDebugMode()&&(null===(e=h._exeInfo)||void 0===e?void 0:e.errorMsg),n=h.inputPinExts,o=h.inputPinsInModel,i=h.outputPinExts,r=h.outputPinsInModel,a=h.outputPinNexts,l=h.inputPins.length+(n?n.length:0)+(o?o.length:0),s=h.outputPins.length+(i?i.length:0)+(r?r.length:0)+(a?a.length:0),c=Math.max(l,s);let d=Math.max(20*c+5,t?100:25);h.description&&d<50&&(d+=10);const m=d/2+(h.description?-11:-4);f.titleY=m;const p=w.current.descNode;if(p){const e=p.height()+10+p.y();e>d?h.setHeight(Math.round(e)):h.setHeight(d)}else h.setHeight(d);return[l,s]})),F=(h.isAutoRun(),[0,k<=0?10:0,k<=0?10:0,0]),Z=null===(p=h.ioProxy)||void 0===p?void 0:p.diagramAry[0],M=(0,i.useCallback)((()=>{const e=h.style;let t=60;w.current.titleNode&&(t=Math.max(t,w.current.titleNode.width()+40));const n=w.current.descNode;if(n){t=Math.max(t,n.width()+10);const o=n.height()+10+n.y();o>e.height&&h.setHeight(Math.round(o))}h.setWidth(t)}),[]);(0,i.useLayoutEffect)(M,[h.runtime.title,null==Z?void 0:Z.title,A,k,C]);const I=h.style;let P=I.width,N=I.height;return null==P&&(P=10),null==N&&(N=10),r().createElement(d.Group,{ref:h.set$elOnce,x:I.left,y:I.top,width:P,height:N,onClick:(0,o.Ft)(u).stop,onContextMenu:(0,o.Ft)((e=>{u(e),x.showContextMenu(e)})).stop.prevent,onDblClick:(0,o.Ft)((e=>function(e){var t;const{viewContext:n,model:o}=e,{emitComponent:i}=n,r=null===(t=o.ioProxy)||void 0===t?void 0:t.diagramAry[0];i.reFocus(r)}(f))).stop,_onMouseDown:e=>{(0,a.uG)(e,f)},_onError_:(e,t)=>{console.error(e),b.error(`组件异常:${e.message}`,e.stack.replace(/\/n/gi,"<br/>"))}},r().createElement(d.Rect,{width:P,height:N,x:.5,y:.5,fill:"#f8eeee",stroke:E?"#FF0000":h.state.isFocused()||e?c.Z.colorPrimary:"#777",strokeWidth:h.state.isFocused()||e?2.5:1,dash:E?[3,3]:null,cornerRadius:F}),E?r().createElement(d.Text,{text:`${E}`,width:P-10,y:8,x:5,fontSize:10,fill:"#FF0000",wrap:"char",align:"center"}):r().createElement(r().Fragment,null,r().createElement(d.Group,{y:f.titleY,ref:e=>{e&&e.x((P-w.current.titleNode.width())/2)}},Z?r().createElement(d.Text,{text:`fx ${Z.title}`,x:0,y:0,fontSize:10,fill:"#777",ref:e=>{e&&(w.current.titleNode=e)}}):null),C?r().createElement(d.Text,{text:C.length>50?C.substring(0,50)+" ..":C,ref:e=>{e&&(w.current.descNode=e)},y:f.titleY+14,x:5,fontSize:10,fill:"#AAA"}):null),r().createElement(d.Group,{x:-7,y:10},r().createElement(a.kq,{model:h})),r().createElement(d.Group,{x:P+7,y:10},r().createElement(a.yC,{model:h})),Z?r().createElement(m.Z,{model:h}):null)}function u(e){const{viewContext:t,model:n}=(0,o.N7)(a.QU);t.emitComponent.focus(n)}},38494:(e,t,n)=>{n.d(t,{m:()=>r});var o=n(40635),i=n(90359);function r({fill:e,x:t,y:n}){return i.createElement(o.Group,{x:t,y:n},i.createElement(o.Rect,{width:16,height:16,fill:e,cornerRadius:[16,16,16,0],strokeWidth:2,stroke:"#FFF"}),i.createElement(o.Text,{text:"..",fontSize:12,fill:"#fff",x:5,y:1,fontStyle:600}))}},18350:(e,t,n)=>{n.d(t,{U:()=>l});var o=n(79127),i=n(23037),r=n(39920),a=n(78263);function l(e){const{model:t,comDef:n,viewContext:l}=e,{viewModel:s,emitComponent:c,emitSnap:d,emitMessage:m,emitView:p,emitScenes:u}=l;let f=[];return t.runtime?(t.runtime.hasUI()&&f.push({title:"在UI视图中定位",exe:()=>{c.sayHi(t.id,"toplView")}}),f.push({title:"复制到剪贴板",keys:["Ctrl+c"],exe:()=>{const e=p.copyFocus();e.from=t.id,(0,i.JG)(JSON.stringify(e))&&m.info("已复制到剪切板.")}}),t.isVar()&&f.unshift({title:"跳转到定义",exe:()=>{if(t instanceof r.default){const e=s.searchDiagramByVar(t.forkedFrom);e&&c.reFocus(e)}}}),t.getOutputsAllAry().find((e=>e.conAry.length>0))&&f.push({title:"整理",exe:()=>{(0,a.i)(t,l)}}),t.isSceneOpen()&&f.unshift({title:"跳转到该场景",exe:()=>{const e=t.ioProxyForCall;e&&e.frame&&u.switch(e.frame.id)}}),t.isFx()&&f.unshift({title:"跳转到定义",exe:()=>{var e,n;const o=null===(n=null===(e=t.ioProxy)||void 0===e?void 0:e.diagramAry)||void 0===n?void 0:n[0];o&&c.reFocus(o)}}),t instanceof r.default&&t.isStartInDiagram()||(f.push(null),f.push({title:"删除",keys:["Backspace","Delete"],exe:()=>{const e=d.start("itemDelete",{target:t});c.delete(t),c.focus(void 0),e.commit()}}))):f.push({title:"删除",keys:["Backspace","Delete"],exe:()=>{const e=d.start("itemDelete",{target:t});c.delete(t),c.focus(void 0),e.commit()}}),t.runtime.def.namespace!==o.Vm.coms.frameOut&&(f.push(null),f.push({title:"组件规格",exe:()=>{t.state.helping()}})),f}},95208:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(83446),i=n(79127),r=n(90359),a=n.n(r),l=n(8904),s=n(3005),c=n(18350),d=n(46913),m=n(40635),p=n(39920);function u(){var e,t;const n=(0,o.N7)(l.QU,{from:"parents"}),{model:u,comDef:h,context:g,viewContext:{emitComponent:y,emitSnap:x,emitLogs:v}}=n;(0,r.useMemo)((()=>{u.getConfigs=function(){return(0,s.U)(n)},u.getListeners=function(){if(g.isDesnMode())return(0,c.U)(n)}}),[]);const b=(0,r.useMemo)((()=>i.zV),[]);(0,o.vc)((()=>{if(u.ioProxyForCall&&u.ioProxyForCall.frame){const e=u.ioProxyForCall.frame,t=u.ioc,n=e.inputPins;t.inputs&&n&&n.forEach((e=>{if(t.inputs[e.id]&&!u.inputPins.find((t=>t.hostId===e.hostId))){u.addInputPin({hostId:e.hostId,title:e.title,schema:e.schema}).proxyPin=e}}))}}));const E=u.runtime;let C,w;if(n.errorMsg)C=n.errorMsg;else if(u.hadDestroyed())C="该组件已删除";else if(C=null===(e=u._exeInfo)||void 0===e?void 0:e.errorMsg,u.ioProxyForCall){const e=u.ioProxyForCall.frame;e&&!e.hadDestroyed()||(C=`${u.title} 已删除`)}else C=`${u.title} 已删除`;if(u instanceof p.default){const e=u.forkedFrom;e.isGlobalVar()?w="全局 ┛":e.parent&&u.diagramModel.parent!==e.parent&&(w=`${e.parent.title} ┛`)}else u.diagramModel&&u.diagramModel.parent!==u.parent&&(w=`${u.parent.title} ┛`);const A=C||u.description,k=(0,r.useRef)({titleNode:void 0,descNode:void 0,fromNode:void 0,refNode:void 0,errorNode:void 0}),F=(0,r.useCallback)(((e,t,n,o)=>{n||delete k.current.descNode;const i=k.current.titleNode,r=k.current.fromNode,a=k.current.refNode,l=k.current.descNode,s=Math.max(e,t);let c=Math.max(20*s+5,25);u.description&&(Z?c<70&&(c+=10):c<50&&(c+=10));const d=i.height();if(l){const e=l.height()+d+5;let t,n;e+20>c?(t=e+20,n=10):(t=c,n=Math.max((c-e)/2,10)),u.setHeight(t),i.parent.y(n),l.y(n+d+5)}else u.setHeight(c),i.parent.y((c-d)/2+1);let m;if(o||a){let e=i.x()+i.width();r&&(r.x(e+5),e+=r.width()+5),a&&a.x(e+5),m=Math.max(30,i.width()+(o?r.width()+10:0)+(a?a.width():0)+35,l?l.width()+20:0)}else m=Math.max(30,i.x()+i.width()+30,l?l.width()+20:0);u.setWidth(m)}),[]),Z=E.hasUI(),[M,I]=(0,o.vc)((()=>{const e=u.inputPinExts,t=u.inputPinsInModel,n=u.outputPinExts,o=u.outputPinsInModel,i=u.outputPinNexts;return[u.inputPins.length+(e?e.length:0)+(t?t.length:0),u.outputPins.length+(n?n.length:0)+(o?o.length:0)+(i?i.length:0)]}));(0,r.useLayoutEffect)((()=>{F(M,I,A,w)}),[A,E.title,u.configPins.length,M,I,w]);const P=[0,I<=0?10:0,I<=0?10:0,0],N=null===(t=u.ioProxyForCall)||void 0===t?void 0:t.frame,T=E.title||N.title,O=(0,o.vc)((()=>u.isVisible()?1:.3
//!hasUI||Arrays.length(model.getInputsAll())
)),D=u.style;let S=D.width,$=D.height;return null==S&&(S=10),null==$&&($=10),a().createElement(m.Group,{ref:e=>{e&&(u.$el=e)},opacity:O,x:D.left,y:D.top,width:S,height:$,onClick:(0,o.Ft)(f).stop,onContextMenu:(0,o.Ft)().stop.prevent,_onMouseDown:(0,o.Ft)((e=>{(0,l.uG)(e,n)})).stop,_onError_:(e,t)=>{console.error(e),v.error(`组件异常:${e.message}`,e.stack.replace(/\/n/gi,"<br/>"))}},a().createElement(m.Rect,{width:S,height:$,x:.5,y:.5,fill:"#f4f8ee",stroke:C?"#FF0000":u.state.isFocused()?d.Z.colorPrimary:"#777",strokeWidth:u.state.isFocused()?2.5:1,dash:C?[3,3]:null,cornerRadius:P}),a().createElement(a().Fragment,null,a().createElement(m.Group,{x:15,ref:e=>{}},b?a().createElement(m.Image,{src:b,maxWidth:14,y:-3}):null,a().createElement(m.Text,{text:T,x:b?17:0,y:0,fontSize:10,fill:C?"#FF0000":"#777",ref:e=>{e&&(k.current.titleNode=e)}}),w?a().createElement(m.Text,{text:w,x:(b?17:0)+12*T.length,y:0,fontSize:10,fill:"#BBB",ref:e=>{e&&(k.current.fromNode=e)}}):null),A?a().createElement(m.Text,{text:A.length>50?A.substring(0,50)+" ..":A,ref:e=>{e&&(k.current.descNode=e)},x:8,fontSize:10,fill:"#AAA"}):null),a().createElement(m.Group,{x:-7,y:10},a().createElement(l.kq,{model:u,context:g})),a().createElement(m.Group,{x:S+8,y:10},a().createElement(l.yC,{model:u})))}function f(e){const{viewContext:t,model:n}=(0,o.N7)(l.QU),i=n.diagramModel.focusedComAry;(!i||i.length<=1)&&t.emitComponent.focus(n)}},83015:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(83446),i=n(90359),r=n.n(i),a=n(8904),l=n(3005),s=n(18350),c=n(46913),d=n(40635),m=n(39920),p=n(45444),u=n(63179);function f({highlight:e}){var t;const n=(0,o.N7)(a.QU,{from:"parents"}),{model:f,comDef:g,viewContext:y}=n,{emitWindowEvents:x,context:v,emitLogs:b}=y,E=y.getCurDiagram(),C=null==E?void 0:E.parent;(0,i.useMemo)((()=>{f.getConfigs=function(){return(0,l.U)(n)},f.getListeners=function(){if(v.isDesnMode())return(0,s.U)(n)},f.getAssist=()=>(0,p.Z)(n),f.getCooperations=function(){return f}}),[]);const w=(0,i.useMemo)((()=>{const e=g.icon;if(e&&(e.toUpperCase().startsWith("HTTP")||e.startsWith("data:image/")))return e}),[]);let A;n.errorMsg?A=n.errorMsg:(v.isDebugMode()||C&&C.debuggable)&&(A=null===(t=f._exeInfo)||void 0===t?void 0:t.errorMsg);const k=(0,i.useRef)({titleNode:void 0,fromNode:void 0,refNode:void 0,descNode:void 0}),F=f.isVar(),Z=f.isFrameIn(),M=f.isFrameOut(),[I,P]=(0,o.vc)((()=>{const e=f.inputPinExts,t=f.inputPinsInModel,n=f.outputPinExts,o=f.outputPinsInModel,i=f.outputPinNexts;return[f.inputPins.length+(e?e.length:0)+(t?t.length:0)+(f.timerInputPin?1:0),f.outputPins.length+(n?n.length:0)+(o?o.length:0)+(i?i.length:0)]})),N=(0,i.useCallback)(((e,t,n,o)=>{n||delete k.current.descNode;const i=k.current.titleNode,r=k.current.fromNode,a=k.current.refNode,l=k.current.descNode,s=Math.max(e,t);let c=Math.max(20*s+5,25);f.description&&($?c<70&&(c+=10):c<50&&(c+=10));const d=i.height();if(l){const e=l.height()+d+5;let t,n;e+20>c?(t=e+20,n=10):(t=c,n=Math.max((c-e)/2,10)),f.setHeight(t),i.parent.y(n),l.y(n+d+5)}else f.setHeight(c),i.parent.y((c-d)/2+1);let m;if(o||a){let e=i.x()+i.width();r&&(r.x(e+5),e+=r.width()+5),a&&a.x(e+5),m=Math.max(30,i.width()+(o?r.width()+(M?0:10):0)+(a?a.width():0)+35,l?l.width()+20:0)}else m=Math.max(30,i.x()+i.width()+30,l?l.width()+20:0);f.setWidth(m)}),[]),T=f.runtime,O=A||f.description;let D;const S=f.diagramModel;if(f instanceof m.default){const e=f.forkedFrom;e.isGlobalVar()?D="全局 ┛":e.parent&&S.parent!==e.parent&&(D=`${e.parent.title} ┛`)}else S&&!S.isGlobal&&S.parent!==f.parent&&(D=`${f.parent.title} ┛`);if(Z&&1===f.inputPins.length){const e=f.inputPins[0].proxyPinValue;if(e&&e.parent){const t=e.parent;t!==f.parent&&(D=`${t.title} ┛`)}}if(M&&1===f.inputPins.length){const e=f.inputPins[0].proxyPin;if(e&&e.parent){const t=e.parent;t!==f.parent&&(D=`${t.title} ┛`)}}(0,i.useLayoutEffect)((()=>{N(I,P,O,D)}),[O,T.title,f.configPins.length,I,P,D]);const $=T.hasUI(),_=$?3:0;let B=[];B=M?[15,3,3,15]:[I<=0||Z?15:_,P<=0||Z?15:_,P<=0||Z?15:_,I<=0||Z?15:_];const V=(0,o.vc)((()=>f.isVisible()?1:.4
//!hasUI||Arrays.length(model.getInputsAll())
));let R;R=A?"#f6e1e1":$?"#FFF":F?"#ede9f9":Z||M?"#eaf3db":"#FFFDE3";let L=T.title||g.title;F&&(L=`@ ${L}`);const j=f.style;let z=j.width,G=j.height;null==z&&(z=10),null==G&&(G=10);const W=f.state;return r().createElement(d.Group,{ref:e=>{e&&(f.$el=e)},opacity:V,x:j.left,y:j.top,width:z,height:G,onClick:(0,o.Ft)(h).stop,onContextMenu:(0,o.Ft)((e=>{h(e),x.showContextMenu(e,f)})).stop.prevent,onDblClick:(0,o.Ft)((e=>function(e){const{viewContext:t,model:n}=e,{viewModel:o,emitComponent:i}=t;if(n.isVar()){const e=o.searchDiagramByVar(n.forkedFrom);e&&i.reFocus(e)}else t.context.isDebugMode()||n.runtime.hasUI()&&t.emitComponent.sayHi(n.id,"toplView")}(n))).stop,_onMouseDown:(0,o.Ft)((e=>{(0,a.uG)(e,n)})).stop,_onError_:(e,t)=>{console.error(e),b.error(`组件异常:${e.message}`,e.stack.replace(/\/n/gi,"<br/>"))}},r().createElement(d.Rect,{width:z,height:G,x:.5,y:.5,fill:R,stroke:A?"#FF0000":W.isFocused()||W.isHovering()||e?c.Z.colorPrimary:f.isSingleton?"#a59bc4":"#777",strokeWidth:W.isFocused()||W.isHovering()||e?2.5:1,dash:A?[3,3]:null,cornerRadius:B}),r().createElement(r().Fragment,null,r().createElement(d.Group,{x:15,ref:e=>{}},w?r().createElement(d.Image,{src:w,maxWidth:14,y:-3}):null,r().createElement(d.Text,{text:L,x:w?17:0,y:0,fontSize:10,fill:A?"#FF0000":"#777",ref:e=>{e&&(k.current.titleNode=e)}}),D?r().createElement(d.Text,{text:D,x:(w?17:0)+12*L.length,y:0,fontSize:10,fill:"#BBB",ref:e=>{e&&(k.current.fromNode=e)}}):null),O?r().createElement(d.Text,{text:O.length>50?O.substring(0,50)+" ..":O,ref:e=>{e&&(k.current.descNode=e)},x:8,fontSize:10,fill:"#AAA"}):null),r().createElement(d.Group,{x:-7,y:10},r().createElement(a.kq,{model:f,context:v})),r().createElement(d.Group,{x:z+8,y:10},r().createElement(a.yC,{model:f})),T.upgrade?r().createElement(d.Circle,{x:z-8,y:G-8,width:11,height:11,fill:"#FF0000",stroke:"#FFF",strokeWidth:3}):null,r().createElement(u.Z,{model:f}))}function h(e){const{viewContext:t,model:n}=(0,o.N7)(a.QU),i=n.diagramModel.focusedComAry;(!i||i.length<=1)&&t.emitComponent.focus(n)}},92208:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(83446),i=n(79127),r=n(90359),a=n.n(r),l=n(8904),s=n(3005),c=n(18350),d=n(46913),m=n(40635),p=n(63179);function u(){var e,t;const n=(0,o.N7)(l.QU,{from:"parents"}),{model:u,comDef:h,context:g,viewContext:{emitWindowEvents:y,emitSnap:x,emitLogs:v}}=n;(0,r.useMemo)((()=>{u.getConfigs=function(){return(0,s.U)(n)},u.getListeners=function(){if(g.isDesnMode())return(0,c.U)(n)},u.getCooperations=function(){return u}}),[]);const b=(0,r.useMemo)((()=>h.icon&&h.icon.toUpperCase().startsWith("HTTP")?h.icon:i.zV),[]);(0,o.vc)((()=>{if(u.ioProxyForCall&&u.ioProxyForCall.frame){const e=u.ioProxyForCall,t=e.frame;if(!t)return;const n=u.inputPins[0]||u.inputPinsInModel[0];let o=t.inputPins.find((e=>e.hostId===n.hostId));if(n&&!o&&"open"===n.hostId&&(o=t.inputPins.find((e=>"params"===e.hostId))),!n||!o)return void(u._exeInfo={errorMsg:"关联了错误的场景"});n.schema=o.schema,e._inputs&&Object.keys(e._inputs).forEach((n=>{const o=e._inputs[n],i=t.inputPins.find((e=>e.hostId===o));if(i&&!u._inputPins.find((e=>e.hostId===n))){u.add_InputPin({hostId:n,title:i.title,schema:i.schema}).proxyPin=i}})),t.outputPins.forEach((e=>{if(!u.outputPinsInModel.find((t=>t.hostId===e.hostId))&&e.conAry.length>0){u.addOutputPinInModel({hostId:e.hostId,title:e.title,schema:e.schema,deletable:!0}).proxyForPin=e}}));const i=u.outputPinsInModel.filter(((e,n)=>{const o=t.outputPins.find((t=>t.hostId===e.hostId));return!o||o.conAry.length<=0}));i.length>0&&i.forEach((e=>{e.destroy(),u.removeOutputPin(e.hostId)}))}}));let E=null===(e=u._exeInfo)||void 0===e?void 0:e.errorMsg;if(u.ioProxyForCall&&u.ioProxyForCall.frame){const e=u.ioProxyForCall.frame;(!e||e.hadDestroyed()||e.diagramAry.length<=0)&&(E="已删除")}const C=(0,r.useRef)({titleNode:void 0,descNode:void 0}),w=(0,r.useCallback)((()=>{const e=u.style;let t=60;C.current.titleNode&&(t=Math.max(t,C.current.titleNode.width()+40)),C.current.titleNode&&(t=Math.max(t,C.current.titleNode.width()+40));const n=C.current.descNode;if(n){t=Math.max(t,n.width()+10);const o=n.height()+10+n.y();o>e.height&&u.setHeight(Math.round(o))}u.setWidth(t)}),[]);(0,r.useLayoutEffect)(w,[]);const A=u.runtime.hasUI(),[k,F]=(0,o.vc)((()=>{var e;const t=g.isDebugMode()&&(null===(e=u._exeInfo)||void 0===e?void 0:e.errorMsg),o=u.inputPinExts,i=u.inputPinsInModel,r=u.outputPinExts,a=u.outputPinsInModel,l=u.outputPinNexts,s=u.inputPins.length+(o?o.length:0)+(i?i.length:0),c=u.outputPins.length+(r?r.length:0)+(a?a.length:0)+(l?l.length:0),d=Math.max(s,c);let m=Math.max(20*d+5,t?100:25);u.description&&(A?m<70&&(m+=10):m<50&&(m+=10));const p=m/2+(u.description?-11:-4);n.titleY=p;const f=C.current.descNode;if(f){const e=f.height()+10+f.y();e>m?u.setHeight(Math.round(e)):u.setHeight(m)}else u.setHeight(m);return[s,c]})),Z=(u.isAutoRun(),[0,F<=0?10:0,F<=0?10:0,0]),M=null===(t=u.ioProxyForCall)||void 0===t?void 0:t.frame,I=(null==M?void 0:M.diagramAry.length)>0?M.diagramAry[0].title:u.runtime.title,P=u.style;let N=P.width,T=P.height;return null==N&&(N=10),null==T&&(T=10),a().createElement(m.Group,{ref:u.set$elOnce,x:P.left,y:P.top,width:N,height:T,onClick:(0,o.Ft)(f).stop,onDblClick:(0,o.Ft)((e=>function(e){const{model:t,viewContext:n}=e,{emitScenes:o}=n,i=t.ioProxyForCall;i&&i.frame&&o.switch(i.frame.id)}(n))).stop,onContextMenu:(0,o.Ft)((e=>{f(e),y.showContextMenu(e)})).stop.prevent,_onMouseDown:e=>{(0,l.uG)(e,n)},_onError_:(e,t)=>{console.error(e),v.error(`组件异常:${e.message}`,e.stack.replace(/\/n/gi,"<br/>"))}},a().createElement(m.Rect,{width:N,height:T,x:.5,y:.5,fill:A?"#FFF":"#f4f8ee",stroke:E?"#FF0000":u.state.isFocused()?d.Z.colorPrimary:"#777",strokeWidth:u.state.isFocused()?2.5:1,dash:E?[3,3]:null,cornerRadius:Z}),E?a().createElement(m.Text,{text:`${E}`,width:N-10,y:8,x:5,fontSize:10,fill:"#FF0000",wrap:"char",align:"center"}):a().createElement(a().Fragment,null,a().createElement(m.Group,{y:n.titleY,ref:e=>{e&&e.x((N-(C.current.titleNode.width()+(A?20:0)))/2)}},A?a().createElement(m.Image,{src:b,maxWidth:16,y:-5}):null,a().createElement(m.Text,{text:I,x:A?17:0,y:0,fontSize:10,fill:"#777",ref:e=>{e&&(C.current.titleNode=e)}})),u.description?a().createElement(m.Text,{text:u.description.length>50?u.description.substring(0,50)+" ..":u.description,ref:e=>{e&&(C.current.descNode=e)},y:n.titleY+14,x:5,fontSize:10,fill:"#AAA"}):null),a().createElement(m.Group,{x:-7,y:10},a().createElement(l.kq,{model:u})),a().createElement(m.Group,{x:N+7,y:10},a().createElement(l.yC,{model:u})),a().createElement(p.Z,{model:u}))}function f(e){const{viewContext:t,model:n}=(0,o.N7)(l.QU),i=n.diagramModel.focusedComAry;(!i||i.length<=1)&&t.emitComponent.focus(n)}},90890:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(83446),i=n(90359),r=n(8904),a=n(3005),l=n(18350),s=n(39920),c=n(40635),d=n(90359);function m(){const e=(0,o.N7)(r.QU,{from:"parents"}),{model:t,comDef:n,context:m}=e;(0,i.useEffect)((()=>{t.getConfigs=function(){return(0,a.U)(e)},t.getListeners=function(){if(m.isDesnMode())return(0,l.U)(e)}}),[]);const f=t instanceof s.default&&t.isStartInDiagram()?"start":void 0;return d.createElement(c.Group,{ref:e=>e&&(t.$el=e),onClick:(0,o.Ft)(p).stop,onDoubleClick:(0,o.Ft)(u).stop},d.createElement(r.yC,{model:t,type:f}))}function p(e){const{model:t,emitItem:n,emitSnap:i}=(0,o.N7)(r.QU);n.focus(t)}function u(e){const{model:t,comDef:n,context:i,emitItem:a,emitSnap:l}=(0,o.N7)(r.QU);i.isDebugMode()||i.isDesnMode()&&a.focusFork(t)}},44943:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(83446),i=n(79127),r=n(90359),a=n.n(r),l=n(50011),s=n(89365),c=n(23037),d=(n(46383),n(40635)),m=n(46913),p=n(71442),u=n(39740),f=n(44244),h=n(22270),g=n(56258),y=n(67766);class x{}function v({model:e}){const t=(0,o.N7)(u.Z,{from:"parents"}),n=(0,o.mA)(x,(n=>n({viewContext:t,model:e})),{to:"children"}),{context:i,hintConnection:c}=t;if((0,r.useMemo)((()=>{e.getListeners=function(){if(i.isDesnMode())return(0,l.M)(n)},e.getConfigs=function(){return(0,s.U)(n)}}),[]),(0,r.useEffect)((()=>{e.state.isFocused()&&i.isDesnMode()&&(i.focusOn(e)||e.state.enable())}),[i.getMode()]),e.isTemp||e.startPin&&e.finishPin)return a().createElement(b,{conContext:n})}function b({conContext:e}){var t;const{model:n,viewContext:l}=e,{context:s,hintConnection:u,emitComponent:x,emitLogs:v}=l,b=null===(t=n.finishPin)||void 0===t?void 0:t.isTypeOfTimer(),C=(0,o.vc)((()=>{const e=n.finishPin,t=n.startPo,o=n.finishPo;if(o){const i={x:t.x/1,y:t.y/1},r={x:o.x/1,y:o.y/1},a={x:i.x,y:i.y},l={x:r.x,y:r.y},s=70;if(e){if(n.isBreakpoint){const e=[],t=[],n=l.x-(l.x-a.x)/2,o=l.y-(l.y-a.y)/2;return e.push(`M${i.x} ${i.y} L${a.x} ${a.y}`),e.push(`C${a.x+s/2} ${a.y} ${n} ${o} ${n} ${o}`),e.push(`L${n} ${o}`),t.push(`M${n} ${o} L${n} ${o}`),t.push(`C${n} ${o} ${l.x-s/2} ${l.y} ${l.x} ${l.y}`),t.push(`L${r.x} ${r.y}`),[e.join(" "),t.join("")]}{const e=[];return e.push(`M${i.x} ${i.y} L${a.x} ${a.y}`),e.push(`C${a.x+s} ${a.y} ${l.x-s} ${l.y} ${l.x} ${l.y}`),e.push(`L${r.x} ${r.y}`),e.join(" ")}}{const e=[];return e.push(`M${i.x} ${i.y}`),e.push(`C${a.x+20} ${a.y} ${l.x-20} ${l.y} ${l.x} ${l.y}`),e.push(`L${r.x} ${r.y}`),e.join(" ")}}}));(0,o.vc)((()=>{n.state.isFocused()&&u(n)}));const w=(0,r.useCallback)((e=>{const t=n.startPin,r=n.finishPin;if(t&&r){let n,a;if(n=t.proxyForPin?t.proxyForPin.schema:t.schema,!n)return;if(a=r.proxyForPin?r.proxyForPin.schema:r.schema,!a)return;const l=t.parent,s=r.parent;if(l instanceof h.n&&s instanceof h.n){if(l===s)return;const e=l.forkedFrom,t=s.forkedFrom;if(e&&e===s)return;if(e&&t&&e===t)return}(n.type!==a.type||e)&&(!t._schemaFollow||(0,f.ux)(a)||(0,f.ft)(n,a)||(0,c.Ts)(a)||t instanceof y.Z||requestAnimationFrame((e=>{if(t instanceof g.default&&1===t.forkedFrom.conAry.length||!(t instanceof g.default)&&1===t.conAry.length){const e=(0,o.d9)(a);t.parent instanceof h.n?x.updatePinSchema("outputs",t.parent.id,t.hostId,e):x.updateFramePinSchema("outputs",t,e),t.isTypeOfConfig()&&r.isTypeOfConfig()&&(t.editor=r.editor),v.info(`更新了输出项 ${t.title} 的类型描述.`)}})),!r._schemaFollow||(0,f.ux)(n)||(0,f.ft)(n,a)||(0,c.Ts)(n)||requestAnimationFrame((e=>{if(r instanceof g.default&&1===r.forkedFrom.conAry.length||!(r instanceof g.default)&&1===r.conAry.length){const e=(0,o.d9)(n),t=r.parent;t instanceof h.n?t.runtime.def.namespace===i.Vm.coms.frameOutput?x.updateFramePinSchema("inputs",r.proxyPin,e):x.updatePinSchema("inputs",t.id,r.hostId,e):r.schema=e,v.info(`更新了输入项 ${r.title} 的类型描述.`)}})))}}),[]);(0,o.vc)((()=>{if(s.isDebugMode()||n.isTemp)return;let e;const t=n.startPin,o=n.finishPin;if(t&&o){let i,r;if(i=t.proxyForPin?t.proxyForPin.schema:t.schema,!i)return;if(r=o.proxyForPin?o.proxyForPin.schema:o.schema,!r)return;if("any"===i.type)return void(n.errorInfo&&(n.errorInfo=void 0));if(!(0,f.ft)(i,r)){if((0,f.YH)(i,r))return void(n.errorInfo&&(n.errorInfo=void 0));e="Error schema",w(!0)}t.parent instanceof h.n&&t.parent.hasError()&&(e="Error Component");const a=o.parent;a instanceof h.n&&a.hasError()&&(e="Error Component"),n.errorInfo=e}})),(0,r.useLayoutEffect)((()=>{setTimeout(w)}),[]);const A=(0,o.vc)((()=>{if(s.isDebugMode()&&n.exe)return!0}));let k=1;const F=(0,o.vc)((()=>{const e=n.startPin,t=n.finishPin,o=e.schema,i=(0,p.a0)(o.type);let r;if(s.isDebugMode()?n.exe&&(r=m.Z.colorPrimary):n.state.isFocused()&&(r=m.Z.colorPrimary),r)return r;if(!t)return i.strokeColor;const a=t.schema;if(o.type!==a.type&&"any"!==a.type){const e=(0,p.a0)(a.type),t=n.startPo,o=n.finishPo;r=document.createElement("canvas").getContext("2d").createLinearGradient(t.x,t.y,o.x,o.y),r.addColorStop(0,i.strokeColor),r.addColorStop(.4,i.strokeColor),r.addColorStop(.6,e.strokeColor),r.addColorStop(1,e.strokeColor)}else r=i.strokeColor;return r})),Z=(0,o.vc)((()=>{let e=1;return s.isDebugMode()?n.exe&&(e=2):n.state.isFocused()&&(e=2),e}));let M;n.isIgnored&&(k=.2),n.isIgnored?M=[5,5]:n.errorInfo&&!A&&(M=[3,3]);const I=(0,o.vc)((()=>n.isVisible()?1:.2)),P=(0,r.useCallback)((()=>{l.emitComponent.focus(n)}),[]),N=e=>({data:e,stroke:n._breakpointActive?m.Z.colorPrimary:F,opacity:k,hitStrokeWidth:20,dash:M,strokeWidth:n._breakpointActive?2:Z,onClick:(0,o.Ft)(P).stop.prevent,onContextMenu:(0,o.Ft)((e=>{P(e),l.emitWindowEvents.showContextMenu(e)})).stop.prevent,onMouseDown:(0,o.Ft)().stop});return b?a().createElement(d.Group,{ref:n.set$elOnce,listening:!n.isTemp,opacity:I},Array.isArray(C)?a().createElement(a().Fragment,null,a().createElement(d.Path,Object.assign({},N(C[0]),{dash:[15,3,3,3]})),a().createElement(d.Path,Object.assign({},N(C[1]),{dash:[15,3,3,3]}))):a().createElement(d.Path,Object.assign({},N(C),{dash:[15,3,3,3]})),a().createElement(E,{model:n,tvCtx:l})):a().createElement(d.Group,{ref:n.set$elOnce,listening:!n.isTemp,opacity:I},Array.isArray(C)?a().createElement(a().Fragment,null,a().createElement(d.Path,Object.assign({},N(C[0]))),a().createElement(d.Path,Object.assign({},N(C[1])))):a().createElement(d.Path,Object.assign({},N(C))),a().createElement(E,{model:n,tvCtx:l}))}function E({model:e,tvCtx:t}){const n=(0,r.useRef)({}),i=(0,r.useCallback)((()=>{t.emitComponent.focus(e)}),[]),l=(0,o.vc)((()=>{var r;const l=[];if(e.isBreakpoint){const s=e.startPo,c=e.finishPo;if(c){const e=Math.min(s.x,c.x),p=Math.min(s.y,c.y),u=e+Math.abs(s.x-c.x)/2,f=p+Math.abs(s.y-c.y)/2;l.push(a().createElement(d.Circle,{key:"c",x:u,y:f,width:15,fill:(null===(r=t.debugger)||void 0===r?void 0:r._ignoreAll)?"#EEE":m.Z.colorPrimary,onClick:(0,o.Ft)(i).stop.prevent,listening:!1,onMouseDown:(0,o.Ft)().stop})),l.push(a().createElement(d.Circle,{key:"c1",listening:!1,ref:e=>{e&&(n.current.el=e)},x:u,y:f,width:15})),l.push(a().createElement(d.Text,{key:"t",listening:!1,text:"|",x:u-2,y:f-5,fontSize:10,fontStyle:600,fill:"#FFF",opacity:.9}))}}return l}));return(0,r.useEffect)((()=>{const t=n.current;if(e._breakpointActive){const e=t.el;let n=15,o=1;e.fill(m.Z.colorPrimary);const i=new d.Konva.Animation((t=>{e.width(n+=.5),e.opacity(o-=.02),n>30&&(n=15,o=1)}),e.getLayer());i.start(),t.anim=i}else t.anim&&(t.anim.stop(),t.el.fill(),t.el.width(15),t.el.opacity(1))}),[e._breakpointActive]),l}},92235:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(44943),i=n(40635),r=n(90359),a=n(90359);function l({diagramModel:e}){const t=(0,r.useMemo)((()=>e.conAry.map(((e,t)=>a.createElement(o.Z,{key:e.id,model:e})))),[e.conAry.length]);return a.createElement(i.Group,null,t)}},89365:(e,t,n)=>{n.d(t,{U:()=>i});var o=n(79127);function i(e){const{model:t,viewContext:n}=e,{emitComponent:i,emitSnap:a,context:l}=n;let s=[];const c={model:t,emitSnap:a},d=new o.Af.Category("连接");s.push(d);const m=new o.Af.Group;d.addGroup(m),m.addItem(r(c,{title:"标题",type:"text",options:{readOnly:!0},value:{get:()=>t.title,set:(e,n)=>t.title=n}}));t.startPin,t.finishPin;if(l.isDebugMode()){const e=new o.Af.Group;d.addGroup(e),e.addItem(r(c,{title:"调试-当前值",type:"textarea",options:{readOnly:!0,style:{height:400}},value:{get(){var e;const n=t.startPin,o=n.exe||(null===(e=n.forkedFrom)||void 0===e?void 0:e.exe);if(o){const e=o.val;return void 0!==e?JSON.stringify(e,((e,t)=>void 0===t?null:t),4):"[空]"}}}}))}return s}function r(e,t,n){const{model:i,emitSnap:r}=e,a={};if("function"==typeof t)return new o.Af.FunctionItem((function(){t(a)}));if("object"==typeof t){let e=t.options;return"function"==typeof e&&(e=t.options(a)),new o.Af.EditItem({title:t.title,type:t.type,description:t.description,value:function(){let e,o=!1;return{get:()=>(o||(o=!0,e=(t.value&&t.value.get||(()=>{}))(a),e=null==e?null:e),e),set(e){o=!1;const l=r.start("Change value",{target:i});try{(t.value&&t.value.set||(()=>{}))(a,e),l.commit(),n&&Promise.resolve().then(n)}catch(e){throw e}}}}(),options:e})}throw new Error("Invalid typeof editor(function or object expect)")}},50011:(e,t,n)=>{function o(e){const{model:t,viewContext:n}=e,{emitComponent:o,emitSnap:i}=n;return[{get title(){return t.isBreakpoint?"取消断点":"添加断点"},exe(){const e=i.start("setBreakpoint",{target:t});t.isBreakpoint=!t.isBreakpoint,e.commit()}},{get title(){return t.isIgnored?"取消 调试时忽略":"调试时忽略"},exe(){const e=i.start("setIsIgnored",{target:t});t.isIgnored=!t.isIgnored,e.commit()}},null,{title:"删除",keys:["Backspace","Delete"],exe:()=>{const e=i.start("itemDelete",{target:t});o.delete(t),o.disConnected(t),o.focus(null),t.parent.connections.changed(),e.commit()}}]}n.d(t,{M:()=>o})},36449:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(9387),i=n(83446),r=n(23037),a=n(79127),l=n(85083),s=n(62007),c=n(90359),d=n(39740),m=n(6563),p=n(28815),u=n(22270),f=n(90359);function h({logger:e}){const t=(0,i.N7)(d.Z,{from:"parents"}),n=(0,i.mA)(m.Z,(e=>{e({tvCtx:t})})),[r,h]=(0,c.useState)([]),[y,x]=(0,c.useState)([]);(0,i.CV)(a.cA.Logs,(e=>{function t(e,...t){const o=[];let i,r,a;if(t.forEach((e=>{"function"!=typeof e?o.push(e):void 0===i?i=e():void 0===r?r=e:a=e})),o){const t={id:n.getCurLogId(),method:e,data:o,context:i,onClick(e){r&&r()}};requestAnimationFrame((e=>{h((e=>(e.length>50&&e.shift(),[...e,t])))}))}}e({info(e,n,o){t("info",...arguments)},warn(e,n,o){t("warn",...arguments)},error(e,n,o){t("error",...arguments)}})}),{from:"parents"}),(0,c.useEffect)((()=>{y.length>0&&n.height<100&&(n.height=200)}),[y.length]),(0,c.useEffect)((()=>{if(n.filter){if(n.filter instanceof u.n){const e=r.filter((e=>{if(e.context){const{from:t}=e.context;if(n.filter===t)return!0}}));x(e),setTimeout(n.scroll)}}else x(r),setTimeout(n.scroll)}),[n.filter,r]);const v=(0,c.useCallback)((()=>{h([]),x([]),n.clear()}),[]);return n.openConsole?f.createElement(f.Fragment,null,f.createElement("div",{className:o.Z.sperV,onMouseDown:g},f.createElement("div",null)),f.createElement("div",{className:o.Z.console,style:{height:n.height},ref:e=>e&&(n.viewEle=e),onClick:n.hideFilterPop},f.createElement("div",{className:o.Z.title},f.createElement("span",{className:o.Z.tt},"信息"),f.createElement(p.Z,{ctx:n}),f.createElement("span",{className:o.Z.clearIcon,style:{display:n.height<31?"none":""},onClick:v,"data-mybricks-tip":"清除日志"},l.UZ)),f.createElement("div",{className:o.Z.logs,ref:e=>e&&(n.logsEle=e)},f.createElement(s.Mn,{logs:y,variant:"light"})))):null}function g(e){const t=(0,i.N7)(m.Z);let{x:n,y:o,w:a,h:l}=(0,r.bt)(t.viewEle);(0,i.qw)(e,(({po:{x:e,y:n},epo:{ex:o,ey:i},dpo:{dx:r,dy:a}},s)=>{"moving"==s&&(t.height=Math.max(l-=a,30))}))}},6563:(e,t,n)=>{n.d(t,{Z:()=>o});class o{constructor(){this.logCount=0,this.height=30,this.openConsole=!0,this.showFilter=!1}getCurLogId(){return"_log_"+this.logCount++}setFilter(e){this.showFilter=!1,this.filter=e}clearFilter(){this.filter=void 0,this.showFilter=!1}showFilterPop(){this.showFilter||this.tvCtx.context.registerBlur((()=>{this.showFilter=!1})),this.showFilter=!this.showFilter}hideFilterPop(){this.showFilter=!1}clear(){this.tvCtx.viewModel.clearDebugHints(),this.height=30}scroll(){setTimeout((e=>{this.logsEle&&this.logsEle.scrollHeight>this.logsEle.clientHeight&&(this.logsEle.scrollTop=this.logsEle.scrollHeight+100)}))}}},28815:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(90359),i=n.n(o),r=n(95017),a=n(83446),l=n(85083);function s({ctx:e}){const{curFrameModel:t,context:n}=e.tvCtx,[s,c]=(0,o.useState)({}),d=(0,o.useCallback)((t=>{e.setFilter(t)}),[]),m=(0,o.useCallback)((e=>{if(e.comAry)return i().createElement("div",{className:r.Z.slotItem},i().createElement("div",{className:r.Z.slotTitle},e.title),i().createElement("div",{className:r.Z.coms},e.comAry.map((e=>{const t=[];e.frames&&e.frames.forEach((e=>{t.push(m(e))}));const o=n.getComDef(e.runtime.def);let l,s=null==o?void 0:o.icon;return s&&"string"==typeof s&&(s.toUpperCase().startsWith("HTTP")||s.startsWith("data:image/"))&&(l=s),i().createElement("div",{className:`${r.Z.comItem} ${t.length>0?r.Z.withFrames:""}`},i().createElement("div",{className:r.Z.comTitle,onClick:(0,a.Ft)((t=>{d(e)})).stop},i().createElement("span",{className:r.Z.icon},l?i().createElement("img",{src:l}):null),i().createElement("label",null,e.runtime.title)),t.length>0?i().createElement("div",{className:r.Z.slots},t):null)}))))}),[]),p=(0,o.useCallback)((()=>{e.clearFilter()}),[]);let u;return(0,o.useMemo)((()=>{if(e.showFilter&&!s[t.id]){const e=m(t);c(Object.assign(Object.assign({},s),{[t.id]:e}))}}),[t,e.showFilter]),e.showFilter&&(u=s[t.id]),i().createElement("div",{className:r.Z.filters,onClick:(0,a.Ft)(e.showFilterPop).stop},e.filter?i().createElement("div",{className:r.Z.selected},i().createElement("label",null,"仅显示"),i().createElement("span",null,e.filter.runtime.title),i().createElement("span",{className:r.Z.icon,onClick:(0,a.Ft)(p).stop},l.HG)):i().createElement("div",{className:r.Z.showAll},i().createElement("label",null,"显示全部"),i().createElement("span",{className:r.Z.icon},l.K5)),u?i().createElement("div",{className:r.Z.popMenu},i().createElement("div",{className:r.Z.tt},"选择组件过滤"),i().createElement("div",{className:r.Z.body},u)):null)}},85083:(e,t,n)=>{n.d(t,{HG:()=>r,K5:()=>a,UZ:()=>i});var o=n(90359);const i=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},o.createElement("path",{d:"M916.138667 198.4 919.296 195.242667 828.757333 104.704 825.6 107.861333C738.901333 40.533333 630.272 0 512 0 229.205333 0 0 229.290667 0 512 0 630.272 40.448 738.901333 107.861333 825.6L104.704 828.757333 195.157333 919.296 198.4 916.053333C285.013333 983.466667 393.642667 1024 512 1024 794.709333 1024 1024 794.709333 1024 512 1024 393.728 983.466667 285.098667 916.138667 198.4ZM73.130667 512C73.130667 269.994667 269.994667 73.130667 512 73.130667 606.634667 73.130667 721.578667 112.725333 793.344 163.84L177.493333 779.52C126.378667 707.84 73.130667 606.634667 73.130667 512ZM512 950.869333C417.365333 950.869333 307.029333 897.536 235.178667 846.421333L855.637333 226.133333C906.666667 297.898667 950.869333 417.365333 950.869333 512 950.869333 754.005333 754.005333 950.869333 512 950.869333Z",fill:"#272636"})),r=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.createElement("path",{d:"M810 273.596L750.404 214 512 452.404 273.596 214 214 273.596 452.404 512 214 750.404 273.596 810 512 571.596 750.404 810 810 750.404 571.596 512z"})),a=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",style:{maxWidth:14}},o.createElement("path",{d:"M602.496 609.834667a128 128 0 0 1-180.992 0L206.634667 394.965333a42.666667 42.666667 0 0 1 60.330666-60.330666l214.869334 214.869333a42.666667 42.666667 0 0 0 60.330666 0l214.869334-214.869333a42.666667 42.666667 0 0 1 60.330666 60.330666l-214.869333 214.869334z",fill:"#515151"}))},98057:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n(36449).Z},24994:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(18132),i=n(90359),r=n.n(i),a=n(83446),l=n(39740);function s(){const e=(0,a.N7)(l.Z,{from:"parents"}).showEditorText;if(e)return r().createElement(o.H4,{x:e.x,y:e.y,value:e.value})}},98820:(e,t,n)=>{n.d(t,{NH:()=>y,V4:()=>b,ZP:()=>x,zC:()=>E});var o=n(83446),i=n(90359),r=n.n(i),a=n(22270),l=n(79127),s=n(94060),c=n(37861),d=n(23037),m=n(71442),p=n(66481),u=n(39740),f=n(13267),h=n(49520),g=n(78176);class y{}function x({model:e,position:t}){const n=(0,o.N7)(u.Z,{from:"parents"}),{viewModel:d,emitComponent:m,emitView:x,getCurDiagram:v}=n;(0,o.mA)(y,(t=>t({viewCtx:n,model:e})),{to:"children"}),(0,o.CV)(l.cA.Component,(t=>{t({delete(t){t instanceof a.n&&e.delete(t),m.delete(t)}})}),{from:"children"});const b=(0,i.useCallback)((()=>{}),[]);if((0,o.CV)(l.cA.Diagram,(e=>e({anchor(){setTimeout(b)}})),{from:"children"}),(0,i.useLayoutEffect)((()=>{const t=e.style;t.width||(t.width=700)}),[]),e.isGlobal||e.showIO){if(e.showIO)return r().createElement(s.Z,{position:t})}else{if(e.isVar)return r().createElement(g.Z,{position:t});if(e.isFn)return r().createElement(p.Z,{position:t});if(e.startWithCom)return r().createElement(c.Z,{position:t});if(e.startWithJoint)return r().createElement(f.Z,{position:t});if(e.startWithOutput)return r().createElement(h.Z,{position:t})}}const v={current:void 0};function b(e,{model:t,viewCtx:n}){if(!o.qw.event&&(t.parent.blur(),t.state.enable(),n.emitComponent.reFocus(t),e&&t.showIO)){const{viewModel:o}=n,i=(new Date).getTime();if(v.current){if(i-v.current<200){v.current=void 0,n.assitWith=void 0;const i=t.$el.getStage().container(),r=(0,d.bt)(i);n.assitWith={diagramModel:t,type:"outputs",position:{x:e.evt.clientX-o.style.left-r.x-m.nM,y:e.evt.clientY-o.style.top-r.y-m.nM}}}else v.current=i}else v.current=i}}function E(e){const{model:t,viewCtx:n}=e._temp_||(0,o.N7)(y),{viewModel:i,context:r}=n;if(!r.isDesnMode())return;n.assitWith=void 0;const a=t.$el.getStage().container(),l=(0,d.bt)(a);n.assitWith={diagramModel:t,type:"outputs",position:{x:e.evt.clientX-i.style.left-l.x-m.nM,y:e.evt.clientY-i.style.top-l.y-m.nM}}}},66481:(e,t,n)=>{n.d(t,{Z:()=>b});var o=n(83446),i=n(90359),r=n.n(i),a=n(2102),l=n(92235),s=n(44943),c=n(8904),d=n(39920),m=n(98820),p=n(33291),u=n(40635),f=n(30665),h=n(95827),g=n(94474),y=n(34166),x=n(81555),v=n(43847);function b(){const e=(0,o.N7)(m.NH,{from:"parents"}),{viewCtx:t,model:n}=e,b=n.style;(0,i.useMemo)((()=>{n.getConfigs=()=>(0,h.Z)(n,t),n.getListeners=()=>(0,v.C)(e),n.getCooperations=()=>n}),[]);const E=(0,o.vc)((()=>{let e=0;const t=[];return n.parent.inputPins&&n.parent.inputPins.forEach(((n,o)=>{e+=50,t.push(r().createElement(a.ZP,{key:n.id,model:n,type:"frameIO",order:o}))})),t})),C=(0,o.vc)((()=>{let e=0;const t=[];return n.parent.outputPins&&n.parent.outputPins.forEach(((n,o)=>{e+=50,t.push(r().createElement(a.ZP,{key:n.id,model:n,type:"frameIO",order:o}))})),t})),w=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(s.Z,{model:n.conTemp})})),A=(0,o.vc)((()=>{const t=[];return n.groupAry&&n.groupAry.forEach((n=>{t.push(r().createElement(x.Z,{groupModel:n,diagramCtx:e,key:n.id}))})),r().createElement(u.Group,null,t)})),k=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{d.default,e.push(r().createElement(c.ZP,{key:t.renderKey,model:t}))})),e})),F=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},b.visible?(0,f.Q7)(e):void 0))),Z=(0,i.useMemo)((()=>(0,f.tt)(e)),[]);return r().createElement(u.Group,Object.assign({ref:n.set$elOnce,visible:b.visible,width:b.width,height:b.height,onContextMenu:(0,o.Ft)((e=>{(0,m.V4)(null,{model:n,viewCtx:t}),t.emitWindowEvents.showContextMenu(e)})).stop.prevent,onClick:(0,o.Ft)((e=>(0,m.V4)(e,{model:n,viewCtx:t}))).stop},Z),r().createElement(u.Rect,Object.assign({width:(b.width||300)+2,height:b.height+2},F)),r().createElement(g.Z,{title:n.title,style:{color:"#777"}}),r().createElement(u.Group,{clip:{x:0,y:0,width:b.width,height:b.height}},r().createElement(y.Z,null),A,r().createElement(l.Z,{diagramModel:n}),r().createElement(u.Group,{x:50,y:50},E),r().createElement(u.Group,{x:b.width-50,y:50},C),k,w),r().createElement(p.Z,null))}},94060:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(83446),i=n(90359),r=n.n(i),a=n(2102),l=n(92235),s=n(44943),c=n(8904),d=n(39920),m=n(98820),p=n(33291),u=n(40635),f=n(30665),h=n(33001),g=n(94980),y=n(94474),x=n(34166),v=n(81555),b=n(6965);function E(){const e=(0,o.N7)(m.NH,{from:"parents"}),{viewCtx:t,model:n}=e,E=n.parent,C=n.style,w=!E.parent||!n.parent.isParentAFrame();(0,i.useMemo)((()=>{n.getConfigs=()=>E.isTypeOfModule()?(0,g.Z)(n,t):(0,h.Z)(n,t),n.getListeners=()=>(0,b.C)(e),n.getCooperations=()=>n}),[]);const[A,k]=(0,o.vc)((()=>{let e=0,t=0;const n=[];return E.inputPins&&E.inputPins.forEach(((i,l)=>{e+=50,n.push(r().createElement(a.ZP,{key:`${(0,o.Vj)()}`,model:i,type:"frameIO",order:t++}))})),E.inputJoints&&E.inputJoints.forEach(((o,i)=>{e+=50,n.push(r().createElement(a.ZP,{key:i,model:o,type:"frameIO",order:t++}))})),w&&E._inputPins&&E._inputPins.forEach(((i,l)=>{e+=50,n.push(r().createElement(a.ZP,{key:`${(0,o.Vj)()}`,model:i,type:"_frameIO",order:t++}))})),[n,e]})),[F,Z]=(0,o.vc)((()=>{let e=0,t=0;const n=[];return w&&E._outputPins&&E._outputPins.forEach(((i,l)=>{e+=50,n.push(r().createElement(a.ZP,{key:`${(0,o.Vj)()}`,model:i,type:"_frameIO",order:t++}))})),E.outputPins&&E.outputPins.forEach(((o,i)=>{o.isTypeOfEvent()||o.isTypeOfShotcut()||(e+=50,n.push(r().createElement(a.ZP,{key:o.id,model:o,type:"frameIO",order:t++})))})),E.outputJoints&&E.outputJoints.forEach(((o,i)=>{e+=50,n.push(r().createElement(a.ZP,{key:i,model:o,type:"frameIO",order:t++}))})),[n,e]})),M=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(s.Z,{model:n.conTemp})})),I=(0,o.vc)((()=>{const t=[];return n.groupAry&&n.groupAry.forEach((n=>{t.push(r().createElement(v.Z,{groupModel:n,diagramCtx:e,key:n.id}))})),r().createElement(u.Group,null,t)})),P=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{d.default,e.push(r().createElement(c.ZP,{key:t.renderKey,model:t}))})),e})),N=(0,i.useMemo)((()=>(0,f.tt)(e)),[]);(0,i.useLayoutEffect)((()=>{const e=Math.max(k,Z);e>C.height-50&&(n.style.height=e+50)}),[k,Z]);const T=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},C.visible?(0,f.Q7)(e):void 0)));return r().createElement(u.Group,Object.assign({ref:n.set$elOnce,visible:C.visible,width:C.width,height:C.height,onContextMenu:(0,o.Ft)((e=>{(0,m.V4)(null,{model:n,viewCtx:t}),t.emitWindowEvents.showContextMenu(e,n)})).stop.prevent,onClick:(0,o.Ft)((e=>(0,m.V4)(e,{model:n,viewCtx:t}))).stop},N),r().createElement(u.Rect,Object.assign({width:(C.width||300)+2,height:C.height+2},T)),r().createElement(y.Z,{title:n.title||"未命名"}),r().createElement(u.Group,{clip:{x:0,y:0,width:C.width,height:C.height}},r().createElement(x.Z,null),I,r().createElement(l.Z,{diagramModel:n}),M,r().createElement(u.Group,{x:50,y:50},A),r().createElement(u.Group,{x:C.width-50,y:50},F),P),r().createElement(p.Z,null))}},37861:(e,t,n)=>{n.d(t,{Z:()=>b});var o=n(83446),i=n(90359),r=n.n(i),a=(n(23037),n(92235)),l=n(44943),s=n(8904),c=n(39920),d=n(98820),m=n(33291),p=n(40635),u=n(30665),f=n(78048),h=n(94474),g=(n(39740),n(34166)),y=n(81555),x=n(77728),v=n(55593);function b(){const e=(0,o.N7)(d.NH,{from:"parents"}),{viewCtx:t,model:n}=e,b=n.style;(0,i.useMemo)((()=>{n.getConfigs=()=>(0,f.Z)(n,t),n.getListeners=()=>(0,x.C)(e),n.getCooperations=()=>n}),[]);const E=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(l.Z,{model:n.conTemp})})),C=(0,o.vc)((()=>{const t=[];return n.groupAry&&n.groupAry.forEach((n=>{t.push(r().createElement(y.Z,{groupModel:n,diagramCtx:e,key:n.id}))})),r().createElement(p.Group,null,t)})),w=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{n.startWithCom===t?e.push(r().createElement(p.Group,{x:50,y:50,key:t.renderKey},r().createElement(s.ZP,{model:t}))):(c.default,e.push(r().createElement(s.ZP,{key:t.renderKey,model:t})))})),e})),A=(0,i.useMemo)((()=>(0,u.tt)(e)),[]),k=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},b.visible?(0,u.Q7)(e):void 0))),F=(0,o.vc)((()=>{const e=n.title.split(">");if(e.length>0&&n.startWithCom.outputPins.length>0){const t=n.startWithCom.outputPins[0].title;return`${e[0]} > ${t}`}return n.title}));return r().createElement(p.Group,Object.assign({ref:n.set$elOnce,visible:b.visible,width:b.width,height:b.height,onContextMenu:(0,o.Ft)((e=>{(0,d.V4)(null,{model:n,viewCtx:t}),t.emitWindowEvents.showContextMenu(e)})).stop.prevent,onClick:(0,o.Ft)((e=>(0,d.V4)(e,{model:n,viewCtx:t}))).stop},A),r().createElement(p.Rect,Object.assign({width:b.width||300,height:b.height},k)),r().createElement(h.Z,{title:F}),r().createElement(p.Group,{clip:{x:0,y:0,width:b.width,height:b.height}},r().createElement(g.Z,null),C,r().createElement(a.Z,{diagramModel:n}),E,r().createElement(v.Z,null),w),r().createElement(m.Z,null))}},13267:(e,t,n)=>{n.d(t,{Z:()=>x});var o=n(83446),i=n(90359),r=n.n(i),a=n(92235),l=n(44943),s=n(8904),c=n(39920),d=n(98820),m=n(33291),p=n(40635),u=n(30665),f=n(78048),h=n(94474),g=n(2102),y=n(34166);function x(){const e=(0,o.N7)(d.NH,{from:"parents"}),{viewCtx:t,model:n}=e,x=n.style;(0,i.useMemo)((()=>{n.getConfigs=()=>(0,f.Z)(n,t)}),[]);const v=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(l.Z,{model:n.conTemp})})),b=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{c.default,e.push(r().createElement(s.ZP,{key:t.renderKey,model:t}))})),e})),E=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},x.visible?(0,u.Q7)(e):void 0)));return r().createElement(p.Group,{ref:n.set$elOnce,visible:x.visible,width:x.width,height:x.height,onContextMenu:(0,o.Ft)(d.zC).prevent,onClick:(0,o.Ft)((e=>(0,d.V4)(e,{model:n,viewCtx:t}))).stop},r().createElement(p.Rect,Object.assign({width:x.width||300,height:x.height},E)),r().createElement(h.Z,{title:n.title}),r().createElement(p.Group,{clip:{x:0,y:0,width:x.width,height:x.height}},r().createElement(y.Z,null),r().createElement(a.Z,{diagramModel:n}),r().createElement(p.Group,{x:50,y:50},r().createElement(g.ZP,{model:n.startWithJoint.outputJoint,type:"start"})),v,b),r().createElement(m.Z,null))}},49520:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(83446),i=n(90359),r=n.n(i),a=n(2102),l=n(92235),s=n(44943),c=n(8904),d=n(39920),m=n(98820),p=n(33291),u=n(40635),f=n(30665),h=n(98301),g=n(94474);function y(){const e=(0,o.N7)(m.NH,{from:"parents"}),{viewCtx:t,model:n}=e,y=n.style;(0,i.useMemo)((()=>{n.getConfigs=()=>(0,h.Z)(n,t)}),[]);const x=(0,o.vc)((()=>{let e;return n.startWithOutput&&(e=r().createElement(a.ZP,{model:n.startWithOutput,type:"start"})),e})),v=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(s.Z,{model:n.conTemp})})),b=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{t instanceof d.default?n.parent.comAry.indexOf(t.forkedFrom)>=0&&e.push(r().createElement(c.ZP,{key:t.renderKey,model:t})):e.push(r().createElement(c.ZP,{key:t.renderKey,model:t}))})),e})),E=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},y.visible?(0,f.Q7)(e):void 0)));return r().createElement(u.Group,{ref:n.set$elOnce,visible:y.visible,width:y.width,height:y.height,onContextMenu:(0,o.Ft)(m.zC).prevent,onClick:(0,o.Ft)((e=>(0,m.V4)(e,{model:n,viewCtx:t}))).stop},r().createElement(u.Rect,Object.assign({width:(y.width||300)+2,height:y.height+2},E)),r().createElement(g.Z,{title:n.title}),r().createElement(u.Group,{clip:{x:0,y:0,width:y.width,height:y.height}},r().createElement(l.Z,{diagramModel:n}),v,r().createElement(u.Group,{x:50,y:50},x),b),r().createElement(p.Z,null))}},78176:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(83446),i=n(90359),r=n.n(i),a=n(98820),l=n(33291),s=n(40635),c=n(30665),d=n(25699),m=n(94474),p=n(34166),u=n(2102),f=n(44943),h=n(81555),g=n(39920),y=n(8904),x=n(92235),v=n(39627),b=n(55593);function E(){const e=(0,o.N7)(a.NH,{from:"parents"}),{viewCtx:t,model:n}=e,{emitComponent:E,context:C}=t,w=n.style;(0,i.useMemo)((()=>{n.getConfigs=()=>(0,d.Z)(n,t),n.getListeners=()=>(0,v.C)(e)}),[]);const A=(0,o.vc)((()=>{const e=[],t=n,o=n.varCom.outputPins.find((e=>"changed"===e.hostId));return e.push(r().createElement(u.ZP,{key:t.id,model:o,type:"start",order:0})),e})),k=(0,o.vc)((()=>{if(n.conTemp)return r().createElement(f.Z,{model:n.conTemp})})),F=(0,o.vc)((()=>{const t=[];return n.groupAry&&n.groupAry.forEach((n=>{t.push(r().createElement(h.Z,{groupModel:n,diagramCtx:e,key:n.id}))})),r().createElement(s.Group,null,t)})),Z=(0,o.vc)((()=>{const e=[];return n.comAry.length>0&&n.comAry.forEach((t=>{g.default,e.push(r().createElement(y.ZP,{key:t.renderKey,model:t}))})),e})),M=(0,o.vc)((()=>Object.assign({onMouseEnter:e=>{e.target.getStage().container().style.cursor="default"}},w.visible?(0,c.Q7)(e):void 0))),I=(0,i.useMemo)((()=>(0,c.tt)(e)),[]);return r().createElement(s.Group,Object.assign({ref:n.set$elOnce,visible:w.visible,width:w.width,height:w.height,onContextMenu:(0,o.Ft)((e=>{(0,a.V4)(null,{model:n,viewCtx:t}),t.emitWindowEvents.showContextMenu(e)})).stop.prevent,onClick:(0,o.Ft)((e=>(0,a.V4)(e,{model:n,viewCtx:t}))).stop},I),r().createElement(s.Rect,Object.assign({width:(w.width||300)+2,height:w.height+2},M)),r().createElement(m.Z,{title:n.title,style:{color:"#777"}}),r().createElement(s.Group,{clip:{x:0,y:0,width:w.width,height:w.height}},r().createElement(p.Z,null),F,r().createElement(x.Z,{diagramModel:n}),r().createElement(s.Group,{x:50,y:50},A),Z,k,r().createElement(b.Z,null)),r().createElement(l.Z,null))}},67452:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var o=n(83446),i=n(90359),r=n.n(i),a=n(88394),l=n(98820),s=n(88112),c=n(40635),d=n(49588),m=n(22155),p=n(24994),u=n(98057),f=n(79854);function h({viewCtx:e}){const{viewModel:t,curFrameModel:n}=e;(0,i.useEffect)((()=>{const n=e.shellEle,o=()=>{n.addEventListener("scroll",(e=>{t.style.left=n.scrollLeft,t.style.top=n.scrollTop}))};let i;void 0!==t.style.left?setTimeout((n=>{e.scrollTo({x:t.style.left,y:t.style.top},o)})):o();const r=t.curDiagramId;if(r&&(i=t.searchDiagram(r),i&&e.setCurDiagram(i)),!i&&t.curFrameId){const n=t.frames.find((e=>e.id===t.curFrameId));n&&e.setCurDiagram(n.diagramAry[0])}}),[]);const u=(0,o.vc)((()=>{const{renderedDiagramAry:t,viewModel:n,getCurDiagram:o,clearCurDiagram:i,emitComponent:a,scale:s}=e,c=[],d=t;let m=o();if(m){const e=()=>{m=void 0,i()};m.hadDestroyed()&&e(),m&&m.isVar&&(!m.varCom.hadDestroyed()&&m.varCom.exist()||e()),m&&!m.isVar&&m.parent.diagramAry&&(m.parent.diagramAry.includes(m)||e()),m&&m.showIO&&m.parent.parent&&(m.parent.parent.exist()||e()),m&&m.parent&&!m.parent.parent&&(m.isVar||n.frames.find((e=>e.id===m.parent.id))||e())}if(m){const e=n.$el;d.forEach((t=>{if(m&&m.id===t.id){const n=t.style;n.visible=!0,e.width(n.width*s+200),e.height(n.height*s+200),c.push(r().createElement(l.ZP,{key:t.id,model:t,visible:!0}))}else t.style.visible=!1}))}return c}));return r().createElement("div",{className:a.Z.view},r().createElement(m.Z,{viewCtx:e}),r().createElement("div",{className:a.Z.diagramView},r().createElement(d.Z,{viewCtx:e}),r().createElement(c.Stage,{ref:t.set$elOnce,shellRef:t=>e.shellEle=t,onClick:(0,o.Ft)((t=>function(e){e.viewModel.blur(),e.emitComponent.focus(null),e.showAboutComId=void 0,e.context.isDesnMode()}(e))).stop,onLoad:({goHome:t})=>{e.goCanvasHome=t},onScroll:({left:e,top:n})=>{t.style.left=e,t.style.top=n},scaleX:e.scale,scaleY:e.scale},r().createElement(c.Layer,{ref:t=>{t&&!e.mainLayer&&(e.mainLayer=t)}},u),r().createElement(c.Layer,{listening:!1,ref:t=>t&&!e.animationLayer&&(e.animationLayer=t)}),r().createElement(p.Z,null),r().createElement(f.Z,{tvCtx:e})),e.curDiagramModel?null:r().createElement("div",{className:a.Z.empty},"请选择或添加卡片"),e.assitWith?r().createElement(s.Z,Object.assign({type:e.assitWith.type,shellDom:e.shellEle},e.assitWith)):null,r().createElement(g,{viewCtx:e})))}function g({viewCtx:e}){var t;const{getCurDiagram:n,context:o}=e,i=n();if((null===(t=null==i?void 0:i.parent)||void 0===t?void 0:t.debuggable)||o.isDebugMode())return r().createElement(u.Z,null)}},55593:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(83446),i=n(98820),r=n(2102),a=n(40635),l=n(90359),s=n.n(l);function c(){const e=(0,o.N7)(i.NH,{from:"parents"}),{viewCtx:t,model:n}=e,l=n.parent,c=n.style,d=(0,o.vc)((()=>{let e=0,t=0;const o=[],i=l.outputPins,a=n.outputPins;i&&(i.forEach(((i,l)=>{if(!i.isTypeOfEvent()&&!i.isTypeOfShotcut()){let c=a.find((e=>e.id==i.id));c||(c=i.fork(n),a.push(c)),e+=50,o.push(s().createElement(r.ZP,{key:l,model:c,type:"frameIO",order:t++}))}})),a.forEach(((e,t)=>{i.find((t=>t.id===e.id))||a.splice(t,1)})));const c=l.outputJoints,d=n.outputJoints;return c&&(c.forEach(((i,a)=>{let l=d.find((e=>e.id==i.id));l||(l=i.fork(n),d.push(l)),e+=50,o.push(s().createElement(r.ZP,{key:a,model:l,type:"frameIO",order:t++}))})),d.forEach(((e,t)=>{c.find((t=>t.id===e.id))||d.splice(t,1)}))),o}));return d.length>0?s().createElement(s().Fragment,null,s().createElement(a.Line,{x:c.width-50,y:1,points:[0,0,0,c.height-2],dash:[4,2],stroke:"#EEE",tension:.5}),s().createElement(a.Text,{x:c.width-30,y:0,align:"right",width:12,height:c.height,text:l.title,fontSize:10,verticalAlign:"middle",fill:"#BBB"}),s().createElement(a.Group,{x:c.width-50,y:50},d)):null}},81555:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(40635),i=n(90359),r=n.n(i),a=n(83446),l=n(30665),s=n(90092),c=n(21576),d=n(8904);function m({groupModel:e,diagramCtx:t}){(0,i.useMemo)((()=>{e.getConfigs=()=>(0,s.Z)(e,t),e.getListeners=function(){if(t.viewCtx.context.isDesnMode())return(0,c.Z)(e,t)}}),[]);const n=e.style,m=(0,a.vc)((()=>Object.assign({fill:n.color},(0,l.Dh)(e,t))));return r().createElement(o.Group,{x:n.x,y:n.y,width:n.w,height:n.h,onClick:(0,a.Ft)((n=>p(e,t))).stop,_onMouseDown:(0,a.Ft)((n=>{!function(e,t,n){const{model:o,viewCtx:i}=n,{emitSnap:r,scale:l}=i;let s,c,m,p;(0,a.qw)(e,(({po:{x:e,y:n},epo:{ex:a,ey:u},dpo:{dx:f,dy:h},adpo:{adx:g,ady:y}},x)=>{if("start"===x)return m=t.style.x,p=t.style.y,c=(0,d.Y)(t.comAry,i),s=r.start("移动",{target:o}),void c.start();if("moving"==x){let e,n;const i=m+g/l;i>0&&i+t.style.w<o.style.width&&(t.style.x=i,e=g);const r=p+y/l;r>0&&r+t.style.h<o.style.height&&(t.style.y=r,n=y),void 0===e&&void 0===n||c.ing({adx:e,ady:n}),s.pauseNext()}"finish"==x&&(s.resume(),c.finish(),s.commit())}))}(n,e,t)})).stop,onContextMenu:(0,a.Ft)((n=>{p(e,t),t.viewCtx.emitWindowEvents.showContextMenu(n)})).stop.prevent},r().createElement(o.Rect,Object.assign({width:n.w,height:n.h,cornerRadius:5},m)),e.title?r().createElement(o.Text,{text:e.title,x:10,y:-13,fontSize:12,fontStyle:"bold",fill:"#AAA"}):null)}function p(e,t){const{viewCtx:n}=t;n.emitComponent.focus(e)}},22613:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(42230),i=n(44545),r=n(90359),a=n.n(r),l=n(334);function s({myCtx:e}){var t,n;const{context:s}=e,c=(0,r.useCallback)((t=>{e.focusItem=t}),[]);(0,r.useEffect)((()=>{!e._focusItemForKW&&e.keywords&&s.comLibAry.find(((t,n)=>{if(t.comAray)return t.comAray.find(((t,n)=>{var o;if(t.rtType&&t.rtType.match(/^js/gi)&&(void 0===t.visibility||t.visibility)&&(null===(o=t.inputs)||void 0===o?void 0:o.length)>0&&e.matchKeywords(t.title))return e.setFocusItemForKW({id:"_calculate_",title:"计算处理",type:"ui",inputPins:t.inputs}),!0}))}))}),[e.keywords]);const d="_calculate_",m="_defined_";return a().createElement(a().Fragment,null,a().createElement("div",{className:o.Z.jsComs},a().createElement("div",{className:i.Z.catelog},a().createElement("div",{className:`${i.Z.item}\n                              ${(null===(t=e.focusItem)||void 0===t?void 0:t.id)===d?i.Z.itemFocus:""}\n                              ${i.Z.itemJS}\n                             `,onClick:e=>{c({id:d,type:"ui"})}},a().createElement("span",{className:i.Z.icon},l.JS),a().createElement("div",{className:i.Z.title},"计算组件..")))),a().createElement("div",{className:o.Z.definedComs},a().createElement("div",{className:i.Z.catelog},a().createElement("div",{className:`${i.Z.item}\n                              ${(null===(n=e.focusItem)||void 0===n?void 0:n.id)===m?i.Z.itemFocus:""}\n                              ${i.Z.itemDefined}\n                             `,onClick:e=>{c({id:m,type:"ui"})}},a().createElement("span",{className:i.Z.icon},l.JS),a().createElement("div",{className:i.Z.title},"我的组件..")))))}},90183:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(90359),i=n(2268),r=n(44545),a=n(83446),l=n(90359);function s({myCtx:e,ioType:t}){const{viewModel:n,context:s}=e.tplContext,c=(0,a.vc)((()=>{const e=[];return n.frames.forEach((t=>{t.isTypeOfFx()&&t.diagramAry&&t.diagramAry.forEach((t=>{if(t.isFn){const n=t.parent.inputPins;(null==n?void 0:n.length)>0&&e.push(t)}}))})),e.length>0?e:void 0})),d=(0,o.useCallback)((t=>{e.focusItem=t}),[]),{keywords:m}=e;if(c)return l.createElement("div",{key:"globalVars",className:`${i.Z.globalFxs}`},l.createElement("label",{className:i.Z.scopeTitle},"全局Fx"),l.createElement("div",{className:i.Z.catelog},c.map((t=>{var n;return""!==m&&e.matchKeywords(t.title)&&e.setFocusItemForKW({id:t.id,type:"fx",title:t.title,diagram:t}),l.createElement("div",{key:t.id,className:`${r.Z.item} ${r.Z.itemFx} \n                              ${(null===(n=e.focusItem)||void 0===n?void 0:n.id)===t.id?r.Z.itemFocus:""}\n                             `,onClick:e=>{d({id:t.id,type:"fx",title:t.title,diagram:t})}},l.createElement("span",{className:r.Z.icon},"fx"),l.createElement("div",{className:r.Z.title},t.title))}))))}},45094:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),i=n(44545),r=n(79127),a=n(22270),l=n(23037),s=n(83446),c=n(90359);function d({myCtx:e,ioType:t}){var n;const{viewModel:d,context:m}=e.tplContext,{configs:p}=m;if(!(!p.geoView||(null===(n=p.geoView)||void 0===n?void 0:n.scenes)))return;const u=(0,s.mA)(class{}),f=[],h=d.varComAry;h&&h.forEach(((e,n)=>{if("inputs"===t){const t=[],n=e.getInputsAll();n&&l.tk.each((e=>{t.push(e)}),...n),t.length>0&&f.push({id:e.id,com:e,inputPins:t.length>0?t:void 0})}else{const t=e.getInputsAll(),n=e.getOutputsAll(),o=[];l.tk.each((e=>{l.tk.find((t=>t.rels&&t.rels.indexOf(e.hostId)>-1),...t)||o.push(e)}),...n),o.length>0&&f.push({id:e.id,com:e,outputPins:o})}}));const g=(0,o.useCallback)((t=>{e.focusItem=t}),[]),y=(0,o.useCallback)((e=>{if(u.editVar){const t=e.target.value;""!==t.trim()&&(u.editVar.runtime.title=t.trim(),u.editVar=void 0)}}),[]),{keywords:x}=e;return c.createElement("div",{key:"globalVars",className:`${i.Z.scope} ${i.Z.globalVars}`},c.createElement("label",{className:i.Z.scopeTitle},"全局变量"),c.createElement("span",{className:i.Z.add,onClick:t=>function(e,t){const{context:n,viewModel:o}=e.tplContext,i=o.varComAry,l=n.getComDef({namespace:r.Vm.coms.var}),s=new r.u5(l,!1,`全局变量${i.length}`),c=new a.n(s);o.addVarComponent(c),o.addVarDiagram(c),c.isSingleton=!0,t(c)}(e,(e=>{u.editVar=e,u.tval=e.runtime.title}))},"+"),c.createElement("div",{className:i.Z.catelog},f.map((t=>{var n;const o=t.com.runtime.title;return""!==x&&e.matchKeywords(o)&&e.setFocusItemForKW(Object.assign({type:"vars",title:o},t)),c.createElement("div",{key:t.id,className:`${i.Z.item} ${i.Z.itemVar} ${(null===(n=e.focusItem)||void 0===n?void 0:n.id)===t.id?i.Z.itemFocus:""}`,onClick:e=>{g(Object.assign({type:"vars",title:o},t))},onDoubleClick:e=>{u.editVar=t.com,u.tval=o}},c.createElement("span",{className:i.Z.icon},"@"),c.createElement("div",{className:i.Z.title},o),void 0!==u.editVar&&u.editVar.id===t.com.id?c.createElement("input",{type:"text",value:u.tval,ref:e=>{e&&e.focus()},onChange:e=>{u.tval=e.target.value},onBlur:e=>y(e),onKeyDown:e=>{13==(e.keyCode||e.which)&&y(e)}}):null)}))))}},334:(e,t,n)=>{n.d(t,{JS:()=>i,x:()=>r});var o=n(90359);const i=o.createElement("svg",{viewBox:"0 0 1027 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},o.createElement("path",{d:"M321.828571 226.742857c-14.628571-14.628571-36.571429-14.628571-51.2 0L7.314286 482.742857c-14.628571 14.628571-14.628571 36.571429 0 51.2l256 256c14.628571 14.628571 36.571429 14.628571 51.2 0 14.628571-14.628571 14.628571-36.571429 0-51.2L87.771429 512l234.057142-234.057143c7.314286-14.628571 7.314286-36.571429 0-51.2z m263.314286 0c-14.628571 0-36.571429 7.314286-43.885714 29.257143l-131.657143 497.371429c-7.314286 21.942857 7.314286 36.571429 29.257143 43.885714s36.571429-7.314286 43.885714-29.257143l131.657143-497.371429c7.314286-14.628571-7.314286-36.571429-29.257143-43.885714z m431.542857 256l-256-256c-14.628571-14.628571-36.571429-14.628571-51.2 0-14.628571 14.628571-14.628571 36.571429 0 51.2L936.228571 512l-234.057142 234.057143c-14.628571 14.628571-14.628571 36.571429 0 51.2 14.628571 14.628571 36.571429 14.628571 51.2 0l256-256c14.628571-14.628571 14.628571-43.885714 7.314285-58.514286z",fill:""})),r=(o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},o.createElement("path",{d:"M896 474.88c0 67.072-20.096 121.216-60.416 162.56-42.24 43.392-100.608 65.024-174.912 65.024-26.88 0-46.976-3.648-60.416-10.88-17.536-9.216-27.84-25.216-30.976-48a167.68 167.68 0 0 1-55.744 48c-20.736 11.904-44.16 18.304-68.032 18.624-45.44 0-80.832-14.464-106.112-43.328-25.344-28.928-38.016-67.136-38.016-114.624 0-45.44 9.6-86.144 28.672-122.304 19.2-36.16 44.672-64.32 76.672-84.48a191.296 191.296 0 0 1 103.68-30.144c22.72 0 42.88 4.16 60.48 12.416 17.472 8.256 30.912 20.16 40.256 35.584l3.072-21.632a17.856 17.856 0 0 1 6.912-11.648 19.648 19.648 0 0 1 11.648-3.84h60.416c6.208 0 11.072 2.304 14.72 6.976 3.648 4.608 4.864 9.6 3.84 14.72l-43.328 230.72c-4.096 16.512-4.672 28.608-1.536 36.288 3.072 7.808 11.904 11.648 26.24 11.648 34.112 0 63.552-12.864 88.32-38.72 26.88-28.864 40.32-66.56 40.32-112.96 0-55.744-14.528-104.768-43.456-147.2-25.728-40.256-62.4-71.168-109.888-92.8a370.24 370.24 0 0 0-155.648-32.512 301.952 301.952 0 0 0-155.648 41.728A312.32 312.32 0 0 0 244.16 357.12 300.544 300.544 0 0 0 202.176 512c0 55.744 13.952 107.392 41.856 154.88a311.488 311.488 0 0 0 113.024 112.96A299.904 299.904 0 0 0 512 821.76c37.504 0.256 87.552-14.08 150.208-43.072 19.2-8.896 42.112-3.2 54.976 13.696a32.832 32.832 0 0 1-9.92 48.512c-30.784 17.408-55.872 29.376-75.264 35.84A376.96 376.96 0 0 1 512 896a372.224 372.224 0 0 1-192-51.84A388.032 388.032 0 0 1 179.84 704 372.224 372.224 0 0 1 128 512c0-69.12 17.28-133.184 51.84-192A388.032 388.032 0 0 1 320 179.84 375.04 375.04 0 0 1 513.472 128c70.208 0 134.528 14.4 192.768 43.328 58.368 28.928 104.064 68.672 137.088 119.232 35.008 53.696 52.608 115.136 52.608 184.32zM553.024 580.864c23.296-29.44 34.816-63.232 34.816-101.44 0-23.808-6.144-42.88-18.496-57.28-12.416-14.528-30.016-21.696-52.736-21.696-18.56 0-36.608 5.952-54.144 17.792-17.6 11.904-32 28.672-43.328 50.368-11.584 23.552-17.408 49.536-17.088 75.84 0 25.792 6.208 45.696 18.56 59.648 12.416 13.888 29.44 20.864 51.2 20.864 30.912 0 58.048-14.72 81.28-44.16z",fill:"#333333"})),o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},o.createElement("path",{d:"M864 293.312h-704A122.624 122.624 0 0 0 37.248 416v448.128c0 67.712 54.912 122.624 122.624 122.624h704.128a122.624 122.624 0 0 0 122.624-122.624V415.936A122.624 122.624 0 0 0 864 293.312z m-704 96h704c14.72 0 26.688 11.968 26.688 26.624v448.128c0 14.72-11.968 26.624-26.624 26.624H159.936a26.624 26.624 0 0 1-26.624-26.624V415.936c0-14.72 11.968-26.624 26.624-26.624z",fill:"#707070"}),o.createElement("path",{d:"M812.032 76.16a48 48 0 0 1 35.968 88.832l-6.08 2.432-694.4 227.328a48 48 0 0 1-35.84-88.832l6.016-2.432L812.16 76.16zM392.32 570.816a48 48 0 0 1 63.488 71.68l-5.312 4.672-101.824 77.568a48 48 0 0 1-63.552-71.68l5.376-4.672 101.76-77.568zM664.768 570.816a48 48 0 0 1 63.488 71.68l-5.312 4.672-101.76 77.568a48 48 0 0 1-63.552-71.68l5.312-4.672 101.824-77.568z",fill:"#707070"})));o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},o.createElement("path",{d:"M557.184 157.589333c0 1.749333-0.213333 4.565333-0.64 8.490667-0.426667 3.904-0.981333 8.32-1.706667 13.269333-0.704 4.928-1.621333 10.005333-2.730666 15.232a126.848 126.848 0 0 1-4.032 14.570667c-1.557333 4.48-3.306667 8.106667-5.290667 10.88-1.962667 2.773333-4.096 4.138667-6.357333 4.138667-1.685333 0-3.861333-0.426667-6.549334-1.322667a425.813333 425.813333 0 0 0-9.109333-2.816 127.466667 127.466667 0 0 0-11.626667-2.837333 72.661333 72.661333 0 0 0-14.186666-1.28 64 64 0 0 0-23.466667 3.904c-6.656 2.602667-12.373333 6.741333-17.152 12.394666-4.8 5.653333-8.896 12.970667-12.288 21.973334a186.410667 186.410667 0 0 0-8.469333 32.213333l-6.336 33.066667h68.565333c4.224 0 7.189333 1.365333 8.896 4.117333 1.685333 2.773333 2.538667 7.189333 2.538667 13.269333a131.178667 131.178667 0 0 1-2.965334 26.325334 154.666667 154.666667 0 0 1-9.749333 30.250666 37.12 37.12 0 0 1-6.976 10.666667c-2.688 2.752-5.568 4.117333-8.682667 4.117333h-69.397333l-66.453333 341.141334c-4.8 24.085333-11.370667 45.269333-19.690667 63.530666-8.32 18.282667-18.837333 33.578667-31.530667 45.909334a124.074667 124.074667 0 0 1-45.077333 27.84c-17.344 6.250667-37.034667 9.365333-59.050667 9.365333-14.656 0-26.944-1.152-36.821333-3.477333-9.877333-2.325333-16.213333-4.650667-19.029333-6.976a15.530667 15.530667 0 0 1-2.986667-5.653334A34.325333 34.325333 0 0 1 128 871.189333c0-1.728 0.213333-4.629333 0.64-8.704 0.426667-4.053333 1.066667-8.469333 1.898667-13.269333 0.853333-4.778667 1.92-9.792 3.178666-14.997333 1.28-5.226667 2.666667-10.026667 4.224-14.357334a43.306667 43.306667 0 0 1 5.290667-10.666666c1.984-2.773333 4.245333-4.138667 6.784-4.138667 1.685333 0 3.370667 0.149333 5.077333 0.426667 1.706667 0.298667 3.52 0.661333 5.504 1.088 1.962667 0.426667 4.288 0.810667 6.976 1.088 2.688 0.298667 6.144 0.426667 10.368 0.426666 9.024 0 16.853333-1.365333 23.488-4.117333 6.634667-2.773333 12.352-7.04 17.152-12.842667 4.8-5.802667 8.874667-13.269333 12.266667-22.4a215.466667 215.466667 0 0 0 8.896-33.28l63.914667-327.232H256.213333a9.173333 9.173333 0 0 1-7.829333-3.690666c-1.834667-2.474667-2.752-7.189333-2.752-14.144a156.16 156.16 0 0 1 2.752-26.112c1.002667-5.205333 2.197333-10.517333 3.626667-15.872a65.493333 65.493333 0 0 1 5.482666-14.357334c2.261333-4.202667 4.736-7.68 7.402667-10.453333a12.842667 12.842667 0 0 1 9.536-4.117333h46.549333l8.042667-43.093334c4.522667-24.362667 11.136-45.824 19.882667-64.384 8.746667-18.56 19.541333-34.090667 32.384-46.570666a124.650667 124.650667 0 0 1 45.290666-28.053334C443.946667 131.114667 463.637333 128 485.653333 128c7.338667 0 14.656 0.362667 21.994667 1.088 7.338667 0.725333 13.973333 1.749333 19.904 3.050667 5.930667 1.301333 11.136 2.816 15.658667 4.565333 4.522667 1.749333 7.616 3.477333 9.301333 5.226667 1.706667 1.450667 2.901333 3.477333 3.605333 6.08 0.704 2.624 1.066667 5.802667 1.066667 9.578666z m197.824 370.304l69.482667 185.728c1.450667 4.736 1.749333 8.64 0.874666 11.712-0.853333 3.072-3.541333 5.568-8.042666 7.530667-4.48 1.941333-10.922667 3.285333-19.306667 3.968-8.405333 0.704-19.264 1.066667-32.576 1.066667-12.16 0-21.717333-0.298667-28.672-0.853334a83.072 83.072 0 0 1-16.064-2.517333c-3.754667-1.109333-6.293333-2.645333-7.594667-4.586667a20.053333 20.053333 0 0 1-2.816-6.698666l-46.912-131.776-98.133333 132.202666a32.384 32.384 0 0 1-5.866667 6.464c-2.176 1.813333-5.781333 3.285333-10.858666 4.394667-5.056 1.130667-11.733333 1.962667-19.968 2.517333-8.256 0.554667-19.328 0.853333-33.216 0.853334a340.053333 340.053333 0 0 1-29.973334-1.066667c-7.530667-0.682667-13.013333-1.941333-16.490666-3.754667-3.477333-1.813333-4.992-4.181333-4.565334-7.125333 0.426667-2.922667 2.24-6.762667 5.418667-11.498667l147.2-185.728-64.682667-172.330666c-1.728-5.013333-2.325333-9.130667-1.728-12.352 0.576-3.2 2.816-5.76 6.72-7.722667 3.904-1.962667 9.984-3.285333 18.24-3.989333a407.466667 407.466667 0 0 1 32.789334-1.045334c11.861333 0 21.205333 0.213333 28.010666 0.64 6.805333 0.426667 12.010667 1.045333 15.637334 1.877334 3.626667 0.853333 6.08 2.154667 7.381333 3.968 1.28 1.813333 2.389333 4.117333 3.242667 6.912L687.701333 469.333333l93.376-124.650666a37.12 37.12 0 0 1 5.632-5.866667c2.026667-1.664 5.226667-3.050667 9.557334-4.181333 4.352-1.109333 9.984-1.941333 16.938666-2.496 6.954667-0.576 16.362667-0.853333 28.224-0.853334 13.312 0 23.957333 0.277333 31.914667 0.853334 7.978667 0.554667 13.824 1.664 17.6 3.328 3.754667 1.685333 5.418667 3.989333 4.992 6.912-0.426667 2.922667-2.538667 6.912-6.293333 11.925333l-134.613334 173.589333z",fill:"#191F25"}))},24608:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(23037);class i{constructor(){this.keywords="",this.navWidth=260}setFocusItemForKW(e){this._focusItemForKW||(this._focusItemForKW=e,this.focusItem=e)}setKW(e){this.keywords=e,this._focusItemForKW=void 0,this.focusItem=void 0}matchKeywords(e){const t=this.keywords;if(e.indexOf(t)<0){const n=o.N9.convertToPinyin(e);if(!n||n&&n.indexOf(t.toUpperCase())<0)return!1}return!0}isDirectionOfInput(){return this.pinModel&&this.pinModel.isDirectionOfInput()}}},88112:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(16305),i=n(83446),r=n(90359),a=n(24318),l=n(79127),s=n(39740),c=n(24608),d=n(77170),m=n(61388),p=n(71442),u=n(12190),f=n(90359);let h;function g({type:e,shellDom:t,diagramModel:n,pinModel:g,position:y,options:x}){const v=(0,i.N7)(l.zz,{from:"parents"}),b=(0,i.N7)(s.Z,{from:"parents"});let E=n.parent;E instanceof u.Z&&(E=void 0),h=(0,i.mA)(c.Z,(t=>t({type:e,frameModel:E,curFrameModel:E,diagramModel:n,pinModel:g,style:{display:"block",left:y.x,top:y.y,_left:y.x,_top:y.y},context:v,tplContext:b,onComplete:null==x?void 0:x.onComplete})),{to:"children"},[e]);const C=(0,r.useRef)();(0,r.useEffect)((()=>{v.registerBlur((()=>{h.onComplete&&h.onComplete(),h.tplContext.assitWith=void 0}),!0)}),[]);const w=(0,r.useMemo)((()=>{const e="inputs"===h.type?(0,p.a0)(g.schema.type):{};return f.createElement(f.Fragment,null,f.createElement("div",{className:o.Z.titleBar,onMouseDown:(0,i.Ft)((e=>function(e){const t=h.style;let n=t._left,o=t._top;(0,i.qw)(e,(({po:{x:e,y:i},epo:{ex:r,ey:a},dpo:{dx:l,dy:s},adpo:{adx:c,ady:d}},m)=>{"moving"==m&&(t._left=n+c,t._top=o+d)}))}(e))).stop},"inputs"===h.type?f.createElement(f.Fragment,null,f.createElement("span",{className:o.Z.s0},"从输出项"),f.createElement("span",{className:o.Z.s1,style:{color:e.strokeColor}},'"',g.title,'"'),f.createElement("span",{className:o.Z.s2},"连接到 ...")):f.createElement("span",{className:o.Z.s2},"从以下组件开始 ..."),f.createElement("input",{type:"text",value:h.keywords,ref:e=>{e&&(C.current=e,e.focus())},placeholder:"输入关键词搜索",onChange:e=>h.setKW(e.target.value)})),f.createElement("div",{className:o.Z.content},"inputs"===h.type?f.createElement(d.Z,null):f.createElement(m.Z,null)))}),[h.keywords]),A=h.style;return(0,a.createPortal)(f.createElement("div",{className:o.Z.bg,ref:e=>{},onClick:(0,i.Ft)((()=>{h.onComplete&&h.onComplete(),h.tplContext.assitWith=void 0})).stop,onContextMenu:(0,i.Ft)((()=>{})).prevent},f.createElement("div",{className:o.Z.assist,style:{left:A._left,top:A._top},onClick:(0,i.Ft)().stop},w)),document.body)}},81372:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(83446),i=n(23037),r=n(23106),a=n(90359),l=n.n(a),s=n(24608);let c;function d(){return c=(0,o.N7)(s.Z,{from:"parents"}),l().createElement("div",{className:r.Z.sperV,onMouseDown:m},l().createElement("div",null))}function m(e){let{x:t,y:n,w:r,h:a}=(0,i.bt)(c.navEle);(0,o.qw)(e,(({po:{x:e,y:t},epo:{ex:n,ey:o},dpo:{dx:i,dy:a}},l)=>{"moving"==l&&(c.navWidth=Math.max(r+=i,260))}))}},67525:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(90359),i=n(44545),r=n(79127),a=n(71442),l=n(53002),s=n(90359);function c({diagramModel:e,frameModel:t,myCtx:n}){const c=t.inputPins,d=(0,o.useCallback)((e=>{n.focusItem=e}),[]);if(0===c.length)return;const m=l.Z.comAray.find((e=>{if(e.namespace===r.Vm.coms.frameIn)return e})),{keywords:p}=n;return s.createElement("div",{className:i.Z.catelog},s.createElement("div",{className:i.Z.cateTitle},s.createElement("span",null,"输入项")),s.createElement("div",null,c.map((e=>{var t,o;const r=e.title,l=(0,a.a0)(null===(t=e.schema)||void 0===t?void 0:t.type),c={borderColor:l.strokeColor,backgroundColor:l.fillColor};return""!==p&&n.matchKeywords(r)&&n.setFocusItemForKW({id:e.id,title:"当前插槽输入",type:"frameIn",pin:e,comDef:m}),s.createElement("div",{key:e.id,className:`${i.Z.item} ${i.Z.itemFrameIn} ${(null===(o=n.focusItem)||void 0===o?void 0:o.id)===e.id?i.Z.itemFocus:""}`,onClick:t=>{d({id:e.id,title:"当前插槽输入",type:"frameIn",pin:e,comDef:m})}},s.createElement("span",{className:i.Z.pin,style:c}),s.createElement("div",{className:i.Z.title},r))}))))}},9368:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(90359),i=n(44545),r=n(79127),a=n(71442),l=n(53002),s=n(90359);function c({frameModel:e,myCtx:t}){const n=e.outputPins,c=(0,o.useCallback)((e=>{t.focusItem=e}),[]);if(0===n.length)return;const d=l.Z.comAray.find((e=>{if(e.namespace===r.Vm.coms.frameOut)return e})),{keywords:m}=t;return s.createElement("div",{key:"vars",className:i.Z.catelog},s.createElement("div",{className:i.Z.cateTitle},s.createElement("span",null,"输出项")),s.createElement("div",null,n.map((e=>{var n,o;const r=e.title,l=(0,a.a0)(null===(n=e.schema)||void 0===n?void 0:n.type),p={borderColor:l.strokeColor,backgroundColor:l.fillColor};return""!==m&&t.matchKeywords(r)&&t.setFocusItemForKW({id:e.id,title:"当前插槽输出",type:"frameOut",pin:e,comDef:d}),s.createElement("div",{key:e.id,className:`${i.Z.item} ${i.Z.itemFrameIn} ${(null===(o=t.focusItem)||void 0===o?void 0:o.id)===e.id?i.Z.itemFocus:""}`,onClick:t=>{c({id:e.id,title:"当前插槽输出",type:"frameOut",pin:e,comDef:d})}},s.createElement("span",{className:i.Z.pin,style:p}),s.createElement("div",{className:i.Z.title},r))}))))}},19174:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(44545),i=n(90359),r=n(83446),a=n(90359);function l({myCtx:e}){const t=(0,r.vc)((()=>{const t=e.curFrameModel;if(t){const n=[];return t.frameAry.forEach((t=>{if(t.diagramAry){const{keywords:o}=e;t.diagramAry.forEach((e=>{if(e.isFn){const t=e.parent.inputPins;(null==t?void 0:t.length)>0&&n.push(e)}}))}})),n.length>0?n:void 0}})),n=(0,i.useCallback)((t=>{e.focusItem=t}),[]);if(t)return a.createElement("div",{key:"vars",className:o.Z.catelog},a.createElement("div",{className:o.Z.cateTitle},a.createElement("span",null,"Fx")),a.createElement("div",null,t.map((t=>{var i;return a.createElement("div",{key:t.id,className:`${o.Z.item} ${o.Z.itemFx}\n                              ${(null===(i=e.focusItem)||void 0===i?void 0:i.id)===t.id?o.Z.itemFocus:""}\n                             `,onClick:e=>{n({id:t.id,type:"fx",title:t.title,diagram:t})}},a.createElement("span",{className:o.Z.icon},"fx"),a.createElement("div",{className:o.Z.title},t.title))}))))}},10030:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(44545),i=n(334),r=n(90359),a=n(90359);function l({frameModel:e,myCtx:t}){const{tplContext:n}=t,{context:o,configs:i}=n;if("ui"===i.mode)return o.configs.pageMetaLoader?a.createElement(s,{frameModel:e,myCtx:t}):a.createElement(c,{frameModel:e,myCtx:t})}function s({frameModel:e,myCtx:t}){const{tplContext:n,keywords:l}=t,{context:s}=n,c=(0,r.useCallback)((e=>{t.focusItem=e}),[]),d=s.pageMetaModel.getPageAry(),m=e.parent?e.root:e;return a.createElement("div",{key:"otherFrames",className:`${o.Z.scope} ${o.Z.otherFrames}`},a.createElement("label",{className:o.Z.scopeTitle},"其他场景"),a.createElement("div",{className:o.Z.catelog},d.filter((e=>!(e.id===m.id)&&(!(""!==l&&!t.matchKeywords(e.title))&&(!e.frame||!e.frame.isTypeOfModule()&&!e.frame.isTypeOfDefinedCom())))).map((e=>{var n;return a.createElement("div",{key:e.id,className:`${o.Z.item} \n                              ${(null===(n=t.focusItem)||void 0===n?void 0:n.id)===e.id?o.Z.itemFocus:""}\n                             `,onClick:t=>{c({sceneId:e.id,type:"scene",title:e.title})}},a.createElement("span",{className:o.Z.icon},i.x),a.createElement("div",{className:o.Z.title},e.title))}))))}function c({frameModel:e,myCtx:t}){const n=(0,r.useCallback)((e=>{t.focusItem=e}),[]),l=e.parent?e.root:e,{tplContext:s,keywords:c}=t,{viewModel:d,context:m}=s,p=d.frames,u=[];if(p.length>0&&p.forEach((e=>{if(e&&e!==l&&e.diagramAry){if(!e.diagramAry.find((e=>e.isFn))&&!e.isTypeOfModule()&&!e.isTypeOfDefinedCom()){const n=e.diagramAry[0];if(n){if(""!==c&&!t.matchKeywords(n.title))return;u.push(n)}}}})),u.length>0)return a.createElement("div",{key:"otherFrames",className:`${o.Z.scope} ${o.Z.otherFrames}`},a.createElement("label",{className:o.Z.scopeTitle},"其他场景"),a.createElement("div",{className:o.Z.catelog},u.map((e=>{var r;return a.createElement("div",{key:e.id,className:`${o.Z.item} \n                              ${(null===(r=t.focusItem)||void 0===r?void 0:r.id)===e.id?o.Z.itemFocus:""}\n                             `,onClick:t=>{n({id:e.id,type:"scene",title:e.title,diagram:e})}},a.createElement("span",{className:o.Z.icon},i.x),a.createElement("div",{className:o.Z.title},e.title))}))))}},83982:(e,t,n)=>{n.d(t,{Z:()=>y});var o=n(83446),i=n(24608),r=n(90359),a=n.n(r),l=n(44244),s=n(71442),c=n(44545),d=n(4133),m=n(33397),p=n(22270),u=n(79127),f=n(38109),h=n(92868),g=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};function y(){const e=(0,o.N7)(i.Z,{from:"parents"}),{focusItem:t,pinModel:n,tplContext:h,context:g,onComplete:y,keywords:b}=e,E=(0,r.useCallback)((e=>(0,o.Ft)((()=>{e(),h.assitWith=void 0})).stop),[]),C=(0,r.useCallback)((({pins:e,genFn:t,connectedPins:i})=>{if(e)return e.map((e=>{var r,d;if(e.isTypeOfConfig&&e.isTypeOfConfig())return;const m=i[(null===(r=e.parent)||void 0===r?void 0:r.id)+e.hostId],u=!(0,l.YH)(n.schema,e.schema),h=(0,s.a0)(null===(d=e.schema)||void 0===d?void 0:d.type),y={borderColor:h.strokeColor,backgroundColor:h.fillColor},x=m?(0,o.Ft)().stop:E((n=>{t(e)}));let v=e.description;if(!v&&e.parent instanceof p.n){const t=g.getComDef(e.parent.runtime.def);if(t.inputs){const n=t.inputs.find((t=>t.id===e.hostId));n&&(v=n.desc)}}return a().createElement("div",{key:e.id,className:`${c.Z.pin} ${m?c.Z.hadCon:""} ${u?c.Z.invalidType:""}`,onClick:x},a().createElement("div",{className:c.Z.main},a().createElement("span",{className:c.Z.typeInfo,style:y}),a().createElement("span",{className:`${c.Z.pinTitle}`},e.title)),v?a().createElement("div",{className:c.Z.desc},v):null,a().createElement("div",{className:c.Z.schema},a().createElement(f.Z,{key:e.schema.type,options:{readOnly:!0,copyEnable:!1},value:{get:()=>e.schema}})))}))}),[]),w=t;if(w){const{id:t,type:o,title:i}=w;if("ui"===o&&"_calculate_"===w.id)return a().createElement(x,{myCtx:e});if("ui"===o&&"_defined_"===w.id)return a().createElement(v,{myCtx:e});{let e,t,r;if("frame"===o)e=w.inputPins||w.inputJoints,r=e=>(0,d.DI)(e,y);else if("vars"===o){const{com:t}=w;e=w.inputPins,r=e=>(0,d.lh)(t,e,y)}else if("ui"===o){const{com:n}=w;e=w.inputPins,t=w.configPins,r=e=>(0,d.lh)(n,e,y)}else if("fx"===o){const{diagram:t}=w;e=t.parent.inputPins,r=e=>(0,d.Yf)(t,e,y)}else if("scene"===o){const{diagram:t,sceneId:n}=w;t?(e=t.parent.inputPins,r=e=>(0,d.fn)(t,e,y)):n&&(e=u.RX,r=e=>(0,d.zx)(n,e,y))}else if("calculate"===o){const{comDef:t}=w;e=t.inputs,r=e=>(0,m.AF)(t,y)}else if("frameIn"===o){const{pin:t,comDef:n}=w;e=[n.inputs[0]],r=()=>(0,d.tw)(t,y)}else if("frameOut"===o){const{pin:t,comDef:n}=w;e=[n.inputs[0]],r=()=>(0,d.L4)(t,y)}const l={};return n.conAry&&n.conAry.forEach((e=>{!e.isTemp&&e.finishPin&&(l[e.finishPin.parent.id+e.finishPin.hostId]=1)})),a().createElement("div",{className:c.Z.pins},a().createElement("div",{className:c.Z.toolbar},a().createElement("span",null,i),"的 输入项"),a().createElement("div",{className:c.Z.content},C({pins:e,genFn:r,connectedPins:l})),t?a().createElement(a().Fragment,null,a().createElement("div",{className:c.Z.toolbar},"配置项"),a().createElement("div",{className:c.Z.content},C({pins:t,genFn:r,connectedPins:l}))):null)}}}function x({myCtx:e}){const{context:t,keywords:n}=e,o=[],i=(0,r.useCallback)((t=>{(0,m.AF)(t,e,!1)}),[]);return t.comLibAry.forEach(((t,r)=>{if(t.comAray||!t.defined){const l=[];t.comAray.forEach(((t,o)=>{var r,s,d;if(t.rtType&&t.rtType.match(/^js/gi)&&(void 0===t.visibility||t.visibility)&&(null===(r=t.inputs)||void 0===r?void 0:r.length)>0){if(n&&!e.matchKeywords(t.title))return;let o;((null===(s=t.icon)||void 0===s?void 0:s.toUpperCase().startsWith("HTTP"))||(null===(d=t.icon)||void 0===d?void 0:d.startsWith("data:image/")))&&(o=t.icon),l.push(a().createElement("div",{key:t.namespace,className:`${c.Z.com} ${t.deprecated?c.Z.deprecated:""}`,onClick:e=>i(t)},a().createElement("div",{className:c.Z.icon},o?a().createElement("img",{src:o}):null),a().createElement("div",{className:c.Z.tt},a().createElement("div",{className:c.Z.title},t.title),a().createElement("div",{className:c.Z.desc},t.description))))}})),l.length>0&&(o.push(a().createElement("div",{key:`lib-${r}`,className:c.Z.lib},t.title)),o.push(...l))}})),a().createElement("div",{className:c.Z.coms},a().createElement("div",{className:c.Z.content},o))}function v({myCtx:e}){const{context:t,keywords:n}=e,i=[],l=(0,r.useCallback)((t=>{(0,m.AF)(t,e,!1)}),[]),s=t.comLibAry.find((e=>e.defined));if(!s)return;const d=[];return s.comAray&&s.comAray.forEach(((t,o)=>{var i,r,s;if(t.rtType&&t.rtType.match(/^js/gi)&&(void 0===t.visibility||t.visibility)&&(null===(i=t.inputs)||void 0===i?void 0:i.length)>0){if(n&&!e.matchKeywords(t.title))return;let o;((null===(r=t.icon)||void 0===r?void 0:r.toUpperCase().startsWith("HTTP"))||(null===(s=t.icon)||void 0===s?void 0:s.startsWith("data:image/")))&&(o=t.icon),d.push(a().createElement("div",{key:t.namespace,className:`${c.Z.com} ${t.deprecated?c.Z.deprecated:""}`,onClick:e=>l(t)},a().createElement("div",{className:c.Z.icon},o?a().createElement("img",{src:o}):null),a().createElement("div",{className:c.Z.tt},a().createElement("div",{className:c.Z.title},t.title),a().createElement("div",{className:c.Z.desc},t.description))))}})),i.push(a().createElement("div",{key:"lib-x",className:c.Z.lib},s.title)),i.push(...d),i.push(a().createElement("div",{key:"addDefined",onClick:(0,o.Ft)((()=>function(e,t){return g(this,void 0,void 0,(function*(){const n=t.context.configs.comLibLoader,o=yield n({cmd:"addCom",libId:e.id,libVersion:e.version});(0,h.R)(o,t.context)}))}(s,e))).stop,className:c.Z.addDefined},a().createElement("span",null,"+"),a().createElement("label",null,"添加组件"))),a().createElement("div",{className:c.Z.coms},a().createElement("div",{className:c.Z.content},i))}},30165:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(4133),i=n(90359),r=n.n(i),a=n(67525),l=n(9368),s=n(44545),c=n(33392),d=n(19174),m=n(42574),p=n(33397),u=n(10030),f=n(45094),h=n(90183);function g({myCtx:e}){const t=(0,i.useMemo)((()=>(0,p.Rx)(e)),[]),n=(0,i.useCallback)((t=>{e.curFrameModel=t}),[]);return r().createElement("div",{className:c.Z.scopes},r().createElement("div",{className:c.Z.navs},r().createElement("span",{className:e.curFrameModel?"":c.Z.curNav,onClick:e=>n()},"全局"),t.map(((t,o)=>{var i,a;let l=t.title;return l||(l=null===(a=null===(i=t.diagramAry)||void 0===i?void 0:i[0])||void 0===a?void 0:a.title),r().createElement("span",{key:o,className:e.curFrameModel===t?c.Z.curNav:"",onClick:e=>n(t)},l)}))),e.curFrameModel?r().createElement(x,{myCtx:e}):r().createElement(y,{myCtx:e}))}function y({myCtx:e}){const{frameModel:t,context:n}=e,o=n.isRoleOfDev();return r().createElement(r().Fragment,null,t?r().createElement(u.Z,{frameModel:t,myCtx:e}):null,o?r().createElement(f.Z,{myCtx:e,ioType:"inputs"}):null,r().createElement(h.Z,{myCtx:e,ioType:"inputs"}))}function x({myCtx:e}){const{keywords:t,context:n}=e,p=e.curFrameModel,u=(0,i.useMemo)((()=>{let n=[];if(p.comAry){const i=(0,o.v4)(p,e);if(i.length>0&&(n.push({type:"ui",title:"UI组件",ary:i}),t)){function r(t){const n=t.find((e=>{if(e.inputPins)return!0}));if(n)return e.setFocusItemForKW({id:n.id,title:n.title,type:"ui",inputPins:n.inputPins}),!0;t.find((e=>{if(e.slots)return e.slots.find((e=>{if(e.coms)return r(e.coms)}))}))}r(i)}}return 0===n.length&&n.push({type:"ui",title:"UI组件",ary:[]}),n}),[p,t]),f=n.isRoleOfDev(),h=p.isTypeOfFx();return r().createElement("div",{className:c.Z.frameScope},f?r().createElement(a.Z,{frameModel:p,myCtx:e}):null,f?r().createElement(l.Z,{frameModel:p,myCtx:e}):null,!h&&f?r().createElement(m.Z,{myCtx:e}):null,r().createElement(d.Z,{myCtx:e}),!h&&u.map((({type:t,title:n,ary:i})=>r().createElement("div",{key:t,className:s.Z.catelog},r().createElement("div",{className:s.Z.cateTitle},n),r().createElement("div",{className:s.Z.cateContent},i.map(((t,n)=>r().createElement(o.dx,{key:t.id,myCtx:e,item:t}))))))))}},42574:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),i=n(44545),r=n(79127),a=n(22270),l=n(23037),s=n(83446),c=n(90359);function d({myCtx:e}){const t=(0,s.mA)(class{}),n=e.curFrameModel,d=[],m=n.getSingletonComAry(r.Vm.coms.var);m&&m.forEach(((e,t)=>{const n=[],o=e.getInputsAll();o&&l.tk.each((e=>{n.push(e)}),...o),n.length>0&&d.push({id:e.id,com:e,inputPins:n.length>0?n:void 0})}));const p=(0,o.useCallback)((t=>{e.focusItem=t}),[]),u=(0,o.useCallback)((e=>{if(t.editVar){const o=e.target.value;if(""!==o.trim()){t.editVar.runtime.title=o.trim();n.getVarDiagram(t.editVar.id).title=o.trim(),t.editVar=void 0}}}),[]),{keywords:f}=e;return c.createElement("div",{key:"vars",className:i.Z.catelog},c.createElement("div",{className:i.Z.cateTitle},c.createElement("span",null,"变量"),c.createElement("span",{className:i.Z.add,onClick:o=>function(e,t,n){const{context:o}=t,i=o.getComDef({namespace:r.Vm.coms.var}),l=e.getSingletonComAry(),s=new r.u5(i,!1,`变量${l.length}`),c=new a.n(s);c.runtime.topl=c,c.isSingleton=!0,e.addComponent(c),e.addVarDiagram(c),n(c)}(n,e,(e=>{t.editVar=e,t.tval=e.runtime.title}))},"+")),c.createElement("div",null,d.map((n=>{var o;const r=n.com.runtime.title;return c.createElement("div",{key:n.id,className:`${i.Z.item} ${i.Z.itemVar} ${(null===(o=e.focusItem)||void 0===o?void 0:o.id)===n.id?i.Z.itemFocus:""}`,onClick:e=>{p(Object.assign({type:"vars",title:r},n))},onDoubleClick:e=>{t.editVar=n.com,t.tval=r}},c.createElement("span",{className:i.Z.icon},"@"),c.createElement("div",{className:i.Z.title},r),void 0!==t.editVar&&t.editVar.id===n.com.id?c.createElement("input",{type:"text",value:t.tval,ref:e=>{e&&e.focus()},onChange:e=>{t.tval=e.target.value},onBlur:e=>u(e),onKeyDown:e=>{13==(e.keyCode||e.which)&&u(e)}}):null)}))))}},77170:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(83446),i=n(24608),r=n(36887),a=n(90359);function l(){const e=(0,o.N7)(i.Z,{from:"parents"});return a.createElement(r.d,{myCtx:e})}},36887:(e,t,n)=>{n.d(t,{d:()=>d});var o=n(90359),i=n.n(o),r=n(44545),a=n(83982),l=n(81372),s=n(30165),c=n(22613);function d({myCtx:e}){const{keywords:t,diagramModel:n,frameModel:d,tplContext:m,context:p}=e;(0,o.useLayoutEffect)((()=>{if(e.navEle){const n=e.navEle.querySelectorAll(`.${r.Z.item}`);""!==t||(n.length>0?n[0].click():e.focusItem=void 0)}}),[t]);const u=p.isRoleOfDev();return i().createElement(i().Fragment,null,i().createElement("div",{className:r.Z.nav,style:{width:e.navWidth},ref:t=>{t&&(e.navEle=t)}},i().createElement(s.Z,{myCtx:e}),u?i().createElement(c.Z,{myCtx:e}):null),i().createElement(l.Z,null),i().createElement(a.Z,null))}},4133:(e,t,n)=>{n.d(t,{DI:()=>h,L4:()=>y,Yf:()=>E,dx:()=>f,fn:()=>b,lh:()=>x,tw:()=>g,v4:()=>u,zx:()=>v});var o=n(83446),i=n(24608),r=n(79127),a=n(22270),l=n(23037),s=n(33397),c=n(53002),d=n(90359),m=n.n(d),p=n(44545);function u(e,t){const{tplContext:n,keywords:o,matchKeywords:i}=t,{emitFrame:s}=n,c=e.parent&&e.parent instanceof a.n?e.parent:null,d=s.getUIComDefTree(e.id,null==c?void 0:c.id),m=(t,n)=>{var a;const s=e.searchCom(t.id);if(!s)return;let c=[],d=[];if(s.runtime.def.namespace===r.Vm.coms.module){const e=null===(a=s.ioProxyForCall)||void 0===a?void 0:a.frame.inputPins;e&&l.tk.each((e=>{c.push(e)}),e),s.inputPinExts.forEach((e=>{c.push(e)}))}else{const e=s.getInputsAll();e&&l.tk.each((e=>{c.push(e)}),...e);const t=s.configPins;t&&t.forEach((e=>{d.push(e)}))}o&&(c=c.filter((e=>{if(i(e.title))return e})),d=d.filter((e=>{if(i(e.title))return e})));const p=[];n.coms.push({id:t.id,com:s,inputPins:c.length>0?c:void 0,configPins:d.length>0?d:void 0,hover:t.hover,hoverLeave:t.hoverLeave,slots:p}),t.slots&&t.slots.forEach((e=>{const{id:t,title:n,coms:o}=e;if(o.length>0){const e={id:t,title:n,coms:[]};p.push(e),o.length>0&&o.forEach((t=>{m(t,e)}))}}))},p=[];return d&&d.forEach((e=>{m(e,{coms:p})})),p}function f({item:e,myCtx:t}){var n;const{context:o}=t,{id:i,com:a,level:l,slots:s}=e,c=o.getComDef(a.runtime.def);let u,h,g=null==c?void 0:c.icon;g&&"string"==typeof g&&(g.toUpperCase().startsWith("HTTP")||g.startsWith("data:image/"))&&(u=g,g=void 0),g||(null==c?void 0:c.namespace)===r.Vm.coms.module&&(g=r.PJ.Module),h=a.runtime.title;const y=(0,d.useCallback)((e=>{t.focusItem=e}),[]),x=[];return s&&s.forEach((e=>{const{id:n,title:o,coms:i}=e;i&&x.push(m().createElement("div",{key:e.id,className:`${p.Z.slot}`},m().createElement("div",{className:p.Z.slotTitle},o),m().createElement("div",{className:p.Z.slotBody},i.map((e=>m().createElement(f,{key:e.id,myCtx:t,item:e}))))))})),m().createElement(m().Fragment,null,m().createElement("div",{className:`${p.Z.item} \n                              ${(null===(n=t.focusItem)||void 0===n?void 0:n.id)===e.id?p.Z.itemFocus:""}\n                              ${"_calculate_"===e.id?p.Z.itemJS:""}\n                             `,onMouseEnter:t=>{e.hover()},onMouseLeave:t=>{e.hoverLeave()},onClick:t=>{y(Object.assign({type:"ui",title:h},e))}},m().createElement("span",{className:p.Z.icon},g||null,u?m().createElement("img",{src:u}):null),m().createElement("div",{className:p.Z.title},h)),x)}function h(e,t){const{style:n,pinModel:c,diagramModel:d,frameModel:m,context:p,tplContext:u}=(0,o.N7)(i.Z),{curDiagramModel:f}=u,h=p.getComDef({namespace:r.Vm.coms.frameOutput}),g=new r.u5(h,!1,m.title);g.addInputPin({hostId:e.hostId,title:e.title,schema:e.schema,proxyPin:e});const y=new a.n(g,h,{proxy:m});y.runtime.topl=y;const x=d.$el.getStage().getScaleX();let v=n.left,b=n.top;n.left<0&&(v=50),n.left>f.style.width&&(v=f.style.width-50),n.top<0&&(b=30),n.top>f.style.height&&(b=f.style.height-50);const E={x:v/x,y:b/x},C=u.emitSnap.start(`添加组件 ${y.runtime.title}`,{target:y}),w=d.addCom(y,E);e&&(0,s.fq)((n=>{const o=l.tk.find((t=>t.hostId===e.hostId),...w.getInputsAll());if(o&&o.$el){const e=d.addConnection(c,o);return u.emitComponent.connected(e),u.emitComponent.focus(w),C.commit(),t&&t(),!0}}),(()=>{C.cancel()}))}function g(e,t){const{style:n,pinModel:l,diagramModel:d,tplContext:m,context:p}=(0,o.N7)(i.Z),{viewModel:u,emitComponent:f,emitSnap:h,curDiagramModel:g}=m,y=l.$el.getStage().getScaleX();let x=n.left,v=n.top;n.left<0&&(x=50),n.left>g.style.width&&(x=g.style.width-50),n.top<0&&(v=30),n.top>g.style.height&&(v=g.style.height-50);const b={x:x/y,y:v/y},E=h.start("添加当前作用域输入组件",{target:d}),C=c.Z.comAray.find((e=>{if(e.namespace===r.Vm.coms.frameIn)return e})),w=new r.u5(C,!1,e.title),A=new a.n(w);A.inputPins[0].proxyPinValue=e,A.outputPins[0].proxyPinValue=e;const k=d.addCom(A,b);(0,s.fq)((()=>{let e=k.inputPins[0];if(e&&e.$el){if(void 0!==l.conMax){const e=l.conAry.filter((e=>!e.isTemp));if(e.length>=l.conMax){const t=e[e.length-1];f.delete(t),f.disConnected(t)}}const n=d.addConnection(l,e);return f.connected(n),f.focus(k),E.commit(),t&&t(),!0}}),(()=>{E.cancel()}))}function y(e,t){const{style:n,pinModel:l,diagramModel:d,tplContext:m,context:p}=(0,o.N7)(i.Z),{emitComponent:u,emitSnap:f,curDiagramModel:h}=m,g=l.$el.getStage().getScaleX();let y=n.left,x=n.top;n.left<0&&(y=50),n.left>h.style.width&&(y=h.style.width-50),n.top<0&&(x=30),n.top>h.style.height&&(x=h.style.height-50);const v={x:y/g,y:x/g},b=f.start("添加当前作用域输出组件",{target:d}),E=c.Z.comAray.find((e=>{if(e.namespace===r.Vm.coms.frameOut)return e})),C=new r.u5(E,!1,e.title),w=new a.n(C);w.inputPins[0].proxyPin=e;const A=d.addCom(w,v);(0,s.fq)((()=>{let e=A.inputPins[0];if(e&&e.$el){if(void 0!==l.conMax){const e=l.conAry.filter((e=>!e.isTemp));if(e.length>=l.conMax){const t=e[e.length-1];u.delete(t),u.disConnected(t)}}const n=d.addConnection(l,e);return u.connected(n),u.focus(A),b.commit(),t&&t(),!0}}),(()=>{b.cancel()}))}function x(e,t,n){const{style:r,pinModel:a,diagramModel:c,tplContext:d,context:m}=(0,o.N7)(i.Z),{viewModel:p,emitComponent:u,emitSnap:f,curDiagramModel:h}=d,g=a.$el.getStage().getScaleX();let y=r.left,x=r.top;r.left<0&&(y=50),r.left>h.style.width&&(y=h.style.width-50),r.top<0&&(x=30),r.top>h.style.height&&(x=h.style.height-50);const v={x:y/g,y:x/g},b={outputs:t.rels};t.isTypeOfConfig()?b.configs=[t.hostId]:b.inputs=[t.hostId];const E=f.start("添加组件",{target:c}),C=c.addCom(e,v,b);(0,s.fq)((()=>{let e;if(e=t.isTypeOfConfig()?C.configPins.find((e=>e.hostId===t.hostId)):l.tk.find((e=>e.hostId===t.hostId),...C.getInputsAll()),e&&e.$el){if(void 0!==a.conMax){const e=a.conAry.filter((e=>!e.isTemp));if(e.length>=a.conMax){const t=e[e.length-1];u.delete(t),u.disConnected(t)}}const t=c.addConnection(a,e);return u.connected(t),u.focus(C),E.commit(),n&&n(),!0}}),(()=>{E.cancel()}))}function v(e,t,n){const{style:c,pinModel:d,diagramModel:m,context:p,tplContext:u}=(0,o.N7)(i.Z),{curDiagramModel:f}=u,h=p.pageMetaModel.getPageById(e),g=p.getComDef({namespace:r.Vm.coms.scenes}),y=new r.u5(g,!1,h.title);let x;y.init({cancel(){}}),x="popup"===h.type?{sceneId:h.id,_inputs:{_open:"open"},outputs:r.CB}:{sceneId:h.id,_inputs:{_open:"open"}};const v=new a.n(y,g,{proxyForCall:x,inputs:["open"]});v.runtime.topl=v,v.runtime.model.data._sceneId=h.id,v.runtime.model.data._sceneShowType=h.type;const b=m.$el.getStage().getScaleX();let E=c.left,C=c.top;c.left<0&&(E=50),c.left>f.style.width&&(E=f.style.width-50),c.top<0&&(C=30),c.top>f.style.height&&(C=f.style.height-50);const w={x:E/b,y:C/b},A=u.emitSnap.start(`添加组件 ${v.runtime.title}`,{target:v}),k=m.addCom(v,w);t&&(0,s.fq)((e=>{const o=l.tk.find((e=>e.hostId===t.hostId),...k.getInputsAll());if(o&&o.$el){const e=m.addConnection(d,o);return u.emitComponent.connected(e),u.emitComponent.focus(k),A.commit(),n&&n(),!0}}),(()=>{A.cancel()}))}function b(e,t,n){const{style:c,pinModel:d,diagramModel:m,context:p,tplContext:u}=(0,o.N7)(i.Z),{curDiagramModel:f}=u,h=p.getComDef({namespace:r.Vm.coms.scenes}),g=new r.u5(h,!1,e.title);let y;g.init({cancel(){}}),y=p.configs.pageMetaLoader?{frameId:e.parent.id,_inputs:{_open:"open"},outputs:"all"}:{frame:e.parent,_inputs:{_open:"open"},outputs:"all"};const x=e.parent,v=new a.n(g,h,{proxyForCall:y,inputs:["open"]});v.runtime.topl=v,v.runtime.model.data._sceneId=x.id,v.runtime.model.data._sceneShowType=x.type;const b=m.$el.getStage().getScaleX();let E=c.left,C=c.top;c.left<0&&(E=50),c.left>f.style.width&&(E=f.style.width-50),c.top<0&&(C=30),c.top>f.style.height&&(C=f.style.height-50);const w={x:E/b,y:C/b},A=u.emitSnap.start(`添加组件 ${v.runtime.title}`,{target:v}),k=m.addCom(v,w);t&&(0,s.fq)((e=>{const o=l.tk.find((e=>e.hostId===t.hostId),...k.getInputsAll());if(o&&o.$el){const e=m.addConnection(d,o);return u.emitComponent.connected(e),u.emitComponent.focus(k),A.commit(),n&&n(),!0}}),(()=>{A.cancel()}))}function E(e,t,n){const{style:c,pinModel:d,diagramModel:m,context:p,tplContext:u}=(0,o.N7)(i.Z),{curDiagramModel:f}=u,h=p.getComDef({namespace:"mybricks.core-comlib.fn"}),g=new r.u5(h,!1,e.title),y=new a.n(g,h,{proxy:e.parent});y.runtime.topl=y;const x=m.$el.getStage().getScaleX();let v=c.left,b=c.top;c.left<0&&(v=50),c.left>f.style.width&&(v=f.style.width-50),c.top<0&&(b=30),c.top>f.style.height&&(b=f.style.height-50);const E={x:v/x,y:b/x},C=u.emitSnap.start(`添加组件 ${y.runtime.title}`,{target:y}),w=m.addCom(y,E);t&&(0,s.fq)((e=>{const o=l.tk.find((e=>e.hostId===t.hostId),...w.getInputsAll());if(o&&o.$el){const e=m.addConnection(d,o);return u.emitComponent.connected(e),u.emitComponent.focus(w),C.commit(),n&&n(),!0}}),(()=>{C.cancel()}))}},61388:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(83446),i=n(24608),r=n(44055);function a({onComplete:e}){const t=(0,o.N7)(i.Z,{from:"parents"});return(0,r.K)(t)}},44055:(e,t,n)=>{n.d(t,{K:()=>g});var o=n(83446),i=n(90359),r=n.n(i),a=n(44545),l=n(24608),s=n(23037),c=n(71442),d=n(2154),m=n(33397),p=n(81372),u=n(22613),f=n(92868),h=function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};function g(e){const{context:t,keywords:n}=e;return(0,i.useLayoutEffect)((()=>{if(e.navEle){const t=e.navEle.querySelectorAll(`.${a.Z.item}`);t.length>0&&t[0].click()}}),[]),r().createElement(r().Fragment,null,r().createElement("div",{className:a.Z.nav,style:{width:e.navWidth},ref:t=>{t&&(e.navEle=t)}},r().createElement(u.Z,{myCtx:e})),r().createElement(p.Z,null),r().createElement(y,null))}function y(){const e=(0,o.N7)(l.Z,{from:"parents"}),{focusItem:t,pinModel:n,tplContext:p,context:u,onComplete:f,keywords:h}=e,g=(0,i.useCallback)((e=>(0,o.Ft)((()=>{e(),p.assitWith=void 0})).stop),[]),y=t;if(y){const{id:t,title:n,type:o}=y;if("ui"===o&&"_calculate_"===y.id)return r().createElement(x,{myCtx:e});if("ui"===o&&"_defined_"===y.id)return r().createElement(v,{myCtx:e});{let e,t;if("vars"===o){const{com:n}=y;e=y.outputPins,t=e=>(0,d.V)(n,e,f)}else if("ui"===o){const{com:n}=y;e=y.outputPins,t=e=>(0,d.V)(n,e,f)}if("calculate"===o){const{comDef:n}=y;e=n.outputs,t=e=>(0,m.AF)(n,void 0,"autorun")}return r().createElement("div",{className:a.Z.pins},r().createElement("div",{className:a.Z.toolbar},r().createElement("span",null,n),"的 输出项"),r().createElement("div",{className:a.Z.content},e.map((e=>{var n;const o=(0,c.a0)(null===(n=e.schema)||void 0===n?void 0:n.type),i={borderColor:o.strokeColor,backgroundColor:o.fillColor},l=g((n=>{t(e)}));return r().createElement("div",{key:e.id,className:`${a.Z.pin}`,onClick:l},r().createElement("div",{className:a.Z.main},r().createElement("span",{className:a.Z.typeInfo,style:i}),r().createElement("span",{className:`${a.Z.pinTitle}`},e.title),r().createElement("span",{className:a.Z.pinType,style:{color:o.strokeColor}},(0,s.XQ)(e.schema))),e.desc?r().createElement("div",{className:a.Z.desc},e.desc):null)}))))}}if(h)return r().createElement(x,{myCtx:e})}function x({myCtx:e}){const{context:t,tplContext:n,keywords:o}=e,l=[],s=(0,i.useCallback)((t=>{(0,m.AF)(t,e,"autorun"),n.assitWith=void 0}),[]);return t.comLibAry.forEach(((t,n)=>{if(t.comAray){const i=[];t.comAray.forEach(((n,l)=>{var c,d,m;if(n.rtType&&n.rtType.match(/^js-autorun/gi)&&(void 0===n.visibility||n.visibility)&&(null===(c=n.outputs)||void 0===c?void 0:c.length)>0){if(""!==o&&!e.matchKeywords(n.title))return;let c;((null===(d=n.icon)||void 0===d?void 0:d.toUpperCase().startsWith("HTTP"))||(null===(m=n.icon)||void 0===m?void 0:m.startsWith("data:image/")))&&(c=n.icon),i.push(r().createElement("div",{key:`${t.id}-${l}`,className:`${a.Z.com} ${n.deprecated?a.Z.deprecated:""}`,onClick:e=>s(n)},r().createElement("div",{className:a.Z.icon},c?r().createElement("img",{src:c}):null),r().createElement("div",{className:a.Z.tt},r().createElement("div",{className:a.Z.title},n.title),r().createElement("div",{className:a.Z.desc},n.description))))}})),i.length>0&&(l.push(r().createElement("div",{key:`lib-${n}`,className:a.Z.lib},t.title)),l.push(...i))}})),r().createElement("div",{className:a.Z.coms},r().createElement("div",{className:a.Z.content},l))}function v({myCtx:e}){const{context:t,keywords:n}=e,l=[],s=(0,i.useCallback)((t=>{(0,m.AF)(t,e,!1)}),[]),c=t.comLibAry.find((e=>e.defined));if(!c)return;const d=[];return c.comAray&&c.comAray.forEach(((t,o)=>{var i,l,c;if(t.rtType&&t.rtType.match(/^js-autorun/gi)&&(void 0===t.visibility||t.visibility)&&(null===(i=t.inputs)||void 0===i?void 0:i.length)>0){if(n&&!e.matchKeywords(t.title))return;let o;((null===(l=t.icon)||void 0===l?void 0:l.toUpperCase().startsWith("HTTP"))||(null===(c=t.icon)||void 0===c?void 0:c.startsWith("data:image/")))&&(o=t.icon),d.push(r().createElement("div",{key:t.namespace,className:`${a.Z.com} ${t.deprecated?a.Z.deprecated:""}`,onClick:e=>s(t)},r().createElement("div",{className:a.Z.icon},o?r().createElement("img",{src:o}):null),r().createElement("div",{className:a.Z.tt},r().createElement("div",{className:a.Z.title},t.title),r().createElement("div",{className:a.Z.desc},t.description))))}})),l.push(r().createElement("div",{key:"lib-x",className:a.Z.lib},c.title)),l.push(...d),l.push(r().createElement("div",{key:"addDefined",onClick:(0,o.Ft)((()=>function(e,t){return h(this,void 0,void 0,(function*(){const n=t.context.configs.comLibLoader,o=yield n({cmd:"addCom",libId:e.id,libVersion:e.version});(0,f.R)(o,t.context)}))}(c,e))).stop,className:a.Z.addDefined},r().createElement("span",null,"+"),r().createElement("label",null,"添加组件"))),r().createElement("div",{className:a.Z.coms},r().createElement("div",{className:a.Z.content},l))}},2154:(e,t,n)=>{n.d(t,{V:()=>r});var o=n(83446),i=n(24608);function r(e,t,n){const{diagramModel:r,tplContext:a,style:l}=(0,o.N7)(i.Z),{viewModel:s,curDiagramModel:c,emitSnap:d}=a,m=c.$el.getStage().getScaleX();let p=l.left,u=l.top;l.left<0&&(p=50),l.left>c.style.width&&(p=c.style.width-50),l.top<0&&(u=30),l.top>c.style.height&&(u=c.style.height-50);const f={x:p/m,y:u/m};if("function"==typeof n)n(e,{outputs:[t.hostId]});else{const n=d.start("添加组件",{target:r}),o=c.addCom(e,f,{outputs:[t.hostId]});n.commit(),setTimeout((e=>{a.emitComponent.focus(o)}))}}},34166:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(40635),i=n(83446),r=n(98820),a=n(90359),l=n(81338),s=n(76954),c=n(90359);class d{}function m(){const e=(0,i.N7)(r.NH,{from:"parents"}),{viewCtx:t,model:n}=e,l=n.style,s=((0,i.mA)(d,(t=>{t({diagramCtx:e})}),{to:"children"}),(0,a.useRef)()),m=(0,a.useRef)(),u=((0,a.useCallback)((e=>{const t=(new Date).getTime();if(s.current){t-s.current<200?(u(e),s.current=void 0):s.current=t}else s.current=t}),[]),(0,a.useCallback)((e=>{const o=(0,i.dL)(m.current),r=e.evt.x-o.x,a=e.evt.y-o.y,l=n.addComment("注释",{x:r,y:a});setTimeout((e=>{t.emitComponent.focus(l)}))}),[])),f=n.commentAry;return c.createElement(o.Group,{x:0,y:0},c.createElement(o.Rect,{width:l.width,height:l.height,ref:m}),f.map((e=>c.createElement(p,{key:e.id,comment:e}))))}function p({comment:e}){const t=(0,i.N7)(d,{from:"parents"}),n=t.diagramCtx.viewCtx,r=(0,a.useRef)();(0,a.useMemo)((()=>{e.getConfigs=()=>(0,l.Z)(e,t.diagramCtx),e.getListeners=function(){return(0,s.Z)(e,t.diagramCtx)}}),[]);const m=(0,a.useCallback)((()=>{n.emitComponent.focus(e)}),[]);(0,a.useEffect)((()=>{const t=r.current;if(t){let o;t.draggable(!0),t.on("click",(o=>{n.context.focusOn(e)?t.draggable(!1):(t.draggable(!1),requestAnimationFrame((e=>{t.draggable(!0),m()})),o.evt.preventDefault())})),t.on("dragstart",(e=>{const t=e.target.attrs;o={x:t.x,y:t.y}})),t.on("dragend",(t=>{const n=t.target.attrs,i=n.x-o.x,r=n.y-o.y;e.po.x+=i,e.po.y+=r,m()}))}}),[]);const p=n.context.focusModel,u=(0,a.useMemo)((()=>e.width),[]);return c.createElement(c.Fragment,null,c.createElement(o.Group,{ref:r,x:e.po.x,y:e.po.y,visible:t.editNow!==e,onMouseDown:(0,i.Ft)().stop},c.createElement(o.Rect,{width:u,ref:e=>{e&&e.height(e.parent.children[1].height())},fill:"#FFFFFF"}),c.createElement(o.Text,{text:e.content,fill:"#aaa",width:u,fontSize:12,fontStyle:"italic",lineHeight:1.2})),p===e?c.createElement(o.Transformer,{x:e.po.x,y:e.po.y,anchorStroke:"#FA6400",anchorFill:"#FA6400",borderStroke:"#DDD",anchorSize:7,ref:e=>{e&&e.nodes([r.current])},rotateEnabled:!1,enabledAnchors:["middle-left","middle-right"],onTransform:e=>{const t=r.current.children[0],n=r.current.children[1],o=t.getClientRect(),i=n.getAbsoluteScale();n.scaleX(n.scaleX()/i.x),n.scaleY(n.scaleY()/i.y),o.width>20&&n.width(o.width)},onTransformEnd:t=>{const o=r.current.children[0],i=n.emitSnap.start("改变尺寸",{target:e});e.width=o.getClientRect().width,i.commit()}}):null)}},81338:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(79127),i=n(30761);function r(e,t){const{viewCtx:n,model:r}=t,{context:a,emitSnap:l,emitComponent:s}=n,c=[],d=new o.Af.Category("注释");c.push(d);let m=new o.Af.Group;return d.addGroup(m),m.addItem((0,i.B)(n,{title:"注释",type:"textarea",options:{style:{height:300}},value:{get:()=>e.content,set(t){e.content=t}}})),c}},76954:(e,t,n)=>{function o(e,t){const{model:n,viewCtx:o}=t,{emitSnap:i}=o;return[{title:"删除",keys:["Backspace","Delete"],exe:()=>{let e=i.start("itemDelete",{target:n});n.removeComment(),e.commit()}}]}n.d(t,{Z:()=>o})},40103:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(82715),i=n(90359),r=(n(79127),n(38109)),a=n(90359);function l({model:e,ctx:t}){const{emitMessage:n,emitLogs:l,emitSnap:s}=t,c=e.outputPins[0];(0,i.useCallback)((t=>{const n=t.target.value;if(""!==n){const t=s.start("renameVar",{target:e});e.runtime.title=n,t.commit()}}),[]);return a.createElement("div",{className:o.Z.editPanel},a.createElement("div",{className:o.Z.edtItem},a.createElement("label",null,"类型"),a.createElement("div",null,a.createElement(r.Z,{value:{get:()=>c.schema,set(t){e.inputPins.forEach((e=>{"set"===e.id&&(e.schema=t)})),e.outputPins.forEach((e=>{e.schema=t})),l.warn(`类型已修改为${t.type}`)}}}))))}},72433:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(83446),i=n(37181);function r(e,t){const{context:n,debugSlotStartWith:r,emitDebug:a,emitModule:l,emitFrame:s}=t,c=(0,i.aD)({frame:e}),d=n.configs.com||{},m=(0,o.d9)(d,!0),p=Object.assign({},m,{debug:!0,observable:o.LO,debug:({resume:e,ignoreAll:t})=>(a.init({resume:e,ignoreAll:t}),{log(e,t,n,i){const r=(0,o.d9)(n,!0);requestAnimationFrame((n=>{a.log("debug",e,t,r,i)}))},onResume(){a.resume()}}),onError({comId:e,error:t}){requestAnimationFrame((n=>{s.onError("com",{comId:e},t)}))}});p.env.runtime={debug:!0},p.comDefs=n.getAllComDef(),console.log(111,c),console.log(222,n.renderWeb),console.log(333,p),n.renderWeb(c,p)}},95827:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(79127),i=n(23037),r=n(30761);function a(e,t){const{viewModel:n,context:a,emitComponent:l,emitSnap:s,emitFind:c}=t,d=[],m=new o.Af.Category({title:e.title,setTitle(t){const n=s.start("rename",{target:e});e.title=t;e.parent.title=t,n.commit()}});d.push(m);const p=new o.Af.Group;return m.addGroup(p),a.isDesnMode()&&(p.addItem((0,r.B)(t,{title:"添加配置项",type:"button",value:{set(t){e.parent.addInputPin({hostId:(0,i.Vj)(),icon:"rectangle",type:"config",title:"新增配置项",desc:"配置项",schema:{type:"follow"},conMax:1,editable:!0,deletable:!0})}}})),p.addItem((0,r.B)(t,{title:"添加输出项",type:"button",value:{set(t){e.parent.addOutputPin({hostId:(0,i.Vj)(),title:"新增输出项",schema:{type:"follow"},conMax:1,editable:!0,deletable:!0})}}}))),d}},90092:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(79127),i=n(30761);function r(e,t){const{model:n,viewCtx:r}=t,{viewModel:a,context:l,emitComponent:s,emitSnap:c}=r,d=[],m=new o.Af.Category("组");d.push(m);let p=new o.Af.Group;return m.addGroup(p),p.addItem((0,i.B)(r,{title:"标题",type:"text",value:{get:()=>e.title,set(t){e.title=t}}})),p.addItem((0,i.B)(r,{title:"颜色",type:"colorPicker",value:{get:()=>e.style.color,set(t){if(t.indexOf("rgba")>=0){const n=t.substring(0,t.lastIndexOf(","))+",0.3)";e.style.color=n}}}})),d}},33001:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(79127),i=n(23037),r=n(30761),a=n(83446),l=n(18132),s=n(72433),c=n(90359);function d(e,t){var n,d;const{viewModel:m,context:p,isMainSlot:u,emitComponent:f,emitSnap:h,emitScenes:g}=t,y=e.parent,x=[],v=new o.Af.Category({title:e.title,setTitle(t){const n=h.start("rename",{target:e});e.title=t;const o=e.parent;o.title=t;try{g.setTitle(o.id,t,"toplView")}catch(e){}n.commit()}});x.push(v);const b=new o.Af.Group;v.addGroup(b);const E=p.configs,C=null===(d=null===(n=t.configs.cards)||void 0===n?void 0:n.main)||void 0===d?void 0:d.ioEditable,w=y.parent;if(p.isDesnMode()&&(C&&!y.isTypeOfPopup()||y.isTypeOfModule())&&(w||b.addItem((0,r.B)(t,{title:"添加 输入项",type:"button",value:{set(e){const t=(0,i.Vj)(),n=h.start("addInput",{target:y});y.addInputPin({id:t,hostId:t,type:"normal",title:`新增输入项${y.inputPins.length+1}`,schema:{type:"string"},editable:!0,deletable:!0}),n.commit()}}})),b.addItem((0,r.B)(t,{title:"添加 "+(w?"输出连接项":"输出项"),type:"button",value:{set(e){const t=(0,i.Vj)(),n=h.start("addOutput",{target:y});w?y.addOutputJoint({id:t,hostId:t,title:`新增连接项${y.outputJoints.length+1}`,schema:{type:"follow"},icon:"arrowR"}):y.addOutputPin({id:t,hostId:t,title:`新增输出项${y.outputPins.length+1}`,schema:{type:"string"},editable:!0,deletable:!0}),n.commit()}}}))),y.catalogId){const e=t.configs.outline;if(Array.isArray(e)){const n=e.find((e=>e.catalogId===y.catalogId));if(n&&Array.isArray(n.editors)&&n.editors.length>0){const e=new o.Af.Group;n.editors.forEach((n=>{n.title&&"_execute"===n.type&&e.addItem((0,r.B)(t,{title:`${n.title}`,type:"button",value:{set(e){(0,s.Z)(y,t)}}}))})),e.items&&v.addGroup(e)}}}const A=p.getPluginAry();if(A&&u(y)){const n=new o.Af.Group({title:"扩展"});v.addGroup(n),A.forEach((o=>{var l,s,c;const d=null===(c=null===(s=null===(l=o.contributes)||void 0===l?void 0:l.toplView)||void 0===s?void 0:s.globalIO)||void 0===c?void 0:c.configs,m=e.parent;if("object"==typeof d&&d){const e=d.addInput;e&&"object"==typeof e&&"config"===e.type&&n.addItem((0,r.B)(t,{title:e.title,type:"button",value:{set(t){const n=(0,i.Vj)();let r=e.values;return"object"==typeof r&&r&&(r=(0,a.d9)(r)),m.addInputPin({type:"config",fromPlugin:o.name,hostId:n,title:`新建${e.typeTitle||"配置项"}${m.inputPins.length+1}`,typeTitle:e.typeTitle,schema:e.schema,icon:"rectangle",conMax:1,editable:!0,deletable:!0,extValues:r}),n}}}))}}))}const k=new o.Af.Group;if(k.fixedAt="bottom",p.isDesnMode()&&y.deletable&&(v.addGroup(k),k.addItem((0,r.B)(t,{title:"删除",type:"button",options:{type:"danger"},value:{set(t,n){const o=h.start("itemDelete",{target:e});f.delete(e),f.focus(void 0),o.commit()}}}))),!E.geoView){const n=new o.Af.Category("高级");x.push(n);const i=new o.Af.Group;n.addGroup(i),(e.startWithCom||1===e.parent.inputPins.length)&&i.addItem((()=>c.createElement(l.HY,{tvCtx:t,value:{get(){var t;return null===(t=e.runtimeBefore)||void 0===t?void 0:t[0]},set(t){if(t){const n=h.start("itemChange",{target:e});e.runtimeBefore=[t],n.commit()}}}})))}return x}},94980:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(79127),i=n(23037),r=n(30761);function a(e,t){const{context:n,emitComponent:a,emitSnap:l,emitScenes:s}=t,c=e.parent,d=[],m=new o.Af.Category({title:e.title,setTitle(t){const n=l.start("rename",{target:e});e.title=t,c.title=t,s.setTitle(c.id,t,"toplView"),n.commit()}});d.push(m);const p=new o.Af.Group;if(m.addGroup(p),n.isDesnMode()&&(p.addItem((0,r.B)(t,{title:"添加 编辑项",type:"button",value:{set(e){c.addInputPin({hostId:(0,i.Vj)(),icon:"rectangle",type:"config",title:"新增编辑项",desc:"编辑项",schema:{type:"string"},conMax:1,editable:!0,deletable:!0})}}})),p.addSeparator(),p.addItem((0,r.B)(t,{title:"添加 输入项",type:"button",value:{set(e){const t=(0,i.Vj)(),n=l.start("addInput",{target:c});c.addInputPin({id:t,hostId:t,type:"normal",title:`新增输入项${c.inputPins.length+1}`,schema:{type:"string"},editable:!0,deletable:!0}),n.commit()}}})),p.addItem((0,r.B)(t,{title:"添加 输出项",type:"button",value:{set(e){c.addOutputPin({hostId:(0,i.Vj)(),title:"新增输出项",schema:{type:"follow"},conMax:1,editable:!0,deletable:!0})}}}))),n.isDesnMode()){const e=new o.Af.Group;e.fixedAt="bottom",m.addGroup(e)}return d}},78048:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(79127);function i(e,t){const{viewModel:n,context:i,emitComponent:r,emitSnap:a}=t,l=[],s=new o.Af.Category({title:e.title,setTitle(t){const n=a.start("rename",{target:e});e.title=t,n.commit()}});l.push(s);let c=new o.Af.Group;return s.addGroup(c),l}},98301:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(79127),i=n(30761);function r(e,t){const{context:n,emitComponent:r,emitSnap:a}=t,l=[],s=new o.Af.Category(e.title);l.push(s);const c=new o.Af.Group;if(s.addGroup(c),c.addItem((0,i.B)(t,{title:"标题",type:"text",value:{get:()=>e.title,set(t){e.title=t}}})),n.isDesnMode()){const n=new o.Af.Group;n.fixedAt="bottom",s.addGroup(n),n.addItem((0,i.B)(t,{title:"删除",type:"button",options:{type:"danger"},value:{set(t,n){const o=a.start("itemDelete",{target:e});if(e.startWithOutput.isTypeOfShotcut()){e.parent.removeOutputPin(e.startWithOutput.hostId)}r.delete(e),r.focus(void 0),o.commit()}}}))}return l}},25699:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(79127),i=n(40103),r=n(30761),a=n(90359);function l(e,t){const{viewModel:n,emitFind:l,context:s,emitComponent:c,emitSnap:d}=t,m=e.varCom,p=[],u=new o.Af.Category({title:e.title,setTitle(t){const n=d.start("rename",{target:e});m.runtime.title=t,e.title=t,n.commit()}});if(p.push(u),s.isDesnMode()){const e=new o.Af.Group;u.addGroup(e),e.addItem(new o.Af.FunctionItem((()=>a.createElement(i.Z,{model:m,ctx:t})))),e.addItem((0,r.B)(t,{title:"初始值",type:"_schemaValue",desc:"变量最初的取值",options:()=>({schema:m.outputPins.find((e=>"return"===e.hostId)).schema}),value:{get:()=>m.data.initValue,set(e){m.data.initValue=e}}}))}return p}},79854:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(22270),i=n(46030),r=n(83446),a=n(79127),l=n(5962),s=n(90359),c=n.n(s);function d({tvCtx:e}){const{context:t,viewModel:n}=e,d=(0,s.useCallback)((e=>{e.state.editingTitleF=!0}),[]);if(!e.pinConTodo&&t.listeners){const s=t.focusModel;if(s){let p,u,f;if(s instanceof l.o){p="连接",s.errorInfo&&(u=s.errorInfo);const{startPin:t,finishPin:o}=s,i=(0,r.dL)(t.$el,e.viewModel.$el),a=n.style;f={left:i.x+a.left,top:i.y+a.top}}if(s instanceof o.n){if(s.state.isMoving())return;const o=(0,r.dL)(s.$el,e.viewModel.$el),i=n.style;if(f={left:o.x+i.left,top:o.y+i.top},s.runtime){p=s.runtime.title;u=`${t.getComDef(s.runtime.def).title} 组件`}}if(p)return s instanceof o.n?c().createElement("div",{className:i.Z.toolbar,style:f},c().createElement("div",{className:i.Z.info,"data-mybricks-tip":"双击编辑标题",onDoubleClick:(0,r.Ft)((e=>d(s))).stop},c().createElement("label",null,p),c().createElement(m,{model:s}),u?c().createElement("span",null,"(",u,")"):void 0),c().createElement(a.rb,{context:t})):c().createElement("div",{className:i.Z.toolbar,style:f},c().createElement("div",{className:i.Z.info},c().createElement("label",null,p),u?c().createElement("span",null,"(",u,")"):void 0),c().createElement(a.rb,{context:t}))}}}function m({model:e}){if(!e)return;const t=(0,s.useRef)(),[n,o]=(0,s.useState)(e.runtime.title);(0,s.useEffect)((()=>()=>{t.current=void 0}),[]);const a=(0,s.useCallback)((()=>{n!==e.runtime.title&&(e.runtime.title=n,e.state.editingTitleF=!1,t.current=void 0)}),[n]);return e&&e.state.editingTitleF?c().createElement("div",{className:i.Z.titleEditor,onClick:(0,r.Ft)().stop},c().createElement("input",{key:e.id,ref:e=>{e&&(t.current||(t.current=e,e.select()))},onBlur:a,onKeyDown:e=>{"Enter"===e.key&&a()},type:"text",value:n,onChange:e=>{o(e.target.value)}})):void 0}},41938:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(83446),i=n(98820),r=n(90359),a=n.n(r),l=n(40635);function s(){const{viewCtx:e,model:t}=(0,o.N7)(i.NH,{from:"parents"}),n=t.style.width,s=t.style.height,d=(0,r.useCallback)((({cursor:e})=>({fill:"transparent",onMouseEnter:t=>{t.target.getStage().container().style.cursor=e},onMouseLeave:e=>{e.target.getStage().container().style.cursor="default"}})),[]);return a().createElement(a().Fragment,null,a().createElement(l.Rect,Object.assign({x:0,y:s-5,width:n,height:10},d({cursor:"ns-resize"}),{onMouseDown:(0,o.Ft)((e=>c("h",e))).stop})),a().createElement(l.Rect,Object.assign({x:n-5,y:0,width:10,height:s},d({cursor:"ew-resize"}),{onMouseDown:(0,o.Ft)((e=>c("w",e))).stop})))}function c(e,t){const{viewCtx:n,model:r}=(0,o.N7)(i.NH),{emitSnap:a,scale:l,viewModel:s}=n;let c,{x:d,y:m,w:p,h:u}=(0,o.dL)(r.$el);const f=n.viewModel.$el,h=r.style;(0,o.qw)(t,(({po:{x:t,y:n},epo:{ex:o,ey:i},dpo:{dx:s,dy:d}},m)=>{if("start"==m&&(c=a.start("comResize",{target:r}),r.connections.changing()),"moving"==m){if("h"==e||"all"==e){if(u+=d/l,u<=200)return;let e=0;r.comAry.forEach((t=>{t.$el&&(e=Math.max(e,t.style.top+t.$el.getClientRect().height))})),h.height=u<e+10?e+10:u}if("w"==e||"all"==e){if(p+=s/l,p<=300)return;let e=0;r.comAry.forEach((t=>{t.$el&&(e=Math.max(e,t.style.left+t.$el.getClientRect().width))})),h.width=p<e+50?e+50:p,r.startWithCom||r.isVar?(r.isVar,r.refreshInnerCons(r,!0,"output")):(r.showIO||r.isFn)&&r.parent.refreshInnerCons(r,!0,"output")}f.width()<h.width+200&&f.width(h.width+200),f.height()<h.height+200&&f.height(h.height+200)}if("finish"==m){c.commit();r.$el.getStage().container().style.cursor="default",r.connections.changed()}}))}},49588:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(76732),i=n(90359),r=n.n(i),a=n(42372),l=n(79127);const s=[.5,.75,1,1.5,2];function c({viewCtx:e}){const{viewModel:t,context:n,curDiagramModel:c,emitComponent:m}=e,p=(0,i.useCallback)((()=>{e.goCanvasHome()}),[]),u=(0,i.useCallback)((()=>{const t=e.debugger;t.breakNow=void 0,t.resume()}),[]),f=(0,i.useCallback)((()=>{const t=e.debugger;t._ignoreAll?(t._ignoreAll=void 0,t.ignoreAll(!1)):(t._ignoreAll=!0,t.ignoreAll(!0))}),[]),h=(0,i.useCallback)((()=>{e.backwardDiagramView()}),[]),g=(0,i.useCallback)((()=>{e.forwardDiagramView()}),[]),y=e.debugger;return r().createElement("div",{className:o.Z.toolbar},r().createElement("div",{className:o.Z.lyLeft},r().createElement("span",{className:o.Z.home,onClick:p,"data-mybricks-tip":"显示画布"},l.PJ.anchor)),r().createElement("div",{className:o.Z.lyCenter},r().createElement("span",{className:`${o.Z.btn14} ${e.canBackwardDiagramView()?"":o.Z.disableBtn}`,onClick:h,"data-mybricks-tip":"后退"},a.Xd),r().createElement("span",{className:`${o.Z.btn14} ${e.canForwardDiagramView()?"":o.Z.disableBtn}`,onClick:g,"data-mybricks-tip":"前进"},a.ol),n.isDebugMode()?r().createElement(r().Fragment,null,r().createElement("span",{className:y.breakNow&&!y._ignoreAll?o.Z.ableBtn:o.Z.disableBtn,onClick:u,"data-mybricks-tip":"继续运行"},l.PJ.Resume),r().createElement("span",{className:y._ignoreAll?o.Z.activeBtn:"",onClick:f,"data-mybricks-tip":y._ignoreAll?"断点生效":"忽略断点"},l.PJ.IgnoreBreakpoint)):null),r().createElement("div",{className:o.Z.lyRight},r().createElement("button",{className:o.Z.zoomIn,onClick:t=>d(t,"-",e),"data-mybricks-tip":"缩小视图"},"-"),r().createElement("select",{className:o.Z.zoom,onChange:t=>d(t,t.target.value,e),value:e.scale},s.map(((e,t)=>r().createElement("option",{key:t,value:e},100*e,"%")))),r().createElement("button",{className:o.Z.zoomOut,onClick:t=>d(t,"+",e),"data-mybricks-tip":"放大视图"},"+")))}function d(e,t,n){const o=s.indexOf(n.scale);n.viewModel.$el,n.scale;"-"===t?o>0&&(n.scale=s[o-1]):"+"===t?o<s.length-1&&(n.scale=s[o+1]):n.scale=parseFloat(t)}},42372:(e,t,n)=>{n.d(t,{Xd:()=>i,ol:()=>r});var o=n(90359);o.createElement("svg",{t:"1648196678791",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"15987",width:"12",height:"12"},o.createElement("path",{d:"M981.428179 275.0976h-142.336v144.7936a43.1104 43.1104 0 0 1-42.752 43.4176 43.1104 43.1104 0 0 1-42.7008-43.4176V275.0976h-142.3872a43.0592 43.0592 0 0 1-42.7008-43.4688c0-23.9616 19.0976-43.4176 42.7008-43.4176h142.3872V43.4176c0-23.9616 19.1488-43.4176 42.7008-43.4176 23.6032 0 42.752 19.456 42.752 43.4176v144.7936h142.336c23.6032 0 42.752 19.456 42.752 43.4176a43.1104 43.1104 0 0 1-42.752 43.4688z m-463.4624-174.0288H164.890579c-45.4656 0-82.3296 37.5296-82.3296 83.8144v670.7712c0 46.2336 36.864 83.8144 82.3296 83.8144h658.6368c45.4656 0 82.432-37.5808 82.432-83.8144V499.4048a40.6528 40.6528 0 0 1 41.4208-41.5744 41.472 41.472 0 0 1 40.9088 41.6256v356.864c0 92.5184-73.6768 167.6288-164.7616 167.6288H164.890579c-90.9824 0-164.7616-75.1104-164.7104-167.6288V185.5488C0.128979 92.9792 73.908179 17.9712 164.890579 17.8688h352.9728a41.4208 41.4208 0 0 1 40.96 41.5744 41.5232 41.5232 0 0 1-40.8576 41.6256z","p-id":"15988"})),o.createElement("svg",{t:"1655711872482",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7815",width:"20",height:"20"},o.createElement("path",{d:"M889.344 752.384c-1.792 6.272-9.856 10.624-20.544 16.384-11.584 6.08-21.632 5.504-28.8 3.52-6.976-2.048-13.248-6.656-18.496-13.632l-96.256-127.36-116.8 126.72c-13.952 15.104-29.76 17.344-47.808 6.656-7.424-4.352-20.992-20.48-22.592-27.776-1.536-7.232 1.344-14.848 8.768-22.976l129.152-140.544L581.888 448.896C577.984 443.2 577.6 436.544 580.672 428.992c2.944-7.552 9.92-12.032 17.344-16.448 10.688-6.016 20.48-6.208 27.712-5.632C633.024 407.36 639.616 411.52 645.696 419.2l78.208 101.952 94.656-103.104C826.752 408.96 836.032 405.76 844.992 403.2c8.896-2.56 26.496 6.656 36.096 12.032 9.856 5.312 14.976 11.456 15.616 18.368 0.576 6.912-2.112 13.696-8.256 20.416l-115.648 125.44 114.112 156.48C890.496 740.608 891.392 746.24 889.344 752.384zM592.128 128.576C552 124.032 467.968 118.016 417.024 150.976 365.952 184.064 336.64 240.896 322.432 308.48L302.4 403.968 158.592 403.968c-16.704 0-30.016 4.8-31.424 34.752 1.408 16.32 14.72 29.248 31.424 29.248L288.64 467.968l-85.696 418.688c0 0-21.952 68.288 26.048 71.296 41.92 2.624 50.24-65.6 50.24-65.6l86.4-424.384 109.76 0c17.664 0 32-14.336 32-32s-14.336-32-32-32L379.264 403.968l19.008-93.568C438.912 161.28 514.688 197.504 584.704 197.504c11.456 0 54.656 3.008 57.664-26.56C646.208 133.952 609.024 130.496 592.128 128.576zM126.592 443.392c0-1.92 0.448-2.88 0.576-4.608C127.04 437.824 126.592 436.992 126.592 435.968L126.592 443.392z","p-id":"7816"})),o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},o.createElement("path",{d:"M512 96C282.624 96 96 282.624 96 512s186.624 416 416 416 416-186.624 416-416S741.376 96 512 96z m0 768C317.92 864 160 706.08 160 512S317.92 160 512 160s352 157.92 352 352-157.92 352-352 352z"}),o.createElement("path",{d:"M466.816 324.96a32 32 0 0 0-50.816 25.888v339.776a32 32 0 0 0 50.816 25.856l233.6-169.888a32 32 0 0 0 0-51.776l-233.6-169.856z"}));const i=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.createElement("path",{d:"M896 544H250.4l242.4 242.4L448 832 173.6 557.6 128 512l45.6-45.6L448 192l45.6 45.6L250.4 480H896v64z"})),r=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.createElement("path",{d:"M128 480h645.6L530.4 237.6 576 192l274.4 274.4L896 512l-45.6 45.6L576 832l-45.6-45.6L773.6 544H128v-64z"}))},33291:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(41938),i=n(90359),r=n.n(i);function a(){return r().createElement(r().Fragment,null,r().createElement(o.Z,null))}},43847:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(78263),i=n(83446);function r(e){const{model:t,viewCtx:n}=e,{viewModel:r,context:a,emitFind:l,emitComponent:s,emitWindowEvents:c,emitSnap:d}=n,m=[{title:"添加注释",exe:()=>{const e=a.contextMenuEvent;if(e){const{event:o}=e,r=(0,i.dL)(t.$el),a=o.evt.x-r.x,l=o.evt.y-r.y,s=t.addComment("注释",{x:a,y:l});setTimeout((e=>{n.emitComponent.focus(s)}))}}},null,{title:"整理",exe:()=>{(0,o.M)(t,n)}},{title:"查看 引用",exe:()=>{const e=r.searchDiagramByFxRef(t.parent)||[];l.showUsed({type:"used",title:`${t.title}的引用`,results:e.map((e=>({id:e.id,title:e.title,results:e.results.map((e=>({type:"diagram",id:e.id,title:e.title,focus(){s.focus(e)}})))})))})}},null,{title:"删除Fx卡片",keys:["Backspace","Delete"],exe:()=>{const e=d.start("itemDelete",{target:t});if(t.isVar){const e=t.varCom;s.delete(e)}s.delete(t),s.focus(void 0),e.commit()}}];if(a.clipboard){const{type:e,json:t}=a.clipboard;e.match(/toplCom|toplComs/)&&m.unshift({title:"粘贴到这里",keys:["Ctrl+v"],exe:()=>{c.paste()}})}return m}},21576:(e,t,n)=>{function o(e,t){const{model:n,viewCtx:o}=t,{emitComponent:i,emitSnap:r,emitMessage:a,emitView:l}=o;let s=[];return s.push({title:"解散组",keys:["Backspace","Delete"],exe:()=>{const t=r.start("itemDelete",{target:n});n.removeGroup(e),i.focus(void 0),t.commit()}}),s}n.d(t,{Z:()=>o})},77728:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(78263),i=n(83446);function r(e){const{model:t,viewCtx:n}=e,{context:r,emitComponent:a,emitWindowEvents:l,emitSnap:s}=n,c=[{title:"添加注释",exe:()=>{const e=r.contextMenuEvent;if(e){const{event:o}=e,r=(0,i.dL)(t.$el),a=o.evt.x-r.x,l=o.evt.y-r.y,s=t.addComment("注释",{x:a,y:l});setTimeout((e=>{n.emitComponent.focus(s)}))}}},{title:"整理",exe:()=>{(0,o.M)(t,n)}},null,{title:"删除",keys:["Backspace","Delete"],exe:()=>{const e=s.start("itemDelete",{target:t});if(t.isVar){const e=t.varCom;a.delete(e)}a.delete(t),a.focus(void 0),e.commit()}}];if(r.clipboard){const{type:e,json:t}=r.clipboard;e.match(/toplCom|toplComs/)&&c.unshift({title:"粘贴到这里",keys:["Ctrl+v"],exe:()=>{l.paste()}})}return c}},6965:(e,t,n)=>{n.d(t,{C:()=>l});var o=n(23037),i=n(71442),r=n(78263),a=n(83446);function l(e){const{model:t,viewCtx:n}=e,{context:l,emitComponent:s,emitWindowEvents:c,emitSnap:d}=n,m=[{title:"添加注释",exe:()=>{const e=l.contextMenuEvent;if(e){const{event:o}=e,i=(0,a.dL)(t.$el),r=o.evt.x-i.x,l=o.evt.y-i.y,s=t.addComment("注释",{x:r,y:l});setTimeout((e=>{n.emitComponent.focus(s)}))}}},{title:"添加起始组件",exe:()=>{const e=l.contextMenuEvent;if(e){const{event:r}=e,{viewModel:a,context:l}=n;if(!l.isDesnMode())return;n.assitWith=void 0;const s=t.$el.getStage().container(),c=(0,o.bt)(s);n.assitWith={diagramModel:t,type:"outputs",position:{x:r.evt.clientX-a.style.left-c.x-i.nM,y:r.evt.clientY-a.style.top-c.y-i.nM}}}}}];if(l.clipboard){const{type:e,json:t}=l.clipboard;e.match(/toplCom|toplComs/)&&m.push({title:"粘贴到这里",keys:["Ctrl+v"],exe:()=>{c.paste()}})}return m.push(null),m.push({title:"整理",exe:()=>{(0,r.M)(t,n)}}),m}},39627:(e,t,n)=>{n.d(t,{C:()=>r});var o=n(78263),i=n(83446);function r(e){const{model:t,viewCtx:n}=e,{viewModel:r,context:a,emitComponent:l,emitWindowEvents:s,emitSnap:c,emitFind:d}=n,m=[{title:"添加注释",exe:()=>{const e=a.contextMenuEvent;if(e){const{event:o}=e,r=(0,i.dL)(t.$el),a=o.evt.x-r.x,l=o.evt.y-r.y,s=t.addComment("注释",{x:a,y:l});setTimeout((e=>{n.emitComponent.focus(s)}))}}},{title:"整理",exe:()=>{(0,o.M)(t,n)}},null,{title:"查看 读取 的引用",exe:()=>{const e=t.varCom,n=r.searchDiagramByVarRef(e,"get");d.showUsed({type:"used",title:`变量 ${e.title} 读取 引用`,results:n.map((e=>({id:e.id,title:e.title,results:e.results.map((e=>({type:"diagram",id:e.id,title:e.title,focus(){l.focus(e)}})))})))})}},{title:"查看 赋值 的引用",exe:()=>{const e=t.varCom,n=r.searchDiagramByVarRef(e,"set");d.showUsed({type:"used",title:`变量 ${e.title} 读取 引用`,results:n.map((e=>({id:e.id,title:e.title,results:e.results.map((e=>({type:"diagram",id:e.id,title:e.title,focus(){l.focus(e)}})))})))})}},null,{title:"删除变量",keys:["Backspace","Delete"],exe:()=>{const e=c.start("itemDelete",{target:t}),n=t.varCom;l.delete(n),l.delete(t),l.focus(void 0),e.commit()}}];if(a.clipboard){const{type:e,json:t}=a.clipboard;e.match(/toplCom|toplComs/)&&m.unshift({title:"粘贴到这里",keys:["Ctrl+v"],exe:()=>{s.paste()}})}return m}},93696:(e,t,n)=>{n.d(t,{$B:()=>h,K7:()=>g,Wn:()=>u,r9:()=>f});var o=n(90359),i=n.n(o),r=n(83446),a=n(2334),l=n(60722),s=n(23037),c=n(79127),d=n(71442);let m;function p({type:e,diagram:t,tvContext:n,classNames:s,isRunning:d,children:p}){const{context:u,emitComponent:f,isCurDiagram:h}=n,g=t.parent,y=h(t.id),[x,v]=(0,o.useState)("");(0,r.vc)((()=>{if((u.isDebugMode()||g&&g.debuggable)&&t.comAry){const e=t.comAry.find((e=>{const t=e._exeInfo;if(t&&t.errorMsg)return!0}));v(e?e._exeInfo.errorMsg:void 0)}}));const b=(0,r.vc)((()=>t.conAry.find((e=>{if(e.isBreakpoint)return!0})))),E=(0,r.vc)((()=>{if(u.isDebugMode()){if("fxCard"===e||"frameCard"===e){const e=g.inputPins;if(e&&e.find((e=>e.exe)))return!0}if(t.comAry.find((e=>{if(e.isRunning())return!0})))return!0}})),C=void 0!==d?d:E,w=(0,o.useCallback)((e=>{m||(m=(0,r.pC)()),m.push((()=>{f.reFocus(e)}))}),[]),A=(0,o.useCallback)((e=>{e.isVar?n.viewFilter={type:"var",data:{varComId:e.varCom.id},title:e.title}:e.isFn&&(n.viewFilter={type:"fx",data:{frameId:e.parent.id},title:e.title})}),[]),k=n.debugger,F=x&&u.isDebugMode();let Z;return Z=F?i().createElement("i",{className:a.Z.error,"data-mybricks-tip":`{content:'${x}',position:'right'}`},l.mh):i().createElement("i",{className:a.Z.runIcon},l.zb),i().createElement("div",{key:t.id,className:`${a.Z.item} ${s}  ${y?a.Z.cur:""}\n                                    ${C?a.Z.running:""}\n                                    ${F?a.Z.errorCard:""}`,onClick:(0,r.Ft)((e=>w(t))).stop},Z,p,b?i().createElement("div",{className:`${a.Z.breakpoint} ${k._ignoreAll?a.Z.ignoreBP:null}`},"|"):null,t.cooperation?i().createElement(c.tB,{model:t.cooperation,style:{right:3,top:-5}}):null,t.isFn||t.isVar?i().createElement("span",{className:a.Z.iconFilter,onClick:(0,r.Ft)((e=>{A(t)})).stop},c.PJ.Filter):null)}function u({diagram:e,myCtx:t}){const{context:n,configs:o}=t.tvContext,r="normal"===o.mode;return i().createElement(p,{classNames:a.Z.itemFrame,diagram:e,tvContext:t.tvContext,type:"frameCard"},i().createElement("label",{className:a.Z.typeIcon},r?l.t6:c.PJ.SlotScoped),i().createElement("span",{className:a.Z.itemTitle},e.title),e.filteredNow?i().createElement("span",{className:a.Z.titleSuffix},"（引用）"):null)}function f({diagram:e,ctx:t}){const{viewFilter:n}=t;let o;const r=e.varCom;if(r){const e=r.outputPins[0],t=(0,d.a0)(e.schema.type);t&&(o=t.strokeColor)}const l=n&&"var"===n.type&&n.data.varComId===r.id;return i().createElement(p,{classNames:`${a.Z.itemVar} ${l?a.Z.highlightVarFx:""}`,diagram:e,tvContext:t},i().createElement("label",{className:a.Z.typeIcon,style:{color:o}},"@"),i().createElement("span",{className:a.Z.itemTitle},e.varCom.title),e.filteredNow?i().createElement("span",{className:a.Z.titleSuffix},"（引用）"):null)}function h({diagram:e,tvCtx:t}){const{viewFilter:n}=t,o=n&&"fx"===n.type&&n.data.frameId===e.parent.id;return i().createElement(p,{classNames:`${a.Z.itemFx} ${o?a.Z.highlightVarFx:""}`,diagram:e,tvContext:t,type:"fxCard"},i().createElement("label",{className:a.Z.typeIcon},"fx"),i().createElement("span",{className:a.Z.itemTitle},e.title),e.filteredNow?i().createElement("span",{className:a.Z.titleSuffix},"（引用）"):null)}function g({diagram:e,myCtx:t}){const{context:n}=t.tvContext;let o=e.title||"",l=o.indexOf("> ");l>=0&&(o=o.substring(l+2));const d=(0,r.vc)((()=>{if(n.isDebugMode()){const t=e.startWithCom;if(t){const e=t.getOutputsAll();if(e&&s.tk.find((e=>{if(e.exe||e.forkedFrom.exe)return!0}),...e))return!0}}return!1}));return i().createElement(p,{diagram:e,isRunning:d,tvContext:t.tvContext},i().createElement("label",{className:a.Z.typeIcon},c.PJ.Event),i().createElement("span",{className:a.Z.itemTitle},o),e.filteredNow?i().createElement("span",{className:a.Z.titleSuffix},"（引用）"):null)}},42871:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(83446),i=n(59014),r=n(90359),a=n.n(r),l=n(24318),s=n(1306),c=n(79127),d=n(39740),m=n(82098),p=n(23037);function u(){const e=(0,o.N7)(d.Z,{from:"parents"}),{configs:t}=e,n=e.curFrameModel,r=(0,o.mA)(s.R,(t=>{t({tvContext:e})})),l=t.outline;return a().createElement(a().Fragment,null,l?a().createElement(f,{myCtx:r}):n?a().createElement("div",{className:i.Z.body0},a().createElement(m.Z,{key:n.id,frameModel:n,rootF:!0,myCtx:r})):null)}function f({myCtx:e}){var t;const{configs:n,viewModel:d,curFrameModel:u,context:f,emitComponent:h,emitSnap:g,emitMessage:y}=e.tvContext,x=f.configs,v=(0,o.N7)(s.A,{from:"parents"}),b=(0,r.useCallback)(((e,t)=>{var n;if(1===(null===(n=e.outputs)||void 0===n?void 0:n.length)){const n=new c.u5(e),o=g.start("add component"),i=h.add({seedModel:n,autorun:!0,state:"finish"});let r;r=Array.isArray(i)?i.filter((e=>e))[0]:i,h.bindScript(r.id,t,void 0),o.commit();const a=d.frames[0];requestAnimationFrame((()=>{const e=a.diagramAry[a.diagramAry.length-1];h.focus(e)}))}else y.error(`组件${e.title}的输出项有误.`)}),[]),E=(0,r.useCallback)((t=>{let n=d.frames.length;n=n>0?n+1:1;const i=e.popAdderMenu.catalog.catalogId,r=d.addFrame({id:(0,o.Vj)(),name:t.name,title:`${t.title}${n}`,catalogId:i,type:"normal",deletable:!0,debuggable:t.debuggable});r.addIODiagram({title:r.title}),Array.isArray(t.inputs)&&t.inputs.forEach((e=>{r.addInputPin({id:e.id,hostId:e.id,title:e.title,wrap:e.wrap,schema:e.schema,editable:e.editable,deletable:e.deletable})})),Array.isArray(t.outputs)&&t.outputs.forEach((e=>{r.addOutputPin({id:e.id,hostId:e.id,title:e.title,wrap:e.wrap,schema:e.schema,editable:e.editable,deletable:e.deletable})})),requestAnimationFrame((()=>{const e=r.diagramAry[r.diagramAry.length-1];h.focus(e)}))}),[]),C=(0,o.vc)((()=>{if(e.popAdderMenu){const t=e.popAdderMenu.e.target,n=(0,p.bt)(t,v.viewEle),o={left:n.x,top:n.y+t.offsetHeight};return(0,l.createPortal)(a().createElement("div",{className:i.Z.bg,onClick:e.clearPopup},a().createElement("div",{className:i.Z.popMenu,style:o},e.addItems?e.addItems.map(((e,t)=>{if("com"===e.type||e.namespace){const n=f.getComDef({namespace:e.namespace});return n?a().createElement("div",{key:n.namespace,className:i.Z.menuItem,onClick:t=>b(n,e.outputId)},n.title):a().createElement("div",{key:t,className:i.Z.notFound},"未找到组件定义:",JSON.stringify(e))}if("frame"===e.type)return a().createElement("div",{key:t,className:i.Z.menuItem,onClick:t=>E(e)},e.title)})):a().createElement("div",{className:i.Z.loading},"加载中..."))),v.viewEle.parentNode)}})),w=(0,r.useCallback)(((t,n)=>{e.popAdderMenu?e.clearPopup():e.popAdderMenu={e:t,catalog:n};const o=n.adder;if("function"==typeof o){const t=o();e.addItems=t}}),[]),A=n.outline;(!x.geoView||(null===(t=x.geoView)||void 0===t?void 0:t.scenes))&&u.isTypeOfDefinedCom();return a().createElement("div",{className:i.Z.normalMode},A.map(((t,n)=>a().createElement(r.Fragment,{key:n},a().createElement("div",{className:i.Z.toolbar},a().createElement("label",{className:i.Z.tt},t.title),t.adder&&!f.isDebugMode()?a().createElement("span",{className:i.Z.add,style:{visibility:"visible"},onClick:(0,o.Ft)((e=>w(e,t))).stop},"+"):null),a().createElement("div",{className:i.Z.catelog},t.catalogId?d.getFrameAryByCatalogId(t.catalogId).map((t=>a().createElement(m.Z,{key:t.id,frameModel:t,rootF:!0,myCtx:e}))):null)))),C)}},1306:(e,t,n)=>{n.d(t,{A:()=>o,R:()=>i});class o{constructor(){this.width=220}}class i{clearPopup(){this.popAdderMenu=void 0,this.addItems=void 0}}},82098:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(90359),i=n.n(o),r=n(2334),a=n(43466),l=n(93696),s=n(80821),c=n(83446),d=n(32480),m=n(79127);function p({frameModel:e,rootF:t,myCtx:n}){const o=n.tvContext.viewFilter,c=[],d=[];let m;e.frameAry&&e.frameAry.forEach((e=>{m=f(e,o,(e=>{if(e.isGlobal||e.showIO)return!0})),m.forEach((e=>{c.push(i().createElement(l.Wn,{key:e.id,diagram:e,myCtx:n}))}))})),m=f(e,o,(e=>{if(e.isGlobal||e.showIO)return!0})),m.forEach((e=>{c.push(i().createElement(l.Wn,{key:e.id,diagram:e,myCtx:n}))})),m=f(e,o,(t=>{var n;if(t.startWithOutput)return!0;const o=null===(n=t.startWithCom)||void 0===n?void 0:n.forkedFrom;return!(!o||!e.parent||o!==e.parent)||void 0})),m.forEach(((e,t)=>{d.push(i().createElement(l.K7,{key:`${e.id}-${t}`,diagram:e,myCtx:n}))}));const{context:g,configs:y}=n.tvContext,x="normal"===y.mode,v=!g.configs.geoView;e.comAry.length>0&&e.comAry.forEach(((t,r)=>{var a;if(!t||(null===(a=t.runtime)||void 0===a?void 0:a.hasUI(v))&&!t.runtime.geo)return;const s=[];m=f(e,o,(e=>{var n,o;const i=null===(n=e.startWithCom)||void 0===n?void 0:n.forkedFrom;if(i&&i===t)return!0;if(t.frames&&e.startWithJoint){const n=null===(o=e.startWithJoint.outputJoint)||void 0===o?void 0:o.parent;if(t.frames.indexOf(n)>=0)return!0}})),x||(m.forEach(((e,t)=>{s.push(i().createElement(l.K7,{key:`${e.id}-${t}`,diagram:e,myCtx:n}))})),t.frames&&h(t)&&t.frames.forEach((e=>{e.isTypeOfDefinedCom()||s.push(i().createElement(p,{key:Math.random(),frameModel:e,myCtx:n}))})),"表单容器"===t.runtime.title&&console.log(s),s.length>0&&d.push(i().createElement(u,{key:t.id,com:t,frameModel:e,myCtx:n})))}));const b=g.isRoleOfDev();if(c.length>0||d.length>0)return i().createElement("div",{className:`${r.Z.frame} ${t?r.Z.rootItem:""}`},c,x?null:i().createElement("div",{className:r.Z.content},b?i().createElement(s.Z,{frameModel:e,ctx:n.tvContext}):null,i().createElement(a.Z,{frameModel:e,rootF:t}),d))}function u({com:e,frameModel:t,myCtx:n}){var a,s;const{context:d,configs:u,viewFilter:g}=n.tvContext,y=!d.configs.geoView,x="normal"===u.mode,v=null===(a=u.cards)||void 0===a?void 0:a.displayFlat,b=(0,o.useCallback)((e=>{n.tvContext.emitComponent.hover(e.runtime.geo)}),[]),E=(0,o.useCallback)((()=>{n.tvContext.emitComponent.hover(null)}),[]),C=(0,o.useCallback)((e=>{n.tvContext.viewFilter={type:"com",data:{comId:e.id},title:e.runtime.title}}),[]);if(!e||(null===(s=e.runtime)||void 0===s?void 0:s.hasUI(y))&&!e.runtime.geo)return;const w=(0,o.useRef)(),A=[],k=f(t,g,(t=>{var n,o;const i=null===(n=t.startWithCom)||void 0===n?void 0:n.forkedFrom;if(i&&i===e)return!0;if(e.frames&&t.startWithJoint){const n=null===(o=t.startWithJoint.outputJoint)||void 0===o?void 0:o.parent;if(e.frames.indexOf(n)>=0)return!0}}));if(!x&&(k.forEach(((e,t)=>{A.push(i().createElement(l.K7,{key:`${e.id}-${t}`,diagram:e,myCtx:n}))})),e.frames&&h(e)&&e.frames.forEach((e=>{e.isTypeOfDefinedCom()||A.push(i().createElement(p,{key:Math.random(),frameModel:e,myCtx:n}))})),(0,o.useEffect)((()=>{const e=w.current;if(e)if(g){const t=e.offsetHeight;e.parentNode.style.display=t<=0?"none":"block"}else e.parentNode.style.display="block"}),[g]),A.length>0)){const t=d.getComDef(e.runtime.def);let n,o=null==t?void 0:t.icon;o&&"string"==typeof o&&(o.toUpperCase().startsWith("HTTP")||o.startsWith("data:image/"))&&(n=o);const a=g&&"com"===g.type&&g.data.comId===e.id;return i().createElement("div",{className:`${r.Z.com} ${a?r.Z.highlight:""}`,onMouseOver:(0,c.Ft)((t=>b(e))).stop,onMouseOut:(0,c.Ft)(E).stop},v?null:i().createElement("div",{className:r.Z.tt},i().createElement("span",{className:r.Z.icon},n?i().createElement("img",{src:n}):null),i().createElement("span",{className:r.Z.title},e.runtime.title),i().createElement("span",{className:r.Z.iconFilter,onClick:(0,c.Ft)((t=>C(e))).stop},m.PJ.Filter)),i().createElement("div",{ref:e=>{e&&(w.current=e)}},A))}}function f(e,t,n){return e.diagramAry.length>0?e.diagramAry.map(((e,o)=>{let i;if(e.filteredNow=void 0,i=t?(0,d.Z)(e,t):e,i&&n(i))return i})).filter((e=>e)):[]}function h(e){return!e.runtime.hasUI()||!!e.runtime.geo}},43466:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),i=n.n(o),r=n(83446),a=n(62673),l=n(39740),s=n(93696),c=n(32480);function d({frameModel:e}){const t=(0,r.N7)(l.Z,{from:"parents"}),{context:n,emitComponent:d,emitSnap:m}=t,p=(0,o.useCallback)((()=>{const t=m.start("新建Fx卡片",{target:e}),n=e.addFxDiagram();t.commit({target:n}),d.focus(n)}),[e]),u=(0,r.vc)((()=>{const n=[];if(e){{const o=t.viewFilter;e.frameAry.forEach(((e,r)=>{e.diagramAry.forEach((e=>{e.isFn&&(!o||o&&(0,c.Z)(e,o))&&n.push(i().createElement(s.$B,{key:e.id,diagram:e,tvCtx:t}))}))}))}return n}}));return i().createElement("div",{className:`${a.Z.catelog} ${0===u.length?a.Z.empty:""}`},i().createElement("div",{className:a.Z.toolbar},i().createElement("label",{className:a.Z.tt},"Fx"),n.isDebugMode()?null:i().createElement("span",{className:a.Z.add,onClick:p,"data-mybricks-tip":"新建Fx卡片"},"+")),i().createElement("div",{className:a.Z.fxs},u))}},92572:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(59014),i=n(90359),r=n.n(i),a=n(83446),l=n(39740),s=n(93696);function c(){const e=(0,a.N7)(l.Z,{from:"parents"}),{context:t,viewModel:n,emitComponent:c,emitSnap:d}=e,m=(0,i.useCallback)((()=>{const e=d.start("添加全局Fx卡片",{target:n}),t=n.addFxDiagram();e.commit({target:t}),c.focus(t),t.state.enable()}),[]),p=(0,a.vc)((()=>{const t=[];return n.frames.forEach(((n,o)=>{n.isTypeOfFx()&&n.diagramAry.forEach((n=>{n.isFn&&t.push(r().createElement(s.$B,{key:n.id,diagram:n,tvCtx:e}))}))})),t}));if(!e.viewFilter)return r().createElement("div",{className:`${o.Z.catelog} ${0===p.length?o.Z.empty:""}`},r().createElement("div",{className:o.Z.toolbar},r().createElement("label",{className:o.Z.tt,style:{color:"#ce5b21",paddingLeft:4}},"全局Fx"),t.isDebugMode()?null:r().createElement("span",{className:o.Z.add,onClick:m,"data-mybricks-tip":"新建全局Fx卡片"},"+")),r().createElement("div",{style:{paddingLeft:10}},p))}},17734:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(90359),i=n.n(o),r=n(83446),a=n(39740),l=n(93696),s=n(79127),c=n(22270),d=n(59014);function m(){const e=(0,r.N7)(a.Z,{from:"parents"}),{context:t,viewModel:n,emitComponent:m,emitSnap:p}=e,u=(0,o.useCallback)((o=>{const i=t.getComDef({namespace:s.Vm.coms.var}),r=n.varComAry,a=new s.u5(i,!1,`全局变量${r.length}`),l=new c.n(a);l.isSingleton=!0;const d={type:"number"};l.inputPins.forEach((e=>{"set"===e.id&&(e.schema=d)})),l.outputPins.forEach((e=>{e.schema=d}));const u=p.start("添加全局变量",{target:n}),f=n.addVarComponent(l),h=n.addVarDiagram(f);u.commit(),e.setCurDiagram(h),setTimeout((e=>{m.focus(h)}))}),[]);(0,o.useMemo)((()=>{const e=n.varComAry;e&&e.forEach((e=>{n.diagramAry.find((t=>{if(t.isVar&&t.varCom.id===e.id)return!0}))||n.addVarDiagram(e)}))}),[]);const f=(0,r.vc)((()=>{const t=[];if(n.diagramAry){const o=n.diagramAry.filter((e=>e.isVar));o&&o.forEach((n=>{t.push(i().createElement(l.r9,{key:n.id,diagram:n,ctx:e}))}))}return t}));if(t.configs.toplView.vars&&!e.viewFilter)return i().createElement("div",{className:`${d.Z.catelog} ${0===f.length?d.Z.empty:""}`},i().createElement("div",{className:d.Z.toolbar},i().createElement("label",{className:d.Z.tt,style:{color:"#8173a1"}},"全局变量"),t.isDebugMode()?null:i().createElement("span",{className:d.Z.add,onClick:u,"data-mybricks-tip":"新建全局变量"},"+")),i().createElement("div",{style:{paddingLeft:10}},f))}},60722:(e,t,n)=>{n.d(t,{mh:()=>i,t6:()=>a,zb:()=>r});var o=n(90359);const i=o.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},o.createElement("path",{d:"M128.085333 877.226667a128 128 0 0 1-42.496-175.957334L402.773333 182.186667a128 128 0 0 1 218.453334 0l317.184 519.04A128 128 0 0 1 829.184 896H194.816a128 128 0 0 1-66.730667-18.773333zM829.184 810.666667a42.666667 42.666667 0 0 0 36.394667-64.896L548.394667 226.730667a42.666667 42.666667 0 0 0-72.789334 0L158.421333 745.770667A42.666667 42.666667 0 0 0 194.816 810.666667h634.368zM469.333333 384h85.333334v256h-85.333334V384z m0 298.666667h85.333334v85.333333h-85.333334v-85.333333z",fill:"#fa6400"})),r=(o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},o.createElement("path",{d:"M945.151667 107.126859c0-36.667049-19.4166-44.189504-19.416601-44.189504-21.976598-15.675065-50.018423-0.669538-50.018423-0.669538-72.467637 39.620893-155.21465 33.476897-155.21465 33.476897-88.536547 7.483071-166.439257-41.117507-166.439256-41.117507C460.327424 0.788479 345.127513 0.000788 345.127513 0.000788 271.281416 0.000788 175.261797 30.838918 175.261797 30.838918v0.393846A49.939654 49.939654 0 0 0 128.709218 0.000788C101.140008 0.079557 78.769564 21.504771 78.769564 47.931828v928.137132C78.769564 1002.456632 101.140008 1024 128.709218 1024c27.56921 0 49.939654-21.464599 50.018423-47.93104v-391.679699c64.787642-41.905199 162.894644-38.793816 162.894644-38.793816 100.548846-6.065226 167.817717 41.117507 167.817717 41.117507 119.5716 58.328571 209.289685 52.381498 209.289685 52.381498 114.84545 0 203.854612-47.143348 203.854613-47.143348 24.969827-11.815376 22.567367-42.495967 22.567367-42.495968V107.126859z",fill:"#707070"})),o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32"},o.createElement("path",{d:"M512 64a448.128 448.128 0 0 0 0 896 446.976 446.976 0 0 0 381.056-212.288c18.56-30.08 0-48.768-30.016-67.392-30.08-18.624-60.16-30.08-78.784 0A318.976 318.976 0 0 1 512 832a320 320 0 0 1 0-640c35.328 0 40.448-30.72 40.448-66.048S547.328 64 512 64z m447.68 469.568c6.784-177.92-84.672-327.616-220.224-407.616-30.464-17.92-47.104 1.92-65.088 32.384-17.92 30.4-30.464 59.904 0 77.824A319.744 319.744 0 0 1 832 512c0 35.328 33.664 40.576 61.056 52.864 27.328 12.288 65.28 3.968 66.624-31.296z",fill:"#515151"}))),a=o.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14"},o.createElement("path",{d:"M831.825 63.94H191.94c-70.692 0-128 57.308-128 128v639.885c0 70.692 57.308 128 128 128h639.885c70.692 0 128-57.308 128-128V191.94c0-70.692-57.308-128-128-128zM895.885 832a63.835 63.835 0 0 1-63.973 63.886H192.088c-17.112 0-33.27-6.575-45.372-18.676S127.88 849.112 127.88 832V192a64.236 64.236 0 0 1 64.208-64.12h639.824A64.038 64.038 0 0 1 895.885 192v640z"}),o.createElement("path",{d:"M791.998 351.852H536a31.97 31.97 0 0 0 0 63.94h256a31.97 31.97 0 0 0 0-63.94z m0 256.121H536a31.97 31.97 0 0 0 0 63.94h256a31.97 31.97 0 0 0 0-63.94z m-447.996-79.975c-61.856 0-111.986 50.144-111.986 111.985S282.16 751.97 344.002 751.97s111.985-50.144 111.985-111.986-50.13-111.985-111.985-111.985z m33.982 145.982a48.045 48.045 0 1 1 14.088-33.982 47.746 47.746 0 0 1-14.088 33.986z m39.412-376.586L311.999 402.787l-41.391-41.395a31.97 31.97 0 1 0-45.213 45.213l63.997 64.002a31.97 31.97 0 0 0 45.214 0l128-128a31.97 31.97 0 0 0-45.21-45.213z","p-id":"10163"}))},22155:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(30718),i=n(83446),r=n(90359),a=n.n(r),l=n(42871),s=n(92572),c=n(23037),d=n(1306),m=n(17734),p=n(44780),u=n(92354);function f({viewCtx:e}){var t;const{context:n,curFrameModel:r,configs:c}=e,f=(0,i.mA)(d.A,(t=>{t({frameModel:e.viewModel})}),{to:"children"}),g=n.configs,y=c.nav;if(r&&!(r instanceof p.g)||y&&!1===y.visible)return void(!r||r instanceof p.g||console.warn(`【异常】frameModel${r.title}不是FrameModel.`));const x=n.isRoleOfDev(),v=x&&(!g.geoView||(null===(t=g.geoView)||void 0===t?void 0:t.scenes)),b=x&&c.fx&&v;return a().createElement("div",{className:o.Z.wrap},a().createElement(u.Z,{viewCtx:e}),a().createElement("div",{className:o.Z.outlineView},a().createElement("div",{className:o.Z.outline,style:{width:f.width},ref:e=>e&&(f.viewEle=e),onClick:t=>e.emitComponent.focus(void 0)},a().createElement(l.Z,null),a().createElement("div",{className:o.Z.bodyForGlobal},v?a().createElement(m.Z,null):null,b?a().createElement(s.Z,null):null))),a().createElement("div",{className:o.Z.sperV,onMouseDown:h},a().createElement("div",null)))}function h(e){const t=(0,i.N7)(d.A);let{x:n,y:o,w:r,h:a}=(0,c.bt)(t.viewEle);(0,i.qw)(e,(({po:{x:e,y:n},epo:{ex:o,ey:i},dpo:{dx:a,dy:l}},s)=>{"moving"==s&&(t.width=Math.max(r+=a,150))}))}},80821:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(90359),i=n.n(o),r=n(83446),a=n(52849),l=n(93696),s=n(79127),c=n(22270),d=n(32480);function m({frameModel:e,ctx:t}){const{context:n,emitSnap:m,emitComponent:p}=t,u=(0,o.useCallback)((o=>{const i=n.getComDef({namespace:s.Vm.coms.var}),r=e.getSingletonComAry(),a=new s.u5(i,!1,`变量${r.length}`),l=new c.n(a);l.runtime.topl=l,l.isSingleton=!0;const d={type:"number"};l.inputPins.forEach((e=>{"set"===e.id&&(e.schema=d)})),l.outputPins.forEach((e=>{e.schema=d}));const u=m.start("addVar",{target:e});e.addComponent(l);const f=e.addVarDiagram(l);u.commit(),t.setCurDiagram(f),setTimeout((e=>{p.focus(f)}))}),[]);(0,o.useMemo)((()=>{const t=e.getSingletonComAry();t&&t.forEach((t=>{e.diagramAry.find((e=>{if(e.isVar&&e.varCom.id===t.id)return!0}))||e.addVarDiagram(t)}))}),[]);const f=(0,r.vc)((()=>{const n=[],o=e.diagramAry.filter((e=>e.isVar));if(o){const e=t.viewFilter;o.forEach((o=>{(!e||e&&(0,d.Z)(o,e))&&n.push(i().createElement(l.r9,{key:o.id,diagram:o,ctx:t}))}))}return n}));return i().createElement("div",{className:`${a.Z.catelog} ${0===f.length?a.Z.empty:""}`},i().createElement("div",{className:a.Z.toolbar},i().createElement("label",{className:a.Z.tt},"变量"),n.isDebugMode()?null:i().createElement("span",{className:a.Z.add,onClick:u,"data-mybricks-tip":"新建变量"},"+")),i().createElement("div",{className:a.Z.vars},f))}},92354:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(58841),i=n(90359),r=n.n(i),a=n(57763),l=n(24318),s=n(83446),c=n(27722),d=n(79127),m=n(71442);let p;function u({viewCtx:e}){p=(0,s.mA)(c.Z,(t=>t({tvCtx:e})));const t=p.tvCtx.viewFilter;return r().createElement(r().Fragment,null,r().createElement("div",{className:o.Z.filter,ref:e=>{e&&(p.filterEl=e)}},t?r().createElement("div",{className:o.Z.now,onClick:(0,s.Ft)(p.show).stop},r().createElement("span",{className:o.Z.icon},d.PJ.Filter),r().createElement("label",null,t.title),r().createElement("span",{className:o.Z.close,"data-mybricks-tip":"取消",onClick:(0,s.Ft)((e=>p.clear())).stop},"×")):r().createElement("div",{className:o.Z.empty,onClick:(0,s.Ft)(p.show).stop},r().createElement("span",{className:o.Z.icon},d.PJ.Filter),r().createElement("label",null,"过滤内容"))),p._showPop?(0,l.createPortal)(r().createElement(f,{viewCtx:e}),document.body):null)}function f(){const{curFrameModel:e,context:t}=p.tvCtx;(0,i.useEffect)((()=>{t.registerBlur((()=>{p.hide()}),!0)}),[]);const n=(0,s.bt)(p.filterEl);return r().createElement("div",{className:o.Z.bg,onClick:e=>{p.hide()}},r().createElement("div",{className:o.Z.view,ref:e=>{e&&(p.viewEl=e)},onClick:(0,s.Ft)().stop,style:{left:n.x,top:n.y+p.filterEl.clientHeight+3}},r().createElement("div",{className:o.Z.content},r().createElement(h,{frameModel:e}))))}function h({frameModel:e}){const t=[];if(t.push(r().createElement(y,{frameModel:e})),t.push(r().createElement(g,{frameModel:e})),e.comAry){const n=(0,a.v)(e,p.tvCtx);n&&t.push(r().createElement("div",{className:o.Z.slots},n.map(((e,t)=>r().createElement(v,{key:e.id,item:e})))))}return t}function g({frameModel:e}){const{tvCtx:t}=p,n=(0,i.useCallback)((e=>{t.viewFilter={type:"fx",data:{frameId:e.parent.id},title:e.title},p.hide()}),[]),a=[];if(e.frameAry.forEach(((e,t)=>{e.diagramAry.find((e=>{e.isFn&&a.push(e)}))})),a.length>0)return r().createElement("div",{className:o.Z.fxs},r().createElement("div",{className:o.Z.tt},"Fx"),a.map((e=>r().createElement("div",{key:e.id,className:o.Z.fx,onClick:(0,s.Ft)((t=>n(e))).stop},r().createElement("span",null,"fx"),r().createElement("label",null," ",e.title)))))}function y({frameModel:e}){const{tvCtx:t}=p,n=e.diagramAry.filter((e=>e.isVar)),a=(0,i.useCallback)((e=>{t.viewFilter={type:"var",data:{varComId:e.varCom.id},title:e.title},p.hide()}),[]);if(n.length>0)return r().createElement("div",{className:o.Z.vars},r().createElement("div",{className:o.Z.tt},"变量"),n.map((e=>{let t;const n=e.varCom;if(n){const e=n.outputPins[0],o=(0,m.a0)(e.schema.type);o&&(t=o.strokeColor)}return r().createElement("div",{key:e.id,className:o.Z.var,onClick:(0,s.Ft)((t=>a(e))).stop},r().createElement("span",{style:{color:t}},"@"),r().createElement("label",null,e.title))})))}function x({slot:e,showTitle:t}){if(e.coms)return r().createElement("div",{className:o.Z.slot},t?r().createElement("div",{className:o.Z.tt},e.title):null,r().createElement("div",{className:o.Z.slotBody},e.coms.map(((e,t)=>r().createElement(v,{key:e.id,item:e})))))}function v({item:e}){const{tvCtx:t}=p,{context:n}=t,a=e.com,l=(0,i.useCallback)((e=>{t.viewFilter={type:"com",data:{comId:e.com.id},title:e.com.title},p.hide()}),[]),c=n.getComDef(a.runtime.def);let d,m=null==c?void 0:c.icon;return m&&"string"==typeof m&&(m.toUpperCase().startsWith("HTTP")||m.startsWith("data:image/"))&&(d=m),r().createElement(r().Fragment,null,r().createElement("div",{className:`${o.Z.com} ${e.isVisible?"":o.Z.hidden}`,onMouseEnter:t=>{e.hover()},onMouseLeave:t=>{e.hoverLeave()},onClick:(0,s.Ft)((t=>l(e))).stop},r().createElement("span",{className:o.Z.comIcon},d?r().createElement("img",{src:d}):null),r().createElement("label",null,a.title)),r().createElement("div",{className:`${o.Z.comContent} ${e.isVisible?"":o.Z.hidden}`},e.com.frames?e.com.frames.map((e=>r().createElement(h,{key:e.id,frameModel:e}))):null,e.slots?e.slots.map((t=>r().createElement(x,{key:t.id,slot:t,showTitle:e.slots.length>1}))):null))}},27722:(e,t,n)=>{n.d(t,{Z:()=>o});class o{constructor(){this.style={}}show(){this._showPop=!0}hide(){this._showPop=!1}clear(){this.hide(),this.tvCtx.viewFilter=void 0}}},57763:(e,t,n)=>{n.d(t,{v:()=>i});var o=n(22270);function i(e,t){const{emitFrame:n}=t,i=e.parent&&e.parent instanceof o.n?e.parent:null,r=n.getUIComDefTree(e.id,null==i?void 0:i.id),a=(t,n)=>{const o=e.searchCom(t.id);if(!o)return;const i=[];n.coms.push({id:t.id,com:o,hover:t.hover,hoverLeave:t.hoverLeave,isVisible:t.isVisible,slots:i}),t.slots&&t.slots.forEach((e=>{const{id:t,title:n,coms:o}=e;if(o.length>0){const e={id:t,title:n,coms:[]};i.push(e),o.length>0&&o.forEach((t=>{a(t,e)}))}}))},l=[];return r&&r.forEach((e=>{a(e,{coms:l})})),l}},32480:(e,t,n)=>{function o(e,t){var n;let o;if(e.filteredNow=void 0,t){const{type:i}=t;"com"===i?e.startWithCom&&e.startWithCom.id===t.data.comId?o=e:e.ifContains(t)&&(e.filteredNow=!0,o=e):"var"===i?(null===(n=e.varCom)||void 0===n?void 0:n.id)===t.data.varComId?o=e:e.ifContains(t)&&(e.filteredNow=!0,o=e):"fx"===i&&(e.parent.id===t.data.frameId?o=e:e.ifContains(t)&&(e.filteredNow=!0,o=e))}return o}n.d(t,{Z:()=>o})},94474:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(83446),i=n(90359),r=n.n(i),a=n(81120),l=n(40635),s=n(98820);function c({title:e,style:t}){var n;const c=(0,o.N7)(s.NH,{from:"parents"}),{model:d,viewCtx:m}=c,p=(0,i.useRef)(),u=(0,i.useRef)(),f=null===(n=d.startWithCom)||void 0===n?void 0:n.error;(0,i.useEffect)((()=>{const e=p.current;e&&(e.on("click",(t=>{e.draggable(!1),setTimeout((t=>{e.draggable(!0)})),h(t,{model:d,viewCtx:m})})),e.on("dragstart",(t=>{e.draggable(!1);const n=d.$el.moveTo(m.animationLayer);n.on("dragend",(t=>{e.draggable(!0),n.off("dragend");const o=n.x(),i=n.y();n.moveTo(m.mainLayer),setTimeout((e=>{d.style.left=(0,a.vg)(o,50),d.style.top=i,m.emitComponent.focus(d)}))})),n.startDrag()})))}),[]),(0,i.useEffect)((()=>{var e;const t=p.current;if(t&&(null===(e=d.labelAry)||void 0===e?void 0:e.length)>0){const e=t.textWidth;u.current&&u.current.destroy();const n=d.labelAry[d.labelAry.length-1],o=new l.Konva.Group({y:-4});u.current=o;const i=new l.Konva.Rect({stroke:"#555",strokeWidth:0,fill:n.color,width:38,height:15,cornerRadius:5});o.add(i);const r=new l.Konva.Text({x:3,y:3,text:n.title,fontSize:10,fill:"#FFF"});o.add(r),t.parent.add(o),u.current.x(e+10)}}),[d.title,d.labelAry]);const h=(0,i.useCallback)((e=>{e.cancelBubble=!0}),[]);return r().createElement(l.Group,{x:10,y:-15},r().createElement(l.Text,{ref:p,text:`${e}${f?"  ("+f.message+")":""}`,fontSize:12,fill:f?"#FF0000":(null==t?void 0:t.color)||"#777777",fontStyle:"italic",hitStrokeWidth:30,onClick:h,onDblClick:(0,o.Ft)((e=>function(e,t){const{viewCtx:n,model:o}=t;if(n.context.isDebugMode())return;o.startWithCom?n.emitComponent.sayHi(o.startWithCom.id,"toplView"):o.parent.parent&&n.emitComponent.sayHi(o.parent.parent.id,"toplView")}(0,c))).stop}))}},17376:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(83446),i=n(2102),r=n(33029),a=n(56258),l=n(56976),s=n(40635),c=n(90359),d=n.n(c),m=n(46913),p=n(47731),u=n(71442),f=n(44780),h=n(22270);function g({click:e,mousedown:t,order:n}){const c=(0,o.N7)(i.Rn,{from:"parents"}),{model:g,context:y,emitDiagram:x,viewContext:v}=c;(0,o.vc)((()=>{var e;(g._anchor||(null===(e=g.forkedFrom)||void 0===e?void 0:e._anchor))&&x.anchor(g)}));const b=(0,o.vc)((()=>{let t;if(g.parent instanceof f.g)t=g.parent;else if(g.parent instanceof h.n){t=g.parent.diagramModel.parent}if(y.isDebugMode()||t.debuggable){let t=(g.forkedFrom||g).exe;if(t){const{val:n,from:i}=t;let c=!1;if(g.isDirectionOfInput()&&g instanceof a.default){if(i instanceof r.O){g.getRoot((e=>e instanceof l.Z)).searchCon(i.id,g.id)&&(c=!0)}}else c=!0;if(c&&void 0!==n){let t;return t="object"==typeof n?Array.isArray(n)?"[...]":"{...}":"string"==typeof n?n.length>10?`"${n.substring(0,5)}..."`:`"${n}"`:n,d().createElement(s.Text,{ref:e=>{e&&g.isDirectionOfInput()&&e.x(-1*(e.width()+8))},align:g.isDirectionOfInput()?"right":"left",width:70,text:t,x:7,y:g.conAry.length?1:-4,fontSize:10,fill:m.Z.colorPrimary,onClick:(0,o.Ft)(e).stop})}}}})),E=(0,o.vc)((()=>{const e=(0,u.a0)(g.schema.type),t=c.hoverF||g.state.isFocused()||g.emphasized||g.emphasized||y.isDebugMode()&&(g.forkedFrom||g).state.isRunning();return d().createElement(s.Rect,Object.assign({width:6,height:6,y:-3},(0,p.I)(c),{strokeWidth:1,stroke:t?m.Z.colorPrimary:e.strokeColor,hitStrokeWidth:15,fill:c.hoverF||t?m.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}}))})),C=(0,o.vc)((()=>{const e=g.proxyPin?g.proxyPin.title:g.title,t=c.hoverF||g.state.isFocused()||g.emphasized;if(t||g.conAry.length){const n=g.conAry.length?-10:-5;return d().createElement(s.Text,{text:`${e}`,y:n,fontSize:10,fill:t?m.Z.colorPrimary:"#777",listening:!1,ref:e=>e&&e.x(-1*(e.width()+3))})}}));return d().createElement(s.Group,{id:g.id,ref:g.set$elOnce,width:7,height:10,x:-3,y:20*n,onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent,_onError_:(e,t)=>{console.error(e)}},E,C,b)}},22837:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(83446),i=n(2102),r=n(90359),a=n.n(r),l=n(40635),s=n(47731),c=n(46913),d=n(71442);function m({click:e,mousedown:t,order:n}){const m=(0,o.N7)(i.Rn,{from:"parents"}),{model:p,context:u,viewContext:f}=m;(0,r.useEffect)((()=>{var e;if(null===(e=p.conAry)||void 0===e?void 0:e.length){const e=(0,o.dL)(p.$el,p.parent.$el);p.isDirectionOfInput()?p.conAry.forEach((t=>{(Math.abs(e.x-t._startPo.x)>10||Math.abs(e.y-t._startPo.y)>10)&&(t.startPo={x:Math.round(e.x+e.w/2)+.5,y:Math.round(e.y)+.5,j:p.getJoinerWidth()})})):p.conAry.forEach((t=>{(Math.abs(e.x-t._finishPo.x)>10||Math.abs(e.y-t._finishPo.y)>10)&&(t.finishPo={x:e.x+p.$el.clientWidth/2,y:e.y+p.$el.clientHeight/2,j:p.getJoinerWidth()})}))}}),[]);const h=(0,o.vc)((()=>{if(u.isDebugMode()){const t=(p.forkedFrom||p).exe;if(t){const{val:n,from:i}=t;let r;return r=void 0!==n?"object"==typeof n?Array.isArray(n)?"[...]":"{...}":JSON.stringify(n):"[空]",a().createElement(l.Text,{text:r,x:11,y:5,fontSize:10,fill:c.Z.colorPrimary,onClick:(0,o.Ft)(e).stop})}}})),g=(0,o.vc)((()=>{const e=(0,d.a0)(p.schema.type),t=m.hoverF||p.state.isFocused()||p.emphasized||u.isDebugMode()&&(p.forkedFrom||p).state.isRunning();return"rectangle"===p.icon?a().createElement(l.Rect,{width:18,height:18,x:-9,y:-9,cornerRadius:3,stroke:t?c.Z.colorPrimary:e.strokeColor,strokeWidth:1,fill:t?c.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}}):a().createElement(l.Circle,{width:20,height:20,stroke:t?c.Z.colorPrimary:e.strokeColor,strokeWidth:1,fill:t?c.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}})})),y=(0,o.vc)((()=>{const e=m.hoverF||p.state.isFocused()||p.emphasized,t=p.conAry.length?-11:-4;return p.isDirectionOfInput()?a().createElement(l.Text,{text:` ${p.title}`,x:11,y:t,fontSize:10,fill:e?c.Z.colorPrimary:"#777"}):a().createElement(l.Text,{text:`${p.title}`,y:t,fontSize:10,fill:e?c.Z.colorPrimary:"#777",ref:e=>e&&e.x(-1*(e.width()+13))})}));return a().createElement(l.Group,Object.assign({ref:p.set$elOnce,x:0,y:50*n,width:20,height:20},(0,s.I)(m),{onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent}),g,y,h)}},69139:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(83446),i=n(2102),r=n(90359),a=n.n(r),l=n(40635),s=n(47731),c=n(46913),d=n(71442),m=n(44780);function p({click:e,mousedown:t,order:n}){const r=(0,o.N7)(i.Rn,{from:"parents"}),{model:p,context:u,viewContext:f}=r,h=(0,o.vc)((()=>{let t;if(p.parent instanceof m.g&&(t=p.parent),t&&t.debuggable||u.isDebugMode()){const t=(p.forkedFrom||p).exe;if(t){const{val:n,from:i}=t;let r;return r=void 0!==n?"object"==typeof n?Array.isArray(n)?"[...]":"{...}":JSON.stringify(n):"[空]",a().createElement(l.Text,{text:r,x:11,y:5,fontSize:10,fill:c.Z.colorPrimary,onClick:(0,o.Ft)(e).stop})}}})),g=(0,o.vc)((()=>{let e,t;p.parent instanceof m.g&&(t=p.parent),(t&&t.debuggable||u.isDebugMode())&&(e=(p.forkedFrom||p).exe);const n=p.schema?(0,d.a0)(p.schema.type):{strokeColor:"#AAA",fillColor:"#EEE"},o=r.hoverF||p.state.isFocused()||p.emphasized;if(p.isTypeOfConfig())return a().createElement(a().Fragment,null,a().createElement(l.Circle,{width:20,height:20,style:{cursor:"pointer"}}),a().createElement(l.Path,{x:-11,y:-11,data:"M875.52 383.36c-5.12-27.52-40.32-37.76-60.16-17.92l-168.32 167.68c-23.68 23.68-62.72 23.68-87.04 0L473.6 446.72C449.28 422.4 449.28 384 473.6 360.32l169.6-168.96c19.84-19.84 10.24-55.04-17.28-60.16-99.2-19.2-205.44 9.6-282.24 86.4C258.56 301.44 232.32 422.4 264.96 529.92c5.12 17.28 1.92 36.48-10.88 49.28L83.2 749.44c-23.68 23.68-23.68 62.72 0 86.4l87.04 86.4c23.68 23.68 62.72 23.68 87.04 0l172.16-171.52c12.8-12.8 31.36-16.64 49.28-11.52 106.88 31.36 226.56 5.12 311.04-79.36C864.64 584.96 893.44 480.64 875.52 383.36z",fill:o||e?c.Z.colorPrimary:n.strokeColor,scale:{x:.0222,y:.0222}}));if("rectangle"===p.icon)return a().createElement(l.Rect,{width:18,height:18,x:-9,y:-9,cornerRadius:2,stroke:o||e?c.Z.colorPrimary:n.strokeColor,strokeWidth:1,fill:o||e?c.Z.colorPrimary:n.fillColor,style:{cursor:"pointer"}});if("arrowL"===p.icon)return a().createElement(a().Fragment,null,a().createElement(l.Arc,{x:0,y:0,angle:180,rotation:90,innerRadius:0,outerRadius:10,stroke:"#AAA",strokeWidth:1,fill:"#FFF"}),a().createElement(l.Arc,{x:0,y:0,angle:180,rotation:-90,innerRadius:0,outerRadius:10,stroke:o||e?c.Z.colorPrimary:n.strokeColor,strokeWidth:1,fill:o||e?c.Z.colorPrimary:n.fillColor}));if("arrowR"===p.icon)return a().createElement(a().Fragment,null,a().createElement(l.Arc,{x:0,y:0,angle:180,rotation:-90,innerRadius:0,outerRadius:10,stroke:"#AAA",strokeWidth:1,fill:"#FFF"}),a().createElement(l.Arc,{x:0,y:0,angle:180,rotation:90,innerRadius:0,outerRadius:10,stroke:o||e?c.Z.colorPrimary:n.strokeColor,strokeWidth:1,fill:o||e?c.Z.colorPrimary:n.fillColor}));{let t;return p.wrap&&(t=a().createElement(l.Circle,{width:26,height:26,stroke:"#bab4cd",strokeWidth:1,fill:"#FFF",style:{cursor:"pointer"}})),a().createElement(a().Fragment,null,t,a().createElement(l.Circle,{width:18,height:18,stroke:o||e?c.Z.colorPrimary:n.strokeColor,strokeWidth:1,fill:o||e?c.Z.colorPrimary:n.fillColor,style:{cursor:"pointer"}}))}})),y=(0,o.vc)((()=>{const e=r.hoverF||p.state.isFocused()||p.emphasized;return p.isDirectionOfInput()?a().createElement(l.Label,{x:"rectangle"===p.icon?10:11,y:-4},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:` ${p.title} `,fontSize:10,fill:e?c.Z.colorPrimary:"#777"})):a().createElement(l.Label,{y:-4,ref:e=>e&&e.x(-1*(e.width()+11))},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:`${p.title} `,fontSize:10,fill:e?c.Z.colorPrimary:"#777"}))}));return a().createElement(l.Group,Object.assign({ref:p.set$elOnce,x:0,y:50*n,width:20,height:20},(0,s.I)(r),{onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent}),g,y,h)}},50071:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(83446),i=n(2102),r=n(40635),a=n(90359),l=n.n(a),s=n(46913),c=n(47731),d=n(86409),m=n(71442);function p({click:e,mousedown:t,order:n}){const p=(0,o.N7)(i.Rn,{from:"parents"}),{model:f,context:h,emitDiagram:g,viewContext:y}=p,{getCurDiagram:x}=y,v=(0,a.useRef)(f._notifyView);(0,a.useEffect)((()=>{if(v.current!==f._notifyView&&(v.current=f._notifyView,f.conAry.length)){const e=f.parent instanceof d.nW?f.parent.diagramModel:void 0;if(e){const t=(0,o.dL)(f.$el,e.$el);if(f.isDirectionOfInput()){const e=Math.round(t.x-t.w/2)+.5,n=Math.round(t.y)+.5;f.conAry.forEach((o=>{o._finishPo&&(Math.abs(t.x-o._finishPo.x)>5||Math.abs(t.y-o._finishPo.y)>5)&&(o.finishPo={x:e,y:n})}))}else{const e=Math.round(t.x+f.$el.width()/2)+.5,n=Math.round(t.y)+.5;f.conAry.forEach((o=>{o._startPo&&(Math.abs(t.x-o._startPo.x)>5||Math.abs(t.y-o._startPo.y)>5)&&(o.startPo={x:e,y:n})}))}}}}),[f.listenNotify()]),(0,o.vc)((()=>{var e;(f._anchor||(null===(e=f.forkedFrom)||void 0===e?void 0:e._anchor))&&g.anchor(f)}));const b=(0,o.vc)((()=>{const t=u(p);if(t){const n=t.val;let i;return i=void 0===n?"[空]":"object"==typeof n?Array.isArray(n)?"[...]":"{...}":"string"==typeof n?n.length>10?`"${n.substring(0,5)}..."`:`"${n}"`:n,l().createElement(r.Label,{x:7,y:4,ref:e=>{e&&f.isDirectionOfInput()&&e.x(-1*(e.width()+8))}},l().createElement(r.Tag,{fill:"#FFF"}),l().createElement(r.Text,{align:f.isDirectionOfInput()?"right":"left",text:i,fontSize:10,fill:s.Z.colorPrimary,onClick:(0,o.Ft)(e).stop}))}})),E=(0,o.vc)((()=>{let e=f.schema;f.isDirectionOfOutput()&&f.proxyPinValue&&(e=f.proxyPinValue.schema),f.proxyForPin&&(e=f.proxyForPin.schema);const t=(0,m.a0)(null==e?void 0:e.type),n=p.hoverF||f.state.isFocused()||f.emphasized||f.emphasized;let o;f.wrap&&(o=l().createElement(l().Fragment,null,l().createElement(r.Arc,{innerRadius:7,outerRadius:7,angle:90,rotation:-140,stroke:"#bab4cd",strokeWidth:1,style:{cursor:"pointer"}}),l().createElement(r.Arc,{innerRadius:7,outerRadius:7,angle:90,rotation:50,stroke:"#bab4cd",strokeWidth:1,style:{cursor:"pointer"}})));const i=u(p);return f.isDirectionOfInput()?l().createElement(l().Fragment,null,o,l().createElement(r.Circle,Object.assign({width:7,height:7},(0,c.I)(p),{strokeWidth:1,stroke:n||i?s.Z.colorPrimary:t.strokeColor,hitStrokeWidth:15,fill:p.hoverF||n||i?s.Z.colorPrimary:t.fillColor,style:{cursor:"pointer"}}))):l().createElement(l().Fragment,null,o,l().createElement(r.Circle,Object.assign({width:7,height:7},(0,c.I)(p),{hitStrokeWidth:15,strokeWidth:1,stroke:n||i?s.Z.colorPrimary:t.strokeColor,fill:n||p.hoverF||i?s.Z.colorPrimary:t.fillColor,style:{cursor:"pointer"}})))})),C=(0,o.vc)((()=>{let e;e=f.proxyForPin?f.proxyForPin.title:f.proxyPin?f.proxyPin.title:f.title;const t=f.state.isFocused()||f.emphasized;if(t||f.conAry.length){const n=e,o=-6;return f.isDirectionOfInput()?l().createElement(r.Label,{y:o,ref:e=>e&&e.x(-1*(e.width()+4))},l().createElement(r.Tag,{fill:"#FFF",cornerRadius:3,height:14}),l().createElement(r.Text,{text:`${n}`,fontSize:10,height:13,padding:2,fill:t?s.Z.colorPrimary:"#777",listening:!1})):l().createElement(r.Label,{x:5,y:o},l().createElement(r.Tag,{fill:"#FFF",cornerRadius:3}),l().createElement(r.Text,{text:`${n}`,fontSize:10,height:13,padding:2,fill:t?s.Z.colorPrimary:"#777",listening:!1}))}}));return l().createElement(r.Group,{id:f.id,ref:f.set$elOnce,width:7,height:10,y:20*n,onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent,_onError_:(e,t)=>{console.error(e)}},E,C,b)}function u(e){const{model:t,context:n,viewContext:o}=e;if(n.isDebugMode()){let e;return t.conAry.find((t=>{if(t.exe)return e=t.exe,!0})),e||(e=t.exe),e}}},2102:(e,t,n)=>{n.d(t,{FV:()=>C,Rn:()=>E,ZP:()=>w});var o=n(33029),i=n(83446),r=n(23037),a=n(5962),l=n(79127),s=n(90359),c=n(83848),d=n(50071),m=n(69139),p=n(8904),u=n(91959),f=n(17376),h=n(22837),g=n(39740),y=n(51049),x=n(38110),v=n(90370),b=n(90359);n(56258);class E{isTypeOfStartWith(){if(this.type)return null!==this.type.match(/^start$/gi)}}const C={model:void 0,set(e){this.model=e},clear(){this.model=void 0}};function w({model:e,type:t,order:n}){const o=(0,i.mA)(l.cA.Diagram,{expectTo:"parents"}),r=(0,i.N7)(l.zz,{from:"parents"}),a=(0,i.N7)(p.QU,{from:"parents"}),C=(0,i.N7)(g.Z,{from:"parents"}),w=(0,i.mA)(E,(n=>{n({model:e,type:t,context:r,comContext:a,viewContext:C,emitDiagram:o})}),{to:"children"});if((0,s.useMemo)((()=>{e.getConfigs=function(){return(0,c.U)(w)},e.getAssist=()=>(0,x.Z)(e,a)}),[]),(0,i.vc)((()=>{r.isDesnMode()&&(e.state.enable(),e.exe=void 0)})),(0,s.useEffect)((()=>{e.forRef&&!e.rels&&(delete e.forRef,e.rels=[])}),[]),!t)return b.createElement(d.Z,{click:A,mousedown:e=>k(e,w),order:n});switch(t){case"timer":return b.createElement(v.Z,{click:A,mousedown:e=>k(e,w),order:n});case"start":return b.createElement(u.Z,{click:A,mousedown:e=>k(e,w),order:n});case"frameIO":return b.createElement(m.Z,{click:A,mousedown:e=>k(e,w),order:n});case"_frameIO":return b.createElement(y.Z,{click:A,mousedown:e=>k(e,w),order:n});case"fnIO":return b.createElement(h.Z,{click:A,mousedown:e=>k(e,w),order:n});case"param":return b.createElement(d.Z,{click:A,mousedown:e=>k(e,w),order:n});case"config":return b.createElement(f.Z,{click:A,mousedown:e=>k(e,w),order:n})}}function A(e){const{model:t,context:n,viewContext:o}=(0,i.N7)(E),{hintConnection:r,emitComponent:a}=o;a.focus(t),t.conAry&&t.conAry.forEach((e=>{r(e)}))}function k(e,t){const{model:n,comContext:l,viewContext:s}=t,{context:c,viewModel:d,emitSnap:m,scale:p,getCurDiagram:u}=s;if(c.isDebugMode())return;if("output"!=n.direction&&"inner-output"!=n.direction&&!n.isTypeOfEvent()&&!n.isTypeOfShotcut())return;let f,h,g,y;const x=u();(0,i.qw)(e,(({po:{x:e,y:t},epo:{ex:c,ey:u},targetStyle:v},b)=>{if("start"==b){l.dragable=!1,h=(0,i.dL)(x.$el),g={x:(v.x-h.x)/p+v.w/2,y:Math.round((v.y-h.y)/p)+.5,j:o.O.joinerWidth},n.hover=!1;const e=a.o.create(n,g);y=x.addConnection(e,!0),y.connecting()}if("moving"==b)s.pinConTodo||(s.pinConTodo=n),y.finishPo={x:Math.round((c-h.x)/p),y:Math.round((u-h.y)/p)+.5,j:o.O.joinerWidth};else if("finish"==b)if(s.pinConTodo=void 0,l.dragable=!0,C.model){if(C.model===n)return void y.destroy();y.destroy(),f=m.start("move pin",{target:n}),function(e,t,n=1){var o;const{model:r}=C,{context:l,model:s,viewContext:c}=(0,i.N7)(E),{emitComponent:d,emitMessage:m,getCurDiagram:p}=c;if(l.isDebugMode())return void d.focus(s);if(!r||"config"!=r.direction&&"input"!=r.direction&&"inner-input"!=r.direction)t.cancel();else if(e.hadConToPin(r))t.cancel();else{if("inner-input"!==r.direction&&(null===(o=r.conAry)||void 0===o?void 0:o.length)>0)return m.warn("该输入项已存在连接."),void t.cancel();const l=p();e.hover=!1;const s=e.$el,c=(0,i.dL)(s),u={w:s.width(),h:s.height()},f=(0,i.dL)(r.$el),h={w:r.$el.width(),h:r.$el.height()},g=(0,i.dL)(l.$el);let y,x,v;if(void 0!==e.conMax){const t=e.conAry.filter((e=>!e.isTemp));if(t.length>=e.conMax){x=!0;const e=t[t.length-1];d.delete(e),d.disConnected(e)}}v=r.isTypeOfConfig()?{x:Math.round((f.x-g.x)/n),y:Math.round((f.y-g.y)/n)+.5,j:r.getJoinerWidth()}:{x:Math.round((f.x-g.x)/n-h.w/2),y:Math.round((f.y-g.y)/n)+.5,j:r.getJoinerWidth()};const b=()=>{const o=l.addConnection(a.o.create(e,{x:Math.round((c.x-g.x)/n+u.w/2),y:Math.round((c.y-g.y)/n)+.5,j:e.getJoinerWidth()},r,v));d.connected(o),t.commit(),d.focus(o),!0!==y&&(o.errorInfo=y),o.parent.connections.changed()};x?setTimeout(b):b()}}(n,f,p)}else{const e=n.$el.getStage().container(),t=(0,r.bt)(e),o=c-d.style.left-t.x,i=u-d.style.top-t.y;s.emitComponent.assistWithPin(n,x,{x:o,y:i},{onComplete(){setTimeout((e=>{y.destroy()}))}})}}))}},67766:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(83446),i=n(71442),r=n(33029),a=function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let s=class extends r.O{constructor(e){super(),delete this.title,delete this.schema,delete this.type,delete this.hostId,e&&(this.from=e.from,this.parent=this.from.parent,this.direction="inner-output",this.icon="arrowL")}set title(e){this.from&&(this.from.title=e)}get title(){return this.from.title}get schema(){return this.from.schema}set schema(e){this.from&&(this.from.schema=e)}get _schemaFollow(){if(this.from)return this.from._schemaFollow}get type(){return this.from.type}get hostId(){return this.from.hostId}get rels(){return this.from.rels}get deletable(){return this.from.deletable}hadDestroyed(){return this.from.hadDestroyed()}};s=a([(0,o.iV)(i.it+"topl.PinModelAsJoint"),l("design:paramtypes",[Object])],s);const c=s},91959:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(83446),i=n(2102),r=n(90359),a=n.n(r),l=n(40635),s=n(46913),c=n(47731),d=n(71442),m=n(39920),p=n(56258);function u({click:e,mousedown:t}){const n=(0,o.N7)(i.Rn,{from:"parents"}),{model:u,context:f,viewContext:h}=n;(0,r.useEffect)((()=>{const e=u.parent;u instanceof p.default&&(u.isStarter=!0),e instanceof m.default&&e.hasInvalidIOC(u.hostId,u.isDirectionOfInput()?"input":"output")&&(n.errorMsg="未定义",u.conAry&&u.conAry.forEach((e=>{e.invalid=!0})))}),[]);const g=(0,o.vc)((()=>{if(f.isDebugMode()){const t=(u.forkedFrom||u).exe;if(t){const{val:n,from:i}=t;let r;return r=void 0!==n?"object"==typeof n?Array.isArray(n)?"[...]":"{...}":JSON.stringify(n):"[空]",a().createElement(l.Text,{text:r,x:11,y:5,fontSize:10,fill:s.Z.colorPrimary,onClick:(0,o.Ft)(e).stop})}}})),y=(0,o.vc)((()=>{const e=(0,d.a0)(u.schema.type),t=n.hoverF||u.state.isFocused()||u.emphasized||f.isDebugMode()&&(u.forkedFrom||u).state.isRunning();let o;return n.errorMsg&&(o={stroke:"#FF0000",dash:[2,2],fill:"#fff"}),"arrowL"===u.icon?a().createElement(a().Fragment,null,a().createElement(l.Arc,{x:0,y:0,angle:180,rotation:90,innerRadius:0,outerRadius:10,stroke:"#AAA",strokeWidth:1,fill:"#FFF"}),a().createElement(l.Arc,Object.assign({x:0,y:0,angle:180,rotation:-90,innerRadius:0,outerRadius:10,stroke:t?s.Z.colorPrimary:e.strokeColor,strokeWidth:1,fill:t?s.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}},o))):a().createElement(l.Circle,Object.assign({width:20,height:20,stroke:t?s.Z.colorPrimary:e.strokeColor,strokeWidth:1,fill:t?s.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}},o))})),x=(0,o.vc)((()=>{const e=n.hoverF||u.state.isFocused()||u.emphasized;return n.errorMsg?a().createElement(l.Label,{x:11,y:-4},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:`${u.title}(${n.errorMsg}) `,fontSize:10,fill:e?s.Z.colorPrimary:"#FF0000"})):a().createElement(l.Label,{x:11,y:-4},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:` ${u.title} `,fontSize:10,fill:e?s.Z.colorPrimary:"#999"}))}));let v=1;return f.isDebugMode()&&(v=u.conAry&&u.conAry.find((e=>e.exe))?1:.2),a().createElement(l.Group,Object.assign({id:u.id,ref:u.set$elOnce,width:20,height:20},(0,c.I)(n),{onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent}),y,x,g)}},90370:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(83446),i=n(2102),r=n(40635),a=n(90359),l=n.n(a),s=n(46913),c=n(47731),d=n(86409),m=n(71442);function p({click:e,mousedown:t,order:n}){const p=(0,o.N7)(i.Rn,{from:"parents"}),{model:f,context:h,emitDiagram:g,viewContext:y}=p;(0,a.useEffect)((()=>{if(f.conAry.length){const e=f.parent instanceof d.nW?f.parent.diagramModel:void 0;if(e){const t=(0,o.dL)(f.$el,e.$el),n=Math.round(t.x-t.w/2)+.5,i=Math.round(t.y)+.5,r=f.getJoinerWidth();f.conAry.forEach((e=>{e._finishPo&&(Math.abs(t.x-e._finishPo.x)>2||Math.abs(t.y-e._finishPo.y)>2)&&(e.finishPo={x:n,y:i,j:r})}))}}}),[f.listenNotify()]),(0,o.vc)((()=>{var e;(f._anchor||(null===(e=f.forkedFrom)||void 0===e?void 0:e._anchor))&&g.anchor(f)}));const x=(0,o.vc)((()=>{const t=u(p);if(t){const n=t.val;let i;return i=void 0===n?"[空]":"object"==typeof n?Array.isArray(n)?"[...]":"{...}":"string"==typeof n?n.length>10?`"${n.substring(0,5)}..."`:`"${n}"`:n,l().createElement(r.Label,{x:7,y:4,ref:e=>{e&&f.isDirectionOfInput()&&e.x(-1*(e.width()+8))}},l().createElement(r.Tag,{fill:"#FFF"}),l().createElement(r.Text,{align:f.isDirectionOfInput()?"right":"left",text:i,fontSize:10,fill:s.Z.colorPrimary,onClick:(0,o.Ft)(e).stop}))}})),v=(0,o.vc)((()=>{let e=f.schema;f.isDirectionOfOutput()&&f.proxyPinValue&&(e=f.proxyPinValue.schema),f.proxyForPin&&(e=f.proxyForPin.schema);const t=(0,m.a0)(null==e?void 0:e.type),n=p.hoverF||f.state.isFocused()||f.emphasized||f.emphasized,o=u(p);return l().createElement(l().Fragment,null,l().createElement(r.Path,Object.assign({data:"M -3 -4 L 0 -4 L 4 0 L 0 4 L -3 4 L -3 -4"},(0,c.I)(p),{strokeWidth:1,stroke:n||o?s.Z.colorPrimary:t.strokeColor,hitStrokeWidth:15,fill:p.hoverF||n||o?s.Z.colorPrimary:t.fillColor,style:{cursor:"pointer"}})))})),b=(0,o.vc)((()=>{let e;e=f.proxyForPin?f.proxyForPin.title:f.proxyPin?f.proxyPin.title:f.title;const t=f.state.isFocused()||f.emphasized;if(t||f.conAry.length){const n=e,o=-5;return f.isDirectionOfInput()?l().createElement(r.Label,{y:o,ref:e=>e&&e.x(-1*(e.width()+4))},l().createElement(r.Tag,{fill:"#FFF"}),l().createElement(r.Text,{text:` ${n} `,fontSize:10,fill:t?s.Z.colorPrimary:"#777",listening:!1})):l().createElement(r.Label,{x:4,y:o},l().createElement(r.Tag,{fill:"#FFF"}),l().createElement(r.Text,{text:` ${n} `,fontSize:10,fill:t?s.Z.colorPrimary:"#777",listening:!1}))}}));return l().createElement(r.Group,{id:f.id,ref:f.set$elOnce,width:7,height:10,y:20*n,onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent,_onError_:(e,t)=>{console.error(e)}},v,b,x)}function u(e){const{model:t,context:n,viewContext:o}=e;if(n.isDebugMode()){let e;return t.conAry.find((t=>{if(t.exe)return e=t.exe,!0})),e||(e=t.exe),e}}},51049:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(83446),i=n(2102),r=n(90359),a=n.n(r),l=n(40635),s=n(47731),c=n(46913),d=n(71442),m=n(44780);function p({click:e,mousedown:t,order:n}){const r=(0,o.N7)(i.Rn,{from:"parents"}),{model:p,context:u,viewContext:f}=r,h=(0,o.vc)((()=>{let t;if(p.parent instanceof m.g&&(t=p.parent),t&&t.debuggable||u.isDebugMode()){const t=(p.forkedFrom||p).exe;if(t){const{val:n,from:i}=t;if(void 0!==n){let t;return t="object"==typeof n?Array.isArray(n)?"[...]":"{...}":JSON.stringify(n),a().createElement(l.Text,{text:t,x:11,y:5,fontSize:10,fill:c.Z.colorPrimary,onClick:(0,o.Ft)(e).stop})}}}})),g=(0,o.vc)((()=>{const e=p.schema?(0,d.a0)(p.schema.type):{strokeColor:"#AAA",fillColor:"#EEE"},t=r.hoverF||p.state.isFocused()||p.emphasized;let n;return p.wrap&&(n=a().createElement(l.Circle,{width:26,height:26,stroke:"#bab4cd",strokeWidth:1,fill:"#FFF",style:{cursor:"pointer"}})),a().createElement(a().Fragment,null,n,a().createElement(l.Circle,{width:18,height:18,strokeWidth:1,fill:"#FFF",style:{cursor:"pointer"}}),a().createElement(l.Ring,{width:18,height:18,innerRadius:5,outerRadius:9,stroke:t?c.Z.colorPrimary:e.strokeColor,strokeWidth:1,fill:t?c.Z.colorPrimary:e.fillColor,style:{cursor:"pointer"}}))})),y=(0,o.vc)((()=>{const e=r.hoverF||p.state.isFocused()||p.emphasized;return p.isDirectionOfInput()?a().createElement(l.Label,{x:"rectangle"===p.icon?10:11,y:-4},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:` ${p.title} `,fontSize:10,fill:e?c.Z.colorPrimary:"#777"})):a().createElement(l.Label,{y:-4,ref:e=>e&&e.x(-1*(e.width()+11))},a().createElement(l.Tag,{fill:"#FFF"}),a().createElement(l.Text,{text:`${p.title} `,fontSize:10,fill:e?c.Z.colorPrimary:"#777"}))}));let x=1;return u.isDebugMode()&&(x=p.exe?1:.2),a().createElement(l.Group,Object.assign({ref:p.set$elOnce,x:0,y:50*n,width:20,height:20,opacity:x},(0,s.I)(r),{onClick:(0,o.Ft)(e).stop,onMouseDown:(0,o.Ft)(t).stop.prevent}),g,y,h)}},38110:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(79127),i=n(22270),r=n(33397),a=n(23037),l=n(39920),s=n(83446),c=n(3005);function d(e,t){if(!(e.parent instanceof i.n&&e.isDirectionOfOutput()))return;const{model:n,viewContext:d}=t,{curFrameModel:m,context:p,getComEventAssist:u}=d;return{title:`${n.runtime.title} 的 ${e.title}`,getPrompts(t){let i="";const r=p.getComDef(n.runtime.def).ai;if(r&&"function"==typeof r["@focus"]){const e=r["@focus"]({data:n.runtime.model.data});if(e.def){const t={data:e.def};i=`以及当前组件定义:${JSON.stringify(t)}`}}const a=m.comAry,l=[],s=[];a.length>0&&a.forEach((e=>{const t=e.runtime,n=p.getComDef(t.def);if(("js"===n.rtType||"js-autorun"===n.rtType)&&n.namespace!==o.Vm.coms.var)return;const{ioAry:i}=u(n,{comTitle:t.title,instanceId:e.id});l.push(...i)}));const c=p.getAllComDefArray((e=>{if("js"!==e.rtType&&"js-autorun"!==e.rtType)return!1})).map((e=>({title:e.title,namespace:e.namespace})));return t(c,["namespace"]).forEach((t=>{const n=p.getComDef({namespace:t.namespace}),{ioAry:o,def:i,prompts:r}=u(n,{startPin:e});l.push(...o),(i||r)&&s.push(`其中，关于 ${n.title}组件${i?",定义为:"+JSON.stringify(i):""}：${r||""}\n`)})),`\n你是一名思路严谨的流程设计师,请严格按照以下节点定义,做流程编排设计:\n${l.map((e=>JSON.stringify(e))).join("\n")}\n${s.join("\n")}\n${i}\n\n注意：\n1:返回内容只能是下面的JSON结构,对内容无需任何注释,且只需要返回一个结果：\n  {\n    cmd:'createFlow',\n    data:{\n          "type":"mybricks.basic-comlib.rectangle:rotate"\n          "next":{}\n        }\n  }\n2:节点只能来自上述定义，上一个节点的next的语义一定要与下一个节点有良好的连接;\n3:如果没有合适的答案，返回null即可；\n\n以下是一些典型的问答例子:\n问：调用服务接口（或调用接口、调用服务、接口）:\n{cmd:'createFlow',\n  data:{\n    "type":"mybricks.normal-pc.service:call"\n  }\n}\n\n问：接口、js、提示\n{cmd:'createFlow',\n  data:{\n    "type":"mybricks.normal-pc.service:call",\n    "next":{\n      "then":{\n        "type":"mybricks.normal-pc.muilt-inputJs:input",\n        "next":{\n          "output0":{"type":"mybricks.normal-pc.message:showMsg"}\n        }\n      }\n    }\n  }\n}\n\n问：调用服务接口，成功时给出提示，出错时进行一次计算、然后给出提示:\n{cmd:'createFlow',\n  data:{\n    "type":"mybricks.normal-pc.service:call",\n    "next":{\n      "then":{\n        "type":"mybricks.normal-pc.muilt-inputJs:input",\n        "next":{\n          "output0":{"type":"mybricks.normal-pc.message:showMsg"}\n        }\n      },\n      "catch":{"type":"mybricks.normal-pc.message:showMsg"}\n    }\n  }\n}\n\n问：两个计算（或两次计算、计算计算）:\n{cmd:'createFlow',\n  data:{\n    "type":"mybricks.normal-pc.muilt-inputJs:input",\n    "next":{\n      "output0":{\n          "type":"mybricks.normal-pc.muilt-inputJs:input",\n        }\n    }\n  }\n}\n\n问：执行一段计算，然后拔掉电源，当出错时将其内容给到文本组件:\nnull\n      `},execute:n=>new Promise(((d,m)=>{if(null!==n)return n.cmd&&"createFlow"===n.cmd?(function(e,{json:t,comContext:n}){const{context:d,model:m}=n;let p;p=m instanceof l.default?m.forkedFrom.parent.comAry:m.parent.comAry;function u(e){return p.find((t=>t.id===e))}function f(e){const{type:t,next:n}=e;if(!t)return;const[o,i]=t.split(":");let r;if(0===o.indexOf("#"))r=u(o.slice(1));else{if(!d.getComDef({namespace:o}))return;r=o}if(r){const t={};for(let n in e)"type"!==n&&"next"!==n&&(t[n]=e[n]);const o={com:r,props:t,hostId:i,next:{}};if(n)for(let e in n)if(n[e]){const t=f(n[e]);t&&(o.next[e]=t)}return o}}try{const l=f(t.data);if(l){!function(e,t){const{model:n,viewContext:l}=t,{getCurDiagram:d,emitComponent:m}=l,p=d();let u;const f={hostId:void 0,node:void 0,ti:1};function h(){let e;const{title:n,com:d,props:g,hostId:y,next:x}=f.node;(0,r.fq)((()=>{try{const n=u.searchPinByHostId(f.hostId,"outputs");if((null==n?void 0:n.$el)&&!e){const a=(0,s.dL)(n.$el,n.$el.getStage());let m=a.x+150,u=a.y-10;if(n.conAry.length>0&&(u+=80*n.conAry.length),"string"==typeof d){const n=function(e,t,n){const{viewContext:a}=n,{context:l,emitComponent:s,emitSnap:d,emitLogs:m,getCurDiagram:p}=a,u=new o.u5(e),f=p(),h=f.parent,g=(0,r.Tk)(s.add({seedModel:u,toComId:h&&h.parent instanceof i.n?h.parent.id:void 0,toSlotId:h.id,state:"finish"})),y=e.ai;if(y&&"function"==typeof y["@create"]){const e=(0,c.e)({context:l,model:g,emitComponent:s,emitSnap:d,emitLogs:m});y["@create"](Object.assign({def:t,data:g.runtime.model.data},e))}return g}(l.context.getComDef({namespace:d}),g,t);e=p.addCom(n,{x:m,y:u})}else{const t=d.forkedFrom||d,n=t.searchPinByHostId(y,"inputs"),o={inputs:[y],outputs:n.rels};e=p.addCom(t,{x:m,y:u},o)}}if(e){const t=a.tk.find((e=>e.hostId===y||e.hostId.startsWith(y)),...e.getInputsAll());if(t&&t.$el){const o=p.addConnection(n,t);return m.connected(o),u=e,!0}}}catch(e){console.error(e)}}),(()=>{if(x)for(let e in x){const t=x[e];f.hostId=e,f.node=t,f.ti++,h()}}))}u=e.com,f.hostId=e.hostId,f.node=e.next[e.hostId],h()}({title:m.runtime.title,com:m,hostId:e.hostId,next:{[e.hostId]:l}},n)}else console.log("not found")}catch(e){console.error(e)}}(e,{json:n,comContext:t}),void d("完成")):void 0;d("没有合适的答案,请重新输入")}))}}},83848:(e,t,n)=>{n.d(t,{U:()=>m});var o=n(79127),i=n(23037),r=n(22270),a=n(41460),l=n(42524),s=n(44780),c=n(44244),d=n(90359);function m(e,t){var n,m,p,u,f,h,g;const{model:y,context:x,viewContext:v}=e,{scale:b,emitSnap:E,emitComponent:C,emitEditor:w,configs:A}=v;let k,F=[];k=y.isTypeOfConfig()?"编辑项":"joint"===y.type?y.typeTitle||(y.isDirectionOfInput()?"输入":"输出")+"连接项":y.typeTitle||(y.isDirectionOfInput()?"输入":"输出")+"项";const Z=new o.Af.Category(k);F.push(Z);const M=new o.Af.Group;Z.addGroup(M);const I={model:y,emitSnap:E};y.parent;const P=y.parent instanceof s.g&&y.parent.isTypeOfFx(),N=y.parent instanceof s.g&&y.parent.isTypeOfPopup(),T=y.parent instanceof s.g&&y.parent.isTypeOfModule(),O=!y.parent.parent&&y.direction.match(/^inner\-/),D=null===(m=null===(n=A.cards)||void 0===n?void 0:n.main)||void 0===m?void 0:m.ioEditable,S=O&&D;let $=!1;if((S||P)&&($=!0),P||T||N||M.addItem((0,a.B)(I,{title:"ID",type:"text",options:()=>({readonly:!$}),value:{get:()=>y.hostId,set(e,t){y.id=t,y.hostId=t}}})),M.addItem((0,a.B)(I,{title:"标题",type:"text",options:()=>({readonly:!y.editable}),value:{get(){let e;return e=y.proxyForPin?y.proxyForPin.title:y.proxyPin?y.proxyPin.title:y.title,e},set(e,t){y.title=t;const n=y.parent;n instanceof r.n?y.isDirectionOfInput()?n.setInputPinTitle(y.hostId,t):n.setOutputPinTitle(y.hostId,t):n instanceof s.g&&(y.isDirectionOfInput()?n.renameInputPin(y.hostId,t):n.renameOutputPin(y.hostId,t))}}})),y.parent instanceof r.n){const e=x.getComDef(y.parent.runtime.def);if(e){let t;t=y.isDirectionOfInput()?null===(p=e.inputs)||void 0===p?void 0:p.find((e=>{if(e.id===y.hostId)return e})):null===(u=e.outputs)||void 0===u?void 0:u.find((e=>{if(e.id===y.hostId)return e})),t&&t.desc&&M.addItem((0,a.B)(I,{title:"说明",type:"text",options:()=>({readonly:!0}),value:{get:()=>t.desc}}))}}if(y.isTypeOfConfig()){M.addItem((0,a.B)(I,{title:"类型",type:"_schema",value:{get:()=>y.schema,set({},e){C.updateFramePinSchema(y.isDirectionOfInput()?"outputs":"inputs",y,e)}}})),M.addItem((0,a.B)(I,{title:"配置编辑器",description:"可以作为组件的可视化编辑项",type:"switch",value:{get:()=>!!y.editor,set({},e){y.editor=e?{type:"text",schemaType:"string"}:void 0}}}));const e=[{value:"text",label:"文本框",schemeType:"string"},{value:"textarea",label:"多行文本",schemeType:"string"},{value:"switch",label:"开关",schemeType:"boolean"},{value:"_connectorSelect",label:"连接器",schemeType:"object"},{value:"imageselector",label:"图片",schemeType:"string"},{value:"colorpicker",label:"颜色选择器",schemeType:"string"},{value:"array",label:"数组编辑器",schemeType:"array"}];M.addItem((0,a.B)(I,{title:"编辑器",type:"select",options:e.map((e=>({value:`${e.value}|${e.schemeType}`,label:e.label}))),ifVisible:()=>!!y.editor,value:{get(){const t=y.editor;if(t){if(t.schemaType)return`${t.type}|${t.schemaType}`;{const n=e.find((e=>e.value===t.type||"text"));return y.schema={type:n.schemeType},`${n.value}|${n.schemeType}`}}return"text|string"},set({},e){if(y.editor||(y.editor={}),e){const[t,n]=e.split("|");y.editor={type:t,schemaType:n},y.schema={type:n}}}}}))}else M.addItem((0,a.B)(I,{title:"类型",type:"_schema",options:()=>y._schemaEditable||y.editable?y._schemaFollow&&y.conAry.length>0?{readOnly:!0}:void 0:{readOnly:!0},value:{get(){let e=y.schema;return y.isDirectionOfOutput()&&y.proxyPinValue&&(e=y.proxyPinValue.schema),y.proxyForPin&&(e=y.proxyForPin.schema),e},set({},e){(0,c.YH)(y.schema,e)||(y.mockData=(0,c.Dp)(e)),y.parent instanceof r.n?C.updatePinSchema(y.isDirectionOfInput()?"inputs":"outputs",y.parent.id,y.hostId,e):C.updateFramePinSchema(y.isDirectionOfInput()?"outputs":"inputs",y,e)}}}));if(x.configs.geoView&&T&&"inner-output"===y.direction&&!y.isTypeOfConfig()&&(M.addSeparator(),M.addItem((0,a.B)(I,{title:"关联到输出项..",type:"switch",description:"是否关联到当前模块的某个输出项",value:{get:()=>y.rels,set(e,t){y.rels=t?[]:void 0}}})),M.addItem((0,a.B)(I,{title:"关联输出项",type:"select",ifVisible:()=>!!(y.parent instanceof s.g&&y.rels),options(){const e=y.parent.outputPins;return[{label:"[无]",value:""}].concat(e.map((e=>{if(!e.isTypeOfEvent()&&!e.isTypeOfShotcut())return{value:e.hostId,label:e.title}})).filter((e=>e)))},description:"关联到输出项",value:{get(){var e;return(null===(e=y.rels)||void 0===e?void 0:e.join(","))||""},set(e,t){if(y.rels=void 0,t){const e=t.trim();""!==e&&(y.rels=e.split(","))}}}}))),y.isDirectionOfInput()||M.addItem((()=>d.createElement("div",null,d.createElement("span",null,"连接数"),d.createElement("span",{style:{marginLeft:2,fontStyle:"italic",color:"#999"}},"（",void 0!==y.conMax?`允许连接 ${y.conMax} 个输入项`:"不限","）")))),y.isTypeOfConfig()&&y.fromPlugin){const e=x.getPlugin(y.fromPlugin);if(e){const t=null===(g=null===(h=null===(f=e.contributes)||void 0===f?void 0:f.toplView)||void 0===h?void 0:h.globalIO)||void 0===g?void 0:g.configs;if("object"==typeof t&&t){const e=t.addInput;if(e&&"object"==typeof e&&"config"===e.type){const t=e.editors;if(Array.isArray(t)){const e=new o.Af.Group;Z.addGroup(e),t.forEach((t=>{var n,o;t&&"function"==typeof(null===(n=t.value)||void 0===n?void 0:n.get)&&"function"==typeof(null===(o=t.value)||void 0===o?void 0:o.set)&&e.addItem((0,a.B)(I,{title:t.title,type:t.type,options:t.options,description:t.description,ifVisible:()=>"function"!=typeof t.ifVisible||t.ifVisible({values:y.extValues}),value:{get:()=>t.value.get({values:y.extValues}),set(e,n){t.value.set({values:y.extValues},n)}}}))}))}}}}}if(x.isDesnMode()){const e=new o.Af.Group;Z.addGroup(e);let t=S;if(!t&&P){const e=y.parent;y.isDirectionOfInput()?e.inputPins.length>1&&(t=!0):e.outputPins.length>1&&(t=!0)}if(t){const t=y.parent;let n=!1;y.isDirectionOfInput()?t.inputPins.length>1&&(n=!0):y.isDirectionOfOutput()&&t.outputPins.length>1&&(n=!0),n&&(e.addItem((0,a.B)(I,{title:"上移",type:"button",value:{set(e,n){if(t.upwardPin(y)){const e=v.getCurDiagram();y.isDirectionOfInput()?t.refreshInnerCons(e,!0,"input"):t.refreshInnerCons(e,!0,"output")}}}})),e.addItem((0,a.B)(I,{title:"下移",type:"button",value:{set(e,n){if(t.downwardPin(y)){const e=v.getCurDiagram();y.isDirectionOfInput()?t.refreshInnerCons(e,!0,"input"):t.refreshInnerCons(e,!0,"output")}}}})))}y.deletable&&e.addItem((0,a.B)(I,{title:"删除",type:"button",value:{set(){const e=E.start(`删除 ${y.title}`,{target:y});try{const t=y.parent;if(t instanceof r.n)y.isDirectionOfInput()?t.removeInputPin(y.hostId):t.removeOutputPin(y.hostId),C.notifyPinRemoved(y);else if(t instanceof s.g)if(y.isTypeOfJoint()){if(y.isDirectionOfInput()?t.removeInputJoint(y.hostId):t.removeOutputJoint(y.hostId),y.forkedAsJoint){const e=t.parent.parent;e&&e.diagramAry.find((t=>{t.startWithJoint&&t.startWithJoint.outputJoint===y.forkedAsJoint&&e.delete(t)}))}}else y.isDirectionOfInput()?t.removeInputPin(y.hostId):t.removeOutputPin(y.hostId);(0,l.AP)(t,b),e.commit()}catch(t){console.error(t),e.cancel()}}}}))}let _;if(y.parent instanceof s.g)_=y.parent;else if(y.parent instanceof r.n){const e=y.parent.diagramModel;e&&(_=e.parent)}if(x.isDebugMode()||_&&_.debuggable){const t=new o.Af.Group;Z.addGroup(t),t.addItem((0,a.B)(I,{title:"调试-当前值",type:"textarea",options:{readOnly:!0,style:{height:400}},value:{get(){var t;let n;y.exe?n=y.exe.val:e.isTypeOfStartWith()&&y.forkedFrom?n=null===(t=y.forkedFrom.exe)||void 0===t?void 0:t.val:y.conAry&&y.conAry.find((e=>{e.exe&&(n=e.exe.val)}));return(0,i.Dq)(n)}}}))}if(y.isDirectionOfInput()){const e=new o.Af.Category("调试");F.push(e);const t=new o.Af.Group;e.addGroup(t),t.addItem((0,a.B)(I,{title:"使用JSON",type:"switch",value:{get:()=>"json"===y.mockDataType,set(e,t){y.mockDataType=t?"json":void 0}}})),t.addItem((0,a.B)(I,{title:"数据",type:"_schemaValue",ifVisible:({data:e})=>"json"!==y.mockDataType,options:()=>({schema:y.schema}),value:{get:()=>y.mockData,set(e,t){y.mockData=t}}})),t.addItem((0,a.B)(I,{ifVisible:({data:e})=>"json"===y.mockDataType,type:"textarea",options:{height:400},value:{get:()=>decodeURIComponent(y.mockData||""),set(e,t){y.mockData=encodeURIComponent(t)}}}))}return F}},47731:(e,t,n)=>{n.d(t,{I:()=>i});var o=n(2102);function i(e){return{onMouseOver:t=>{const n=e.context.isDebugMode();t.target.getStage().container().style.cursor=n?"default":"crosshair",e.hoverF=!0,o.FV.set(e.model)},onMouseOut:t=>{t.target.getStage().container().style.cursor="default",e.hoverF=!1,o.FV.clear()}}}},92868:(e,t,n)=>{function o(e,t){if(t.comLibAry){const n=t.comLibAry.find((e=>{if(e.defined)return!0}));n&&(e.comAray&&e.comAray.forEach((e=>{if(n.comAray){n.comAray.find((t=>t.namespace===e.namespace))||n.comAray.push(e)}})),n.comAray&&n.comAray.forEach(((t,o)=>{if(e.comAray){const i=e.comAray.find((e=>e.namespace===t.namespace));if(i&&t.version!==i.version){for(let e in i)t[e]=i[e];t._upgrade=Math.random()}i||(t._upgrade=Math.random(),n.comAray.splice(o,1))}})))}}n.d(t,{R:()=>o})},44244:(e,t,n)=>{n.d(t,{Dp:()=>l,YH:()=>a,ft:()=>r,ux:()=>i});var o=n(23037);function i(e){return"follow"===e.type}function r(e,t){return JSON.stringify(e)===JSON.stringify(t)}function a(e,t){var n,i,r,l;if(void 0===e)return!1;if(void 0===t)return!1;const s=e.type,c=t.type;if("unknown"===s)return"any"===c||"unknown"===c;if("unknown"===c)return!1;if("any"===s||"any"===c)return!0;if("follow"===s)return"follow"!==c;if("follow"===c)return"follow"!==s;if((0,o.Wu)(e))return s===c||(!!c.match(/number|boolean/g)||("string"===s&&"boolean"===c||"number"===s&&"string"===c));if("indexObject"===s&&"indexObject"===c){const o=e.properties,a=t.properties;if(o&&a&&(null===(n=o.key)||void 0===n?void 0:n.type)===(null===(i=a.key)||void 0===i?void 0:i.type)&&(null===(r=o.value)||void 0===r?void 0:r.type)===(null===(l=a.value)||void 0===l?void 0:l.type))return!0}if("enum"===s&&"enum"===c){const n=e.items,o=t.items;if(n&&o&&n.length===o.length&&!n.find(((e,t)=>{const n=o[t];if(e.type!==n.type||e.value!==n.value)return!0})))return!0}if("tuple"===s&&"tuple"===c){const n=e.items,o=t.items;if(n&&o&&n.length===o.length&&!n.find(((e,t)=>{const n=o[t];if(e.type!==n.type)return!0})))return!0}if("object"===s){if("object"!==c)return!1;{const n=e.properties,o=t.properties;if(void 0===n&&void 0===o)return!0;if(n&&void 0===o)return!0;if(void 0===n&&o)return!1;for(let e in n){const t=o[e];if(!t)return!1;if(!a(n[e],t))return!1}for(let e in o){const t=n[e];if(!t)return!1;if(!a(t,o[e]))return!1}return!0}}if("array"===e.type){if("array"!==t.type)return!1;{const n=e.items,o=t.items;if(void 0===n&&void 0===o)return!0;if(n&&void 0===o)return!0;if(void 0===n&&o)return!1;return!!a(n,o)}}return!1}function l(e){switch(e.type){case"number":return 0;case"string":return"字符";case"boolean":return!0;case"object":{const t={},n=e.properties;return n&&Object.keys(n).forEach((e=>{t[e]=l(n[e])})),t}case"array":return[]}}},78263:(e,t,n)=>{n.d(t,{M:()=>a,i:()=>l});var o=n(22270),i=n(83446),r=n(42524);function a(e,t){const{emitComponent:n,emitSnap:o,emitMessage:i}=t,r=o.start("tidyUpDiagram",{target:e});!function(e,t){if(e.comAry){const n=[];if((e.isFn||e.isGlobal)&&e.parent.inputPins.length>0&&e.parent.inputPins.forEach((t=>{c(n,t,e)})),e.isVar){const t=e.varCom.outputPins.find((e=>"changed"===e.hostId));t&&c(n,t,e)}if(e.startWithCom){const t=e.startWithCom.getOutputsAllAry();t&&t.forEach((t=>{c(n,t,e)}))}e.comAry.forEach((e=>{(e.isAutoRun()&&!e.runtime.hasUI()||e.isVar()&&e.getAllInputsLength()<=0)&&m(n,e,0,[])})),s(n,e,t)}}(e,(()=>{i.info("整理完成"),r.commit()}))}function l(e,t){const{emitSnap:n,emitMessage:o}=t,i=n.start("整理组件",{target:e}),r=[];m(r,e,0,[]),s(r,e.diagramModel,(()=>{o.info("整理完成"),i.commit()}))}function s(e,t,n){e.length>0&&e.forEach(((o,i)=>{requestAnimationFrame((()=>{o.fn(),requestAnimationFrame((()=>{let o=0,r=0;t.comAry.forEach((e=>{if(e.$el){const t=e.$el.getClientRect(),n=e.style.left+t.width;o=Math.max(o,n);const i=e.style.top+t.height;r=Math.max(r,i)}})),o>t.style.width+100&&t.setWidth(o+100),r>t.style.height+100&&t.setHeight(r+100),"function"==typeof n&&i===e.length-1&&requestAnimationFrame(n)}))}))}))}function c(e,t,n){if(!t.$el)return;const r=t.$el.getStage().scaleX();let a=(0,i.dL)(t.$el,n.$el).y-10;if(t.conAry.length>0){const n=p(t),i=[];n.forEach((({con:t,pins:n},l)=>{a+=20*l,0===l&&i.push(a);const{startPin:s,finishPin:c}=t;if(!c)return;const p=c.parent;p&&p instanceof o.n?(e.push((e=>({com:p,fn(){if(l>0){const t=Math.max(...i)/r;e<t&&(e=t,i[0]=t)}d(t,{top:e})}}))(a)),m(e,p,1,i)):a+=20}))}}function d(e,t){const{startPin:n,finishPin:a}=e,l=e.parent,s=(0,i.dL)(n.$el,l.$el),c=n.$el.getStage().scaleX(),d=a.parent;if(d&&d instanceof o.n){let e=d.style.left;if(null==t?void 0:t.left)d.style.left=t.left/c;else{const t=n.$el.getClientRect(),o=a.$el.getClientRect();d.style.left=Math.max(e,s.x+t.width+30+o.width)/c}(null==t?void 0:t.top)&&(d.style.top=t.top/c),(0,r.AP)(d,c)}}function m(e,t,n,r){const a=t.diagramModel,l=t.getOutputsAllAry();if(l.length<=0)return void e.push({level:n,com:t,fn(){let e=(0,i.dL)(t.$el,a.$el).y;e+=t.$el.getClientRect().height+5,r.length<=n?r.push(e):r[n]=e}});let s,c;l.forEach(((u,f)=>{if(u.conAry.length>0){p(u).forEach((({con:p,pins:u},f)=>{const{startPin:h,finishPin:g}=p,y=g.parent;if(y&&y instanceof o.n){e.find((e=>{if(e.com===y)return!0}))?e.push({com:y,fn(){d(p)}}):e.push({level:n,com:y,fn(){if(s||(s=0,l.forEach(((e,t)=>{e.conAry&&(s=Math.max(s,function(e){let t=0;if(e.conAry.length>0){const n=e.conAry[0].parent,o=(0,i.dL)(e.$el,n.$el),r=e.$el.getClientRect();e.conAry.forEach(((e,n)=>{const{finishPin:i}=e,a=i.$el.getClientRect();t=Math.max(t,o.x+r.width+20+a.width)}))}return t}(e)))}))),!c){const e=(0,i.dL)(t.$el,a.$el);c=e.y}let e=c;r.forEach(((t,o)=>{o>=n&&(e=Math.max(e,t))})),c<e&&(c=e),d(p,{left:s,top:c});const o=y.$el.getClientRect();c+=o.height+5,r.length<=n?r.push(c):r[n]=c}}),m(e,y,n+1,r)}}))}}))}function p(e){return e.conAry.map((e=>{const{startPin:t,finishPin:n}=e;if(t&&n){return{con:e,pins:u(t,n.parent)}}})).filter((e=>e)).sort(((e,t)=>{const{con:n,pins:o}=e,{startPin:i,finishPin:r}=n,a=r.parent;if("function"==typeof a.getAllInputsLength){const e=a.getAllInputsLength();return o.length>1?-1*o.length+.1*e:(null==a?void 0:a.runtime.hasUI())?0:e}}))}function u(e,t){const n=e.conAry;if(n){const e=[];return n.forEach((n=>{const{startPin:i,finishPin:r}=n;if(!i||!r)return;const a=r.parent;if(a&&a instanceof o.n){if(a===t)return void e.push(r);if(a.runtime.hasUI()){const n=r.rels;if(n){const o=a.getOutputsAllAry().filter((e=>n.find((t=>{if(e.hostId===t)return!0}))));o&&o.forEach((n=>{u(n,t).length>0&&e.push(r)}))}}else{const n=a.getOutputsAllAry();n&&n.find((n=>{u(n,t).length>0&&e.push(r)}))}}})),e}}}}]);